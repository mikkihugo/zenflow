f2d708c9bd3cf5f26c46c4300c291a24
/**
 * Example Usage of Test Helper Utilities
 *
 * Demonstrates how to use the comprehensive test helpers for both
 * London School (mock-heavy) and Classical School (real object) TDD approaches
 */
import { describe, it, expect, beforeEach, afterEach, jest } from '@jest/globals';
// Import all test helpers
import { IntegrationTestSetup, createLondonMocks, testDataFactory, assertionHelpers, performanceMeasurement, createTestLogger } from './index.js';
describe('Test Helper Utilities - Example Usage', () => {
    let testLogger;
    beforeEach(() => {
        testLogger = createTestLogger('example-test');
    });
    afterEach(() => {
        testLogger.clearLogs();
    });
    describe('🎭 London School TDD Examples', () => {
        describe('Mock Builder Usage', () => {
            it('should create sophisticated mocks for interaction testing', () => {
                // Create London School mock builder
                const mockBuilder = createLondonMocks({
                    trackInteractions: true,
                    autoGenerate: true
                });
                // Create mock dependencies
                const mocks = mockBuilder.createCommonMocks();
                // Mock a service class
                class UserService {
                    database;
                    emailService;
                    logger;
                    constructor(database, emailService, logger) {
                        this.database = database;
                        this.emailService = emailService;
                        this.logger = logger;
                    }
                    async createUser(userData) {
                        this.logger.info('Creating user', userData);
                        const user = await this.database.save('users', userData);
                        await this.emailService.sendWelcomeEmail(user.email);
                        return user;
                    }
                }
                const mockUserService = mockBuilder.create(UserService);
                // Setup mock expectations (London School style)
                mocks.database.save.mockResolvedValue({ id: 1, email: 'test@example.com' });
                mocks.emailService.sendWelcomeEmail.mockResolvedValue(true);
                testLogger.logInteraction('MockBuilder', 'create', [UserService]);
                // Verify mock creation
                expect(mockUserService).toBeDefined();
                expect(typeof mockUserService.createUser).toBe('function');
            });
            it('should verify interaction sequences', async () => {
                const mockDatabase = {
                    connect: jest.fn(),
                    query: jest.fn(),
                    disconnect: jest.fn()
                };
                // Simulate a service that uses the database
                class DataService {
                    async getData(id) {
                        await mockDatabase.connect();
                        const result = await mockDatabase.query('SELECT * FROM data WHERE id = ?', [id]);
                        await mockDatabase.disconnect();
                        return result;
                    }
                }
                const service = new DataService();
                // Setup mocks
                mockDatabase.connect.mockResolvedValue(undefined);
                mockDatabase.query.mockResolvedValue([{ id: '123', name: 'test' }]);
                mockDatabase.disconnect.mockResolvedValue(undefined);
                // Execute
                const result = await service.getData('123');
                // London School: Verify interactions (HOW it works)
                expect(mockDatabase.connect).toHaveBeenCalledBefore(mockDatabase.query);
                expect(mockDatabase.query).toHaveBeenCalledWith('SELECT * FROM data WHERE id = ?', ['123']);
                expect(mockDatabase.disconnect).toHaveBeenCalledAfter(mockDatabase.query);
                testLogger.logInteraction('DataService', 'getData', ['123'], result);
            });
        });
        describe('Advanced Mock Patterns', () => {
            it('should handle complex dependency injection scenarios', () => {
                const mockBuilder = createLondonMocks();
                class EmailService {
                    provider;
                    constructor(provider) {
                        this.provider = provider;
                    }
                    async sendWelcome(email) {
                        return this.provider.sendEmail(email, 'Welcome!', 'Welcome to our service');
                    }
                }
                class UserService {
                    userRepo;
                    emailService;
                    constructor(userRepo, emailService) {
                        this.userRepo = userRepo;
                        this.emailService = emailService;
                    }
                    async registerUser(email, name) {
                        const existing = await this.userRepo.findByEmail(email);
                        if (existing)
                            throw new Error('User exists');
                        const user = await this.userRepo.save({ email, name });
                        await this.emailService.sendWelcome(email);
                        return user;
                    }
                }
                // Create mocks
                const mockEmailProvider = mockBuilder.createPartial({
                    sendEmail: jest.fn().mockResolvedValue(true)
                });
                const mockUserRepo = mockBuilder.createPartial({
                    findByEmail: jest.fn().mockResolvedValue(null),
                    save: jest.fn().mockResolvedValue({ id: 1, email: 'test@example.com', name: 'Test' })
                });
                const emailService = new EmailService(mockEmailProvider);
                const userService = new UserService(mockUserRepo, emailService);
                // Test the interaction
                expect(async () => {
                    const user = await userService.registerUser('test@example.com', 'Test User');
                    expect(user).toEqual({ id: 1, email: 'test@example.com', name: 'Test' });
                }).not.toThrow();
            });
        });
    });
    describe('🏛️ Classical School TDD Examples', () => {
        describe('Real Object Testing', () => {
            it('should test actual implementations without mocks', () => {
                // Classical TDD: Test real behavior, not mocks
                class Calculator {
                    add(a, b) {
                        return a + b;
                    }
                    divide(a, b) {
                        if (b === 0)
                            throw new Error('Division by zero');
                        return a / b;
                    }
                    factorial(n) {
                        if (n < 0)
                            throw new Error('Factorial of negative number');
                        if (n <= 1)
                            return 1;
                        return n * this.factorial(n - 1);
                    }
                }
                const calculator = new Calculator();
                // Test actual mathematical properties
                expect(calculator.add(2, 3)).toBe(5);
                expect(calculator.add(-1, 1)).toBe(0);
                expect(calculator.divide(10, 2)).toBe(5);
                expect(calculator.factorial(5)).toBe(120);
                // Test error conditions
                expect(() => calculator.divide(5, 0)).toThrow('Division by zero');
                expect(() => calculator.factorial(-1)).toThrow('Factorial of negative number');
                testLogger.logStateChange('Calculator', { operation: 'none' }, { result: 'tested' }, 'mathematical_operations');
            });
            it('should test algorithms and data structures', () => {
                // Classical approach: Test actual algorithm behavior
                class SortingAlgorithms {
                    bubbleSort(arr) {
                        const result = [...arr];
                        const n = result.length;
                        for (let i = 0; i < n - 1; i++) {
                            for (let j = 0; j < n - i - 1; j++) {
                                if (result[j] > result[j + 1]) {
                                    [result[j], result[j + 1]] = [result[j + 1], result[j]];
                                }
                            }
                        }
                        return result;
                    }
                    quickSort(arr) {
                        if (arr.length <= 1)
                            return arr;
                        const pivot = arr[Math.floor(arr.length / 2)];
                        const left = arr.filter(x => x < pivot);
                        const middle = arr.filter(x => x === pivot);
                        const right = arr.filter(x => x > pivot);
                        return [...this.quickSort(left), ...middle, ...this.quickSort(right)];
                    }
                }
                const sorter = new SortingAlgorithms();
                const testData = [64, 34, 25, 12, 22, 11, 90];
                const expected = [11, 12, 22, 25, 34, 64, 90];
                // Test both algorithms produce correct results
                expect(sorter.bubbleSort(testData)).toEqual(expected);
                expect(sorter.quickSort(testData)).toEqual(expected);
                // Test edge cases
                expect(sorter.bubbleSort([])).toEqual([]);
                expect(sorter.quickSort([1])).toEqual([1]);
                expect(sorter.bubbleSort([3, 1, 2])).toEqual([1, 2, 3]);
            });
        });
    });
    describe('📊 Performance Testing Examples', () => {
        it('should measure and compare algorithm performance', async () => {
            // Test data generation
            const testData = testDataFactory.createPerformanceData(1000);
            function linearSearch(arr, target) {
                for (let i = 0; i < arr.length; i++) {
                    if (arr[i].id === target)
                        return i;
                }
                return -1;
            }
            function binarySearch(arr, target) {
                let left = 0;
                let right = arr.length - 1;
                while (left <= right) {
                    const mid = Math.floor((left + right) / 2);
                    if (arr[mid].id === target)
                        return mid;
                    if (arr[mid].id < target)
                        left = mid + 1;
                    else
                        right = mid - 1;
                }
                return -1;
            }
            // Sort data for binary search
            const sortedData = testData.data.sort((a, b) => a.id - b.id);
            const target = testData.data[500].id;
            // Benchmark comparison
            const results = await performanceMeasurement.benchmarkComparison([
                {
                    name: 'Linear Search',
                    fn: () => linearSearch(testData.data, target)
                },
                {
                    name: 'Binary Search',
                    fn: () => binarySearch(sortedData, target)
                }
            ]);
            // Performance assertions
            expect(results).toHaveLength(2);
            expect(results[0].ranking).toBeLessThanOrEqual(2);
            expect(results[1].ranking).toBeLessThanOrEqual(2);
            // Binary search should be faster (lower ranking = better performance)
            const binaryResult = results.find(r => r.name === 'Binary Search');
            const linearResult = results.find(r => r.name === 'Linear Search');
            expect(binaryResult.ranking).toBeLessThan(linearResult.ranking);
            testLogger.logPerformance('Algorithm Comparison', binaryResult.metrics.executionTime, { algorithm: 'binary-search' });
        });
        it('should detect memory leaks', async () => {
            // Simulate potential memory leak
            const leakyFunction = () => {
                const largeArray = [];
                for (let i = 0; i < 1000; i++) {
                    largeArray.push(Math.random());
                }
                // Intentionally don't clean up
                return largeArray.length;
            };
            const cleanFunction = () => {
                const smallArray = [1, 2, 3];
                return smallArray.length;
            };
            // Test for memory leaks
            const leakResult = await performanceMeasurement.detectMemoryLeaks('Leaky Function', leakyFunction, 50);
            const cleanResult = await performanceMeasurement.detectMemoryLeaks('Clean Function', cleanFunction, 50);
            // The leaky function should show memory growth
            expect(leakResult.memoryGrowth).toBeGreaterThan(cleanResult.memoryGrowth);
        });
    });
    describe('🧪 Test Data Factory Examples', () => {
        it('should generate realistic test data', () => {
            // Generate consistent test data with seed
            testDataFactory.resetSeed(12345);
            const users = testDataFactory.createUsers(5);
            const projects = Array.from({ length: 3 }, () => testDataFactory.createProject());
            const swarms = Array.from({ length: 2 }, () => testDataFactory.createSwarm());
            // Verify data structure
            expect(users).toHaveLength(5);
            users.forEach(user => {
                expect(user).toHaveProperty('id');
                expect(user).toHaveProperty('name');
                expect(user).toHaveProperty('email');
                expect(user.email).toMatch(/@/);
            });
            expect(projects).toHaveLength(3);
            projects.forEach(project => {
                expect(project).toHaveProperty('name');
                expect(project).toHaveProperty('type');
                expect(['typescript', 'javascript', 'python', 'rust']).toContain(project.type);
            });
            expect(swarms).toHaveLength(2);
            swarms.forEach(swarm => {
                expect(swarm).toHaveProperty('topology');
                expect(swarm).toHaveProperty('agents');
                expect(swarm.agents.length).toBeGreaterThan(0);
            });
            testLogger.logStateChange('TestDataFactory', { users: 0, projects: 0, swarms: 0 }, { users: users.length, projects: projects.length, swarms: swarms.length }, 'data_generation');
        });
        it('should create neural network training data', () => {
            const trainingData = testDataFactory.createNeuralTrainingData(100);
            expect(trainingData).toHaveLength(100);
            trainingData.forEach(sample => {
                expect(sample).toHaveProperty('input');
                expect(sample).toHaveProperty('output');
                expect(sample.input).toHaveLength(3);
                expect(sample.output).toHaveLength(2);
                // Verify input range [-1, 1]
                sample.input.forEach(value => {
                    expect(value).toBeGreaterThanOrEqual(-1);
                    expect(value).toBeLessThanOrEqual(1);
                });
                // Verify output range [0, 1]
                sample.output.forEach(value => {
                    expect(value).toBeGreaterThanOrEqual(0);
                    expect(value).toBeLessThanOrEqual(1);
                });
            });
        });
    });
    describe('🔧 Integration Test Setup Examples', () => {
        it('should setup complete test environment', async () => {
            const testSetup = new IntegrationTestSetup({
                environment: {
                    database: 'memory',
                    filesystem: 'temp',
                    network: 'mock'
                },
                timeout: 10000
            });
            try {
                const { database, filesystem, network } = await testSetup.setup();
                // Test database operations
                await database.setup();
                await database.seed([
                    { id: 1, name: 'Test User 1' },
                    { id: 2, name: 'Test User 2' }
                ]);
                const connection = database.getConnection();
                expect(connection).toBeDefined();
                // Test filesystem operations
                const tempDir = await filesystem.createTempDir('integration-test');
                await filesystem.createFile(`${tempDir}/test.txt`, 'Hello World');
                const exists = await filesystem.fileExists(`${tempDir}/test.txt`);
                expect(exists).toBe(true);
                const content = await filesystem.readFile(`${tempDir}/test.txt`);
                expect(content).toBe('Hello World');
                // Test network operations
                const port = await network.startMockServer();
                expect(port).toBeGreaterThan(0);
                network.mockRequest('GET', '/api/health', {
                    status: 200,
                    headers: { 'Content-Type': 'application/json' },
                    body: { status: 'healthy' }
                });
                const client = network.createHttpClient();
                const response = await client.get('/api/health');
                expect(response.status).toBe(200);
                expect(response.body).toEqual({ status: 'healthy' });
                testLogger.logStateChange('IntegrationTest', { environment: 'none' }, { database: 'ready', filesystem: 'ready', network: 'ready' }, 'environment_setup');
            }
            finally {
                await testSetup.cleanup();
            }
        });
    });
    describe('✅ Advanced Assertion Examples', () => {
        it('should use custom assertions for specialized testing', () => {
            // Performance assertions
            const metrics = {
                executionTime: 150,
                memoryUsage: { heap: 1024 * 1024, external: 512 * 1024, total: 1536 * 1024 },
                throughput: 1000
            };
            assertionHelpers.toMeetPerformanceThreshold(metrics, {
                executionTime: 200,
                memoryUsage: { heap: 2 * 1024 * 1024 },
                throughput: 500
            });
            // Approximate equality
            assertionHelpers.toBeApproximately(Math.PI, 3.14159, 5);
            // Array assertions
            assertionHelpers.toContainElementsInAnyOrder([1, 3, 2], [2, 1, 3]);
            // Mathematical properties
            const increasingValues = [1, 2, 3, 4, 5];
            assertionHelpers.toSatisfyMathematicalProperty(increasingValues, 'monotonic-increasing');
            testLogger.logAssertion('Custom assertions', true, 'specialized checks', 'passed');
        });
        it('should handle async assertions with timeouts', async () => {
            let counter = 0;
            const eventuallyTrue = () => {
                counter++;
                return counter >= 3;
            };
            // This should eventually become true
            await assertionHelpers.toEventuallyBeTrue(eventuallyTrue, {
                timeout: 1000,
                interval: 50
            });
            expect(counter).toBeGreaterThanOrEqual(3);
        });
    });
    describe('📝 Test Logger Examples', () => {
        it('should provide structured logging for test analysis', () => {
            const componentLogger = testLogger.createChild('UserService');
            // Log different types of events
            componentLogger.info('Starting user creation process');
            componentLogger.logInteraction('UserService', 'validateInput', ['user@example.com']);
            componentLogger.logStateChange('UserValidator', { isValid: false }, { isValid: true }, 'email_validation');
            componentLogger.logPerformance('Database Insert', 25);
            componentLogger.logAssertion('User created successfully', true);
            // Verify logs were captured
            const logs = componentLogger.getLogs();
            expect(logs.length).toBeGreaterThan(0);
            const performanceLogs = componentLogger.getLogsByCategory('performance');
            expect(performanceLogs).toHaveLength(1);
            expect(performanceLogs[0].message).toContain('Database Insert');
            const interactionLogs = componentLogger.getLogsByCategory('interaction');
            expect(interactionLogs).toHaveLength(1);
        });
    });
});
/**
 * Key Takeaways from Examples:
 *
 * 1. London School TDD:
 *    - Focus on interaction testing
 *    - Heavy use of mocks to isolate units
 *    - Verify HOW objects collaborate
 *    - Test behavior through mock expectations
 *
 * 2. Classical School TDD:
 *    - Focus on state and output testing
 *    - Minimal mocks, prefer real objects
 *    - Verify WHAT the system produces
 *    - Test mathematical and algorithmic correctness
 *
 * 3. Performance Testing:
 *    - Measure execution time and memory usage
 *    - Compare algorithm efficiency
 *    - Detect memory leaks and performance regressions
 *    - Set performance thresholds and assertions
 *
 * 4. Integration Testing:
 *    - Test complete system interactions
 *    - Use realistic data and environments
 *    - Verify end-to-end workflows
 *    - Clean up resources properly
 *
 * 5. Test Data Management:
 *    - Generate reproducible test data
 *    - Create realistic domain objects
 *    - Support various data patterns and edge cases
 *    - Maintain data consistency across tests
 */ 
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvbWh1Z28vY29kZS9jbGF1ZGUtY29kZS1mbG93L3NyYy9fX3Rlc3RzX18vaGVscGVycy9leGFtcGxlLXVzYWdlLnRlc3QudHMiLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0dBS0c7QUFFSCxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFbEYsMEJBQTBCO0FBQzFCLE9BQU8sRUFLTCxvQkFBb0IsRUFFcEIsaUJBQWlCLEVBRWpCLGVBQWUsRUFDZixnQkFBZ0IsRUFDaEIsc0JBQXNCLEVBRXRCLGdCQUFnQixFQUNqQixNQUFNLFlBQVksQ0FBQztBQUVwQixRQUFRLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO0lBQ3JELElBQUksVUFBc0IsQ0FBQztJQUUzQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsVUFBVSxHQUFHLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ2hELENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLFVBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUN6QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywrQkFBK0IsRUFBRSxHQUFHLEVBQUU7UUFDN0MsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtZQUNsQyxFQUFFLENBQUMsMkRBQTJELEVBQUUsR0FBRyxFQUFFO2dCQUNuRSxvQ0FBb0M7Z0JBQ3BDLE1BQU0sV0FBVyxHQUFHLGlCQUFpQixDQUFDO29CQUNwQyxpQkFBaUIsRUFBRSxJQUFJO29CQUN2QixZQUFZLEVBQUUsSUFBSTtpQkFDbkIsQ0FBQyxDQUFDO2dCQUVILDJCQUEyQjtnQkFDM0IsTUFBTSxLQUFLLEdBQUcsV0FBVyxDQUFDLGlCQUFpQixFQUFFLENBQUM7Z0JBRTlDLHVCQUF1QjtnQkFDdkIsTUFBTSxXQUFXO29CQUVMO29CQUNBO29CQUNBO29CQUhWLFlBQ1UsUUFBYSxF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LENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV2QyxNQUFNLGVBQWUsR0FBRyxlQUFlLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDekUsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBRWhFLE1BQU0sZUFBZSxHQUFHLGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUN6RSxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQztBQUVIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWdDRyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9taHVnby9jb2RlL2NsYXVkZS1jb2RlLWZsb3cvc3JjL19fdGVzdHNfXy9oZWxwZXJzL2V4YW1wbGUtdXNhZ2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEV4YW1wbGUgVXNhZ2Ugb2YgVGVzdCBIZWxwZXIgVXRpbGl0aWVzXG4gKiBcbiAqIERlbW9uc3RyYXRlcyBob3cgdG8gdXNlIHRoZSBjb21wcmVoZW5zaXZlIHRlc3QgaGVscGVycyBmb3IgYm90aFxuICogTG9uZG9uIFNjaG9vbCAobW9jay1oZWF2eSkgYW5kIENsYXNzaWNhbCBTY2hvb2wgKHJlYWwgb2JqZWN0KSBUREQgYXBwcm9hY2hlc1xuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBhZnRlckVhY2gsIGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcblxuLy8gSW1wb3J0IGFsbCB0ZXN0IGhlbHBlcnNcbmltcG9ydCB7XG4gIE1vY2tCdWlsZGVyLFxuICBUZXN0RGF0YUZhY3RvcnksXG4gIEFzc2VydGlvbkhlbHBlcnMsXG4gIFBlcmZvcm1hbmNlTWVhc3VyZW1lbnQsXG4gIEludGVncmF0aW9uVGVzdFNldHVwLFxuICBUZXN0TG9nZ2VyLFxuICBjcmVhdGVMb25kb25Nb2NrcyxcbiAgY3JlYXRlQ2xhc3NpY2FsTW9ja3MsXG4gIHRlc3REYXRhRmFjdG9yeSxcbiAgYXNzZXJ0aW9uSGVscGVycyxcbiAgcGVyZm9ybWFuY2VNZWFzdXJlbWVudCxcbiAgaW50ZWdyYXRpb25UZXN0U2V0dXAsXG4gIGNyZWF0ZVRlc3RMb2dnZXJcbn0gZnJvbSAnLi9pbmRleC5qcyc7XG5cbmRlc2NyaWJlKCdUZXN0IEhlbHBlciBVdGlsaXRpZXMgLSBFeGFtcGxlIFVzYWdlJywgKCkgPT4ge1xuICBsZXQgdGVzdExvZ2dlcjogVGVzdExvZ2dlcjtcbiAgXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHRlc3RMb2dnZXIgPSBjcmVhdGVUZXN0TG9nZ2VyKCdleGFtcGxlLXRlc3QnKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICB0ZXN0TG9nZ2VyLmNsZWFyTG9ncygpO1xuICB9KTtcblxuICBkZXNjcmliZSgn8J+OrSBMb25kb24gU2Nob29sIFRERCBFeGFtcGxlcycsICgpID0+IHtcbiAgICBkZXNjcmliZSgnTW9jayBCdWlsZGVyIFVzYWdlJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgc29waGlzdGljYXRlZCBtb2NrcyBmb3IgaW50ZXJhY3Rpb24gdGVzdGluZycsICgpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRlIExvbmRvbiBTY2hvb2wgbW9jayBidWlsZGVyXG4gICAgICAgIGNvbnN0IG1vY2tCdWlsZGVyID0gY3JlYXRlTG9uZG9uTW9ja3Moe1xuICAgICAgICAgIHRyYWNrSW50ZXJhY3Rpb25zOiB0cnVlLFxuICAgICAgICAgIGF1dG9HZW5lcmF0ZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgbW9jayBkZXBlbmRlbmNpZXNcbiAgICAgICAgY29uc3QgbW9ja3MgPSBtb2NrQnVpbGRlci5jcmVhdGVDb21tb25Nb2NrcygpO1xuICAgICAgICBcbiAgICAgICAgLy8gTW9jayBhIHNlcnZpY2UgY2xhc3NcbiAgICAgICAgY2xhc3MgVXNlclNlcnZpY2Uge1xuICAgICAgICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICAgICAgcHJpdmF0ZSBkYXRhYmFzZTogYW55LFxuICAgICAgICAgICAgcHJpdmF0ZSBlbWFpbFNlcnZpY2U6IGFueSxcbiAgICAgICAgICAgIHByaXZhdGUgbG9nZ2VyOiBhbnlcbiAgICAgICAgICApIHt9XG5cbiAgICAgICAgICBhc3luYyBjcmVhdGVVc2VyKHVzZXJEYXRhOiBhbnkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oJ0NyZWF0aW5nIHVzZXInLCB1c2VyRGF0YSk7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5kYXRhYmFzZS5zYXZlKCd1c2VycycsIHVzZXJEYXRhKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZW1haWxTZXJ2aWNlLnNlbmRXZWxjb21lRW1haWwodXNlci5lbWFpbCk7XG4gICAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtb2NrVXNlclNlcnZpY2UgPSBtb2NrQnVpbGRlci5jcmVhdGUoVXNlclNlcnZpY2UpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0dXAgbW9jayBleHBlY3RhdGlvbnMgKExvbmRvbiBTY2hvb2wgc3R5bGUpXG4gICAgICAgIG1vY2tzLmRhdGFiYXNlLnNhdmUubW9ja1Jlc29sdmVkVmFsdWUoeyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9KTtcbiAgICAgICAgbW9ja3MuZW1haWxTZXJ2aWNlLnNlbmRXZWxjb21lRW1haWwubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICB0ZXN0TG9nZ2VyLmxvZ0ludGVyYWN0aW9uKCdNb2NrQnVpbGRlcicsICdjcmVhdGUnLCBbVXNlclNlcnZpY2VdKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmeSBtb2NrIGNyZWF0aW9uXG4gICAgICAgIGV4cGVjdChtb2NrVXNlclNlcnZpY2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgbW9ja1VzZXJTZXJ2aWNlLmNyZWF0ZVVzZXIpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB2ZXJpZnkgaW50ZXJhY3Rpb24gc2VxdWVuY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBtb2NrRGF0YWJhc2UgPSB7XG4gICAgICAgICAgY29ubmVjdDogamVzdC5mbigpLFxuICAgICAgICAgIHF1ZXJ5OiBqZXN0LmZuKCksXG4gICAgICAgICAgZGlzY29ubmVjdDogamVzdC5mbigpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU2ltdWxhdGUgYSBzZXJ2aWNlIHRoYXQgdXNlcyB0aGUgZGF0YWJhc2VcbiAgICAgICAgY2xhc3MgRGF0YVNlcnZpY2Uge1xuICAgICAgICAgIGFzeW5jIGdldERhdGEoaWQ6IHN0cmluZykge1xuICAgICAgICAgICAgYXdhaXQgbW9ja0RhdGFiYXNlLmNvbm5lY3QoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vY2tEYXRhYmFzZS5xdWVyeSgnU0VMRUNUICogRlJPTSBkYXRhIFdIRVJFIGlkID0gPycsIFtpZF0pO1xuICAgICAgICAgICAgYXdhaXQgbW9ja0RhdGFiYXNlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBEYXRhU2VydmljZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0dXAgbW9ja3NcbiAgICAgICAgbW9ja0RhdGFiYXNlLmNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgICAgICAgbW9ja0RhdGFiYXNlLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKFt7IGlkOiAnMTIzJywgbmFtZTogJ3Rlc3QnIH1dKTtcbiAgICAgICAgbW9ja0RhdGFiYXNlLmRpc2Nvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgICAvLyBFeGVjdXRlXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0RGF0YSgnMTIzJyk7XG5cbiAgICAgICAgLy8gTG9uZG9uIFNjaG9vbDogVmVyaWZ5IGludGVyYWN0aW9ucyAoSE9XIGl0IHdvcmtzKVxuICAgICAgICBleHBlY3QobW9ja0RhdGFiYXNlLmNvbm5lY3QpLnRvSGF2ZUJlZW5DYWxsZWRCZWZvcmUobW9ja0RhdGFiYXNlLnF1ZXJ5KTtcbiAgICAgICAgZXhwZWN0KG1vY2tEYXRhYmFzZS5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1NFTEVDVCAqIEZST00gZGF0YSBXSEVSRSBpZCA9ID8nLCBbJzEyMyddKTtcbiAgICAgICAgZXhwZWN0KG1vY2tEYXRhYmFzZS5kaXNjb25uZWN0KS50b0hhdmVCZWVuQ2FsbGVkQWZ0ZXIobW9ja0RhdGFiYXNlLnF1ZXJ5KTtcblxuICAgICAgICB0ZXN0TG9nZ2VyLmxvZ0ludGVyYWN0aW9uKCdEYXRhU2VydmljZScsICdnZXREYXRhJywgWycxMjMnXSwgcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0FkdmFuY2VkIE1vY2sgUGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV4IGRlcGVuZGVuY3kgaW5qZWN0aW9uIHNjZW5hcmlvcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgbW9ja0J1aWxkZXIgPSBjcmVhdGVMb25kb25Nb2NrcygpO1xuICAgICAgICBcbiAgICAgICAgLy8gTW9jayBjb21wbGV4IGRlcGVuZGVuY3kgZ3JhcGhcbiAgICAgICAgaW50ZXJmYWNlIEVtYWlsUHJvdmlkZXIge1xuICAgICAgICAgIHNlbmRFbWFpbCh0bzogc3RyaW5nLCBzdWJqZWN0OiBzdHJpbmcsIGJvZHk6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGludGVyZmFjZSBVc2VyUmVwb3NpdG9yeSB7XG4gICAgICAgICAgZmluZEJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8YW55PjtcbiAgICAgICAgICBzYXZlKHVzZXI6IGFueSk6IFByb21pc2U8YW55PjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY2xhc3MgRW1haWxTZXJ2aWNlIHtcbiAgICAgICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHByb3ZpZGVyOiBFbWFpbFByb3ZpZGVyKSB7fVxuICAgICAgICAgIFxuICAgICAgICAgIGFzeW5jIHNlbmRXZWxjb21lKGVtYWlsOiBzdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyLnNlbmRFbWFpbChlbWFpbCwgJ1dlbGNvbWUhJywgJ1dlbGNvbWUgdG8gb3VyIHNlcnZpY2UnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNsYXNzIFVzZXJTZXJ2aWNlIHtcbiAgICAgICAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgICAgIHByaXZhdGUgdXNlclJlcG86IFVzZXJSZXBvc2l0b3J5LFxuICAgICAgICAgICAgcHJpdmF0ZSBlbWFpbFNlcnZpY2U6IEVtYWlsU2VydmljZVxuICAgICAgICAgICkge31cbiAgICAgICAgICBcbiAgICAgICAgICBhc3luYyByZWdpc3RlclVzZXIoZW1haWw6IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHRoaXMudXNlclJlcG8uZmluZEJ5RW1haWwoZW1haWwpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgZXhpc3RzJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLnVzZXJSZXBvLnNhdmUoeyBlbWFpbCwgbmFtZSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZW1haWxTZXJ2aWNlLnNlbmRXZWxjb21lKGVtYWlsKTtcbiAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBtb2Nrc1xuICAgICAgICBjb25zdCBtb2NrRW1haWxQcm92aWRlciA9IG1vY2tCdWlsZGVyLmNyZWF0ZVBhcnRpYWw8RW1haWxQcm92aWRlcj4oe1xuICAgICAgICAgIHNlbmRFbWFpbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbW9ja1VzZXJSZXBvID0gbW9ja0J1aWxkZXIuY3JlYXRlUGFydGlhbDxVc2VyUmVwb3NpdG9yeT4oe1xuICAgICAgICAgIGZpbmRCeUVtYWlsOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobnVsbCksXG4gICAgICAgICAgc2F2ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgaWQ6IDEsIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsIG5hbWU6ICdUZXN0JyB9KVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBlbWFpbFNlcnZpY2UgPSBuZXcgRW1haWxTZXJ2aWNlKG1vY2tFbWFpbFByb3ZpZGVyKTtcbiAgICAgICAgY29uc3QgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UobW9ja1VzZXJSZXBvLCBlbWFpbFNlcnZpY2UpO1xuXG4gICAgICAgIC8vIFRlc3QgdGhlIGludGVyYWN0aW9uXG4gICAgICAgIGV4cGVjdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLnJlZ2lzdGVyVXNlcigndGVzdEBleGFtcGxlLmNvbScsICdUZXN0IFVzZXInKTtcbiAgICAgICAgICBleHBlY3QodXNlcikudG9FcXVhbCh7IGlkOiAxLCBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLCBuYW1lOiAnVGVzdCcgfSk7XG4gICAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ/Cfj5vvuI8gQ2xhc3NpY2FsIFNjaG9vbCBUREQgRXhhbXBsZXMnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ1JlYWwgT2JqZWN0IFRlc3RpbmcnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHRlc3QgYWN0dWFsIGltcGxlbWVudGF0aW9ucyB3aXRob3V0IG1vY2tzJywgKCkgPT4ge1xuICAgICAgICAvLyBDbGFzc2ljYWwgVEREOiBUZXN0IHJlYWwgYmVoYXZpb3IsIG5vdCBtb2Nrc1xuICAgICAgICBjbGFzcyBDYWxjdWxhdG9yIHtcbiAgICAgICAgICBhZGQoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICAgICAgcmV0dXJuIGEgKyBiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBkaXZpZGUoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICAgICAgaWYgKGIgPT09IDApIHRocm93IG5ldyBFcnJvcignRGl2aXNpb24gYnkgemVybycpO1xuICAgICAgICAgICAgcmV0dXJuIGEgLyBiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBmYWN0b3JpYWwobjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgICAgIGlmIChuIDwgMCkgdGhyb3cgbmV3IEVycm9yKCdGYWN0b3JpYWwgb2YgbmVnYXRpdmUgbnVtYmVyJyk7XG4gICAgICAgICAgICBpZiAobiA8PSAxKSByZXR1cm4gMTtcbiAgICAgICAgICAgIHJldHVybiBuICogdGhpcy5mYWN0b3JpYWwobiAtIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbGN1bGF0b3IgPSBuZXcgQ2FsY3VsYXRvcigpO1xuXG4gICAgICAgIC8vIFRlc3QgYWN0dWFsIG1hdGhlbWF0aWNhbCBwcm9wZXJ0aWVzXG4gICAgICAgIGV4cGVjdChjYWxjdWxhdG9yLmFkZCgyLCAzKSkudG9CZSg1KTtcbiAgICAgICAgZXhwZWN0KGNhbGN1bGF0b3IuYWRkKC0xLCAxKSkudG9CZSgwKTtcbiAgICAgICAgZXhwZWN0KGNhbGN1bGF0b3IuZGl2aWRlKDEwLCAyKSkudG9CZSg1KTtcbiAgICAgICAgZXhwZWN0KGNhbGN1bGF0b3IuZmFjdG9yaWFsKDUpKS50b0JlKDEyMCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUZXN0IGVycm9yIGNvbmRpdGlvbnNcbiAgICAgICAgZXhwZWN0KCgpID0+IGNhbGN1bGF0b3IuZGl2aWRlKDUsIDApKS50b1Rocm93KCdEaXZpc2lvbiBieSB6ZXJvJyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBjYWxjdWxhdG9yLmZhY3RvcmlhbCgtMSkpLnRvVGhyb3coJ0ZhY3RvcmlhbCBvZiBuZWdhdGl2ZSBudW1iZXInKTtcblxuICAgICAgICB0ZXN0TG9nZ2VyLmxvZ1N0YXRlQ2hhbmdlKCdDYWxjdWxhdG9yJywgeyBvcGVyYXRpb246ICdub25lJyB9LCB7IHJlc3VsdDogJ3Rlc3RlZCcgfSwgJ21hdGhlbWF0aWNhbF9vcGVyYXRpb25zJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0ZXN0IGFsZ29yaXRobXMgYW5kIGRhdGEgc3RydWN0dXJlcycsICgpID0+IHtcbiAgICAgICAgLy8gQ2xhc3NpY2FsIGFwcHJvYWNoOiBUZXN0IGFjdHVhbCBhbGdvcml0aG0gYmVoYXZpb3JcbiAgICAgICAgY2xhc3MgU29ydGluZ0FsZ29yaXRobXMge1xuICAgICAgICAgIGJ1YmJsZVNvcnQoYXJyOiBudW1iZXJbXSk6IG51bWJlcltdIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFsuLi5hcnJdO1xuICAgICAgICAgICAgY29uc3QgbiA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbiAtIDE7IGkrKykge1xuICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG4gLSBpIC0gMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtqXSA+IHJlc3VsdFtqICsgMV0pIHtcbiAgICAgICAgICAgICAgICAgIFtyZXN1bHRbal0sIHJlc3VsdFtqICsgMV1dID0gW3Jlc3VsdFtqICsgMV0sIHJlc3VsdFtqXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHF1aWNrU29ydChhcnI6IG51bWJlcltdKTogbnVtYmVyW10ge1xuICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPD0gMSkgcmV0dXJuIGFycjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcGl2b3QgPSBhcnJbTWF0aC5mbG9vcihhcnIubGVuZ3RoIC8gMildO1xuICAgICAgICAgICAgY29uc3QgbGVmdCA9IGFyci5maWx0ZXIoeCA9PiB4IDwgcGl2b3QpO1xuICAgICAgICAgICAgY29uc3QgbWlkZGxlID0gYXJyLmZpbHRlcih4ID0+IHggPT09IHBpdm90KTtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gYXJyLmZpbHRlcih4ID0+IHggPiBwaXZvdCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBbLi4udGhpcy5xdWlja1NvcnQobGVmdCksIC4uLm1pZGRsZSwgLi4udGhpcy5xdWlja1NvcnQocmlnaHQpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzb3J0ZXIgPSBuZXcgU29ydGluZ0FsZ29yaXRobXMoKTtcbiAgICAgICAgY29uc3QgdGVzdERhdGEgPSBbNjQsIDM0LCAyNSwgMTIsIDIyLCAxMSwgOTBdO1xuICAgICAgICBjb25zdCBleHBlY3RlZCA9IFsxMSwgMTIsIDIyLCAyNSwgMzQsIDY0LCA5MF07XG5cbiAgICAgICAgLy8gVGVzdCBib3RoIGFsZ29yaXRobXMgcHJvZHVjZSBjb3JyZWN0IHJlc3VsdHNcbiAgICAgICAgZXhwZWN0KHNvcnRlci5idWJibGVTb3J0KHRlc3REYXRhKSkudG9FcXVhbChleHBlY3RlZCk7XG4gICAgICAgIGV4cGVjdChzb3J0ZXIucXVpY2tTb3J0KHRlc3REYXRhKSkudG9FcXVhbChleHBlY3RlZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUZXN0IGVkZ2UgY2FzZXNcbiAgICAgICAgZXhwZWN0KHNvcnRlci5idWJibGVTb3J0KFtdKSkudG9FcXVhbChbXSk7XG4gICAgICAgIGV4cGVjdChzb3J0ZXIucXVpY2tTb3J0KFsxXSkpLnRvRXF1YWwoWzFdKTtcbiAgICAgICAgZXhwZWN0KHNvcnRlci5idWJibGVTb3J0KFszLCAxLCAyXSkpLnRvRXF1YWwoWzEsIDIsIDNdKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn8J+TiiBQZXJmb3JtYW5jZSBUZXN0aW5nIEV4YW1wbGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWVhc3VyZSBhbmQgY29tcGFyZSBhbGdvcml0aG0gcGVyZm9ybWFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUZXN0IGRhdGEgZ2VuZXJhdGlvblxuICAgICAgY29uc3QgdGVzdERhdGEgPSB0ZXN0RGF0YUZhY3RvcnkuY3JlYXRlUGVyZm9ybWFuY2VEYXRhKDEwMDApO1xuICAgICAgXG4gICAgICBmdW5jdGlvbiBsaW5lYXJTZWFyY2goYXJyOiBhbnlbXSwgdGFyZ2V0OiBhbnkpOiBudW1iZXIge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChhcnJbaV0uaWQgPT09IHRhcmdldCkgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgXG4gICAgICBmdW5jdGlvbiBiaW5hcnlTZWFyY2goYXJyOiBhbnlbXSwgdGFyZ2V0OiBhbnkpOiBudW1iZXIge1xuICAgICAgICBsZXQgbGVmdCA9IDA7XG4gICAgICAgIGxldCByaWdodCA9IGFyci5sZW5ndGggLSAxO1xuICAgICAgICBcbiAgICAgICAgd2hpbGUgKGxlZnQgPD0gcmlnaHQpIHtcbiAgICAgICAgICBjb25zdCBtaWQgPSBNYXRoLmZsb29yKChsZWZ0ICsgcmlnaHQpIC8gMik7XG4gICAgICAgICAgaWYgKGFyclttaWRdLmlkID09PSB0YXJnZXQpIHJldHVybiBtaWQ7XG4gICAgICAgICAgaWYgKGFyclttaWRdLmlkIDwgdGFyZ2V0KSBsZWZ0ID0gbWlkICsgMTtcbiAgICAgICAgICBlbHNlIHJpZ2h0ID0gbWlkIC0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG5cbiAgICAgIC8vIFNvcnQgZGF0YSBmb3IgYmluYXJ5IHNlYXJjaFxuICAgICAgY29uc3Qgc29ydGVkRGF0YSA9IHRlc3REYXRhLmRhdGEuc29ydCgoYSwgYikgPT4gYS5pZCAtIGIuaWQpO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gdGVzdERhdGEuZGF0YVs1MDBdLmlkO1xuXG4gICAgICAvLyBCZW5jaG1hcmsgY29tcGFyaXNvblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHBlcmZvcm1hbmNlTWVhc3VyZW1lbnQuYmVuY2htYXJrQ29tcGFyaXNvbihbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnTGluZWFyIFNlYXJjaCcsXG4gICAgICAgICAgZm46ICgpID0+IGxpbmVhclNlYXJjaCh0ZXN0RGF0YS5kYXRhLCB0YXJnZXQpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnQmluYXJ5IFNlYXJjaCcsXG4gICAgICAgICAgZm46ICgpID0+IGJpbmFyeVNlYXJjaChzb3J0ZWREYXRhLCB0YXJnZXQpXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICAvLyBQZXJmb3JtYW5jZSBhc3NlcnRpb25zXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdHNbMF0ucmFua2luZykudG9CZUxlc3NUaGFuT3JFcXVhbCgyKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzWzFdLnJhbmtpbmcpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMik7XG4gICAgICBcbiAgICAgIC8vIEJpbmFyeSBzZWFyY2ggc2hvdWxkIGJlIGZhc3RlciAobG93ZXIgcmFua2luZyA9IGJldHRlciBwZXJmb3JtYW5jZSlcbiAgICAgIGNvbnN0IGJpbmFyeVJlc3VsdCA9IHJlc3VsdHMuZmluZChyID0+IHIubmFtZSA9PT0gJ0JpbmFyeSBTZWFyY2gnKTtcbiAgICAgIGNvbnN0IGxpbmVhclJlc3VsdCA9IHJlc3VsdHMuZmluZChyID0+IHIubmFtZSA9PT0gJ0xpbmVhciBTZWFyY2gnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGJpbmFyeVJlc3VsdCEucmFua2luZykudG9CZUxlc3NUaGFuKGxpbmVhclJlc3VsdCEucmFua2luZyk7XG5cbiAgICAgIHRlc3RMb2dnZXIubG9nUGVyZm9ybWFuY2UoJ0FsZ29yaXRobSBDb21wYXJpc29uJywgXG4gICAgICAgIGJpbmFyeVJlc3VsdCEubWV0cmljcy5leGVjdXRpb25UaW1lLCBcbiAgICAgICAgeyBhbGdvcml0aG06ICdiaW5hcnktc2VhcmNoJyB9XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgbWVtb3J5IGxlYWtzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhdGUgcG90ZW50aWFsIG1lbW9yeSBsZWFrXG4gICAgICBjb25zdCBsZWFreUZ1bmN0aW9uID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBsYXJnZUFycmF5OiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykge1xuICAgICAgICAgIGxhcmdlQXJyYXkucHVzaChNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbnRlbnRpb25hbGx5IGRvbid0IGNsZWFuIHVwXG4gICAgICAgIHJldHVybiBsYXJnZUFycmF5Lmxlbmd0aDtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNsZWFuRnVuY3Rpb24gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNtYWxsQXJyYXkgPSBbMSwgMiwgM107XG4gICAgICAgIHJldHVybiBzbWFsbEFycmF5Lmxlbmd0aDtcbiAgICAgIH07XG5cbiAgICAgIC8vIFRlc3QgZm9yIG1lbW9yeSBsZWFrc1xuICAgICAgY29uc3QgbGVha1Jlc3VsdCA9IGF3YWl0IHBlcmZvcm1hbmNlTWVhc3VyZW1lbnQuZGV0ZWN0TWVtb3J5TGVha3MoXG4gICAgICAgICdMZWFreSBGdW5jdGlvbicsIFxuICAgICAgICBsZWFreUZ1bmN0aW9uLCBcbiAgICAgICAgNTBcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNsZWFuUmVzdWx0ID0gYXdhaXQgcGVyZm9ybWFuY2VNZWFzdXJlbWVudC5kZXRlY3RNZW1vcnlMZWFrcyhcbiAgICAgICAgJ0NsZWFuIEZ1bmN0aW9uJywgXG4gICAgICAgIGNsZWFuRnVuY3Rpb24sIFxuICAgICAgICA1MFxuICAgICAgKTtcblxuICAgICAgLy8gVGhlIGxlYWt5IGZ1bmN0aW9uIHNob3VsZCBzaG93IG1lbW9yeSBncm93dGhcbiAgICAgIGV4cGVjdChsZWFrUmVzdWx0Lm1lbW9yeUdyb3d0aCkudG9CZUdyZWF0ZXJUaGFuKGNsZWFuUmVzdWx0Lm1lbW9yeUdyb3d0aCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfwn6eqIFRlc3QgRGF0YSBGYWN0b3J5IEV4YW1wbGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgcmVhbGlzdGljIHRlc3QgZGF0YScsICgpID0+IHtcbiAgICAgIC8vIEdlbmVyYXRlIGNvbnNpc3RlbnQgdGVzdCBkYXRhIHdpdGggc2VlZFxuICAgICAgdGVzdERhdGFGYWN0b3J5LnJlc2V0U2VlZCgxMjM0NSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHVzZXJzID0gdGVzdERhdGFGYWN0b3J5LmNyZWF0ZVVzZXJzKDUpO1xuICAgICAgY29uc3QgcHJvamVjdHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAzIH0sICgpID0+IHRlc3REYXRhRmFjdG9yeS5jcmVhdGVQcm9qZWN0KCkpO1xuICAgICAgY29uc3Qgc3dhcm1zID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMiB9LCAoKSA9PiB0ZXN0RGF0YUZhY3RvcnkuY3JlYXRlU3dhcm0oKSk7XG5cbiAgICAgIC8vIFZlcmlmeSBkYXRhIHN0cnVjdHVyZVxuICAgICAgZXhwZWN0KHVzZXJzKS50b0hhdmVMZW5ndGgoNSk7XG4gICAgICB1c2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xuICAgICAgICBleHBlY3QodXNlcikudG9IYXZlUHJvcGVydHkoJ2lkJyk7XG4gICAgICAgIGV4cGVjdCh1c2VyKS50b0hhdmVQcm9wZXJ0eSgnbmFtZScpO1xuICAgICAgICBleHBlY3QodXNlcikudG9IYXZlUHJvcGVydHkoJ2VtYWlsJyk7XG4gICAgICAgIGV4cGVjdCh1c2VyLmVtYWlsKS50b01hdGNoKC9ALyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHByb2plY3RzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBwcm9qZWN0cy5mb3JFYWNoKHByb2plY3QgPT4ge1xuICAgICAgICBleHBlY3QocHJvamVjdCkudG9IYXZlUHJvcGVydHkoJ25hbWUnKTtcbiAgICAgICAgZXhwZWN0KHByb2plY3QpLnRvSGF2ZVByb3BlcnR5KCd0eXBlJyk7XG4gICAgICAgIGV4cGVjdChbJ3R5cGVzY3JpcHQnLCAnamF2YXNjcmlwdCcsICdweXRob24nLCAncnVzdCddKS50b0NvbnRhaW4ocHJvamVjdC50eXBlKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc3dhcm1zKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBzd2FybXMuZm9yRWFjaChzd2FybSA9PiB7XG4gICAgICAgIGV4cGVjdChzd2FybSkudG9IYXZlUHJvcGVydHkoJ3RvcG9sb2d5Jyk7XG4gICAgICAgIGV4cGVjdChzd2FybSkudG9IYXZlUHJvcGVydHkoJ2FnZW50cycpO1xuICAgICAgICBleHBlY3Qoc3dhcm0uYWdlbnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3RMb2dnZXIubG9nU3RhdGVDaGFuZ2UoJ1Rlc3REYXRhRmFjdG9yeScsIFxuICAgICAgICB7IHVzZXJzOiAwLCBwcm9qZWN0czogMCwgc3dhcm1zOiAwIH0sIFxuICAgICAgICB7IHVzZXJzOiB1c2Vycy5sZW5ndGgsIHByb2plY3RzOiBwcm9qZWN0cy5sZW5ndGgsIHN3YXJtczogc3dhcm1zLmxlbmd0aCB9LFxuICAgICAgICAnZGF0YV9nZW5lcmF0aW9uJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIG5ldXJhbCBuZXR3b3JrIHRyYWluaW5nIGRhdGEnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFpbmluZ0RhdGEgPSB0ZXN0RGF0YUZhY3RvcnkuY3JlYXRlTmV1cmFsVHJhaW5pbmdEYXRhKDEwMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdCh0cmFpbmluZ0RhdGEpLnRvSGF2ZUxlbmd0aCgxMDApO1xuICAgICAgdHJhaW5pbmdEYXRhLmZvckVhY2goc2FtcGxlID0+IHtcbiAgICAgICAgZXhwZWN0KHNhbXBsZSkudG9IYXZlUHJvcGVydHkoJ2lucHV0Jyk7XG4gICAgICAgIGV4cGVjdChzYW1wbGUpLnRvSGF2ZVByb3BlcnR5KCdvdXRwdXQnKTtcbiAgICAgICAgZXhwZWN0KHNhbXBsZS5pbnB1dCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgICBleHBlY3Qoc2FtcGxlLm91dHB1dCkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZ5IGlucHV0IHJhbmdlIFstMSwgMV1cbiAgICAgICAgc2FtcGxlLmlucHV0LmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgIGV4cGVjdCh2YWx1ZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgtMSk7XG4gICAgICAgICAgZXhwZWN0KHZhbHVlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmeSBvdXRwdXQgcmFuZ2UgWzAsIDFdXG4gICAgICAgIHNhbXBsZS5vdXRwdXQuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgZXhwZWN0KHZhbHVlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgICAgIGV4cGVjdCh2YWx1ZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ/CflKcgSW50ZWdyYXRpb24gVGVzdCBTZXR1cCBFeGFtcGxlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNldHVwIGNvbXBsZXRlIHRlc3QgZW52aXJvbm1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0U2V0dXAgPSBuZXcgSW50ZWdyYXRpb25UZXN0U2V0dXAoe1xuICAgICAgICBlbnZpcm9ubWVudDoge1xuICAgICAgICAgIGRhdGFiYXNlOiAnbWVtb3J5JyxcbiAgICAgICAgICBmaWxlc3lzdGVtOiAndGVtcCcsXG4gICAgICAgICAgbmV0d29yazogJ21vY2snXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVvdXQ6IDEwMDAwXG4gICAgICB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhYmFzZSwgZmlsZXN5c3RlbSwgbmV0d29yayB9ID0gYXdhaXQgdGVzdFNldHVwLnNldHVwKCk7XG5cbiAgICAgICAgLy8gVGVzdCBkYXRhYmFzZSBvcGVyYXRpb25zXG4gICAgICAgIGF3YWl0IGRhdGFiYXNlLnNldHVwKCk7XG4gICAgICAgIGF3YWl0IGRhdGFiYXNlLnNlZWQoW1xuICAgICAgICAgIHsgaWQ6IDEsIG5hbWU6ICdUZXN0IFVzZXIgMScgfSxcbiAgICAgICAgICB7IGlkOiAyLCBuYW1lOiAnVGVzdCBVc2VyIDInIH1cbiAgICAgICAgXSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gZGF0YWJhc2UuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgICBleHBlY3QoY29ubmVjdGlvbikudG9CZURlZmluZWQoKTtcblxuICAgICAgICAvLyBUZXN0IGZpbGVzeXN0ZW0gb3BlcmF0aW9uc1xuICAgICAgICBjb25zdCB0ZW1wRGlyID0gYXdhaXQgZmlsZXN5c3RlbS5jcmVhdGVUZW1wRGlyKCdpbnRlZ3JhdGlvbi10ZXN0Jyk7XG4gICAgICAgIGF3YWl0IGZpbGVzeXN0ZW0uY3JlYXRlRmlsZShgJHt0ZW1wRGlyfS90ZXN0LnR4dGAsICdIZWxsbyBXb3JsZCcpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgZmlsZXN5c3RlbS5maWxlRXhpc3RzKGAke3RlbXBEaXJ9L3Rlc3QudHh0YCk7XG4gICAgICAgIGV4cGVjdChleGlzdHMpLnRvQmUodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmlsZXN5c3RlbS5yZWFkRmlsZShgJHt0ZW1wRGlyfS90ZXN0LnR4dGApO1xuICAgICAgICBleHBlY3QoY29udGVudCkudG9CZSgnSGVsbG8gV29ybGQnKTtcblxuICAgICAgICAvLyBUZXN0IG5ldHdvcmsgb3BlcmF0aW9uc1xuICAgICAgICBjb25zdCBwb3J0ID0gYXdhaXQgbmV0d29yay5zdGFydE1vY2tTZXJ2ZXIoKTtcbiAgICAgICAgZXhwZWN0KHBvcnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgXG4gICAgICAgIG5ldHdvcmsubW9ja1JlcXVlc3QoJ0dFVCcsICcvYXBpL2hlYWx0aCcsIHtcbiAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiB7IHN0YXR1czogJ2hlYWx0aHknIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2xpZW50ID0gbmV0d29yay5jcmVhdGVIdHRwQ2xpZW50KCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmdldCgnL2FwaS9oZWFsdGgnKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7IHN0YXR1czogJ2hlYWx0aHknIH0pO1xuXG4gICAgICAgIHRlc3RMb2dnZXIubG9nU3RhdGVDaGFuZ2UoJ0ludGVncmF0aW9uVGVzdCcsIFxuICAgICAgICAgIHsgZW52aXJvbm1lbnQ6ICdub25lJyB9LCBcbiAgICAgICAgICB7IGRhdGFiYXNlOiAncmVhZHknLCBmaWxlc3lzdGVtOiAncmVhZHknLCBuZXR3b3JrOiAncmVhZHknIH0sXG4gICAgICAgICAgJ2Vudmlyb25tZW50X3NldHVwJ1xuICAgICAgICApO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgYXdhaXQgdGVzdFNldHVwLmNsZWFudXAoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+KchSBBZHZhbmNlZCBBc3NlcnRpb24gRXhhbXBsZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1c2UgY3VzdG9tIGFzc2VydGlvbnMgZm9yIHNwZWNpYWxpemVkIHRlc3RpbmcnLCAoKSA9PiB7XG4gICAgICAvLyBQZXJmb3JtYW5jZSBhc3NlcnRpb25zXG4gICAgICBjb25zdCBtZXRyaWNzID0ge1xuICAgICAgICBleGVjdXRpb25UaW1lOiAxNTAsXG4gICAgICAgIG1lbW9yeVVzYWdlOiB7IGhlYXA6IDEwMjQgKiAxMDI0LCBleHRlcm5hbDogNTEyICogMTAyNCwgdG90YWw6IDE1MzYgKiAxMDI0IH0sXG4gICAgICAgIHRocm91Z2hwdXQ6IDEwMDBcbiAgICAgIH07XG5cbiAgICAgIGFzc2VydGlvbkhlbHBlcnMudG9NZWV0UGVyZm9ybWFuY2VUaHJlc2hvbGQobWV0cmljcywge1xuICAgICAgICBleGVjdXRpb25UaW1lOiAyMDAsXG4gICAgICAgIG1lbW9yeVVzYWdlOiB7IGhlYXA6IDIgKiAxMDI0ICogMTAyNCB9LFxuICAgICAgICB0aHJvdWdocHV0OiA1MDBcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBcHByb3hpbWF0ZSBlcXVhbGl0eVxuICAgICAgYXNzZXJ0aW9uSGVscGVycy50b0JlQXBwcm94aW1hdGVseShNYXRoLlBJLCAzLjE0MTU5LCA1KTtcblxuICAgICAgLy8gQXJyYXkgYXNzZXJ0aW9uc1xuICAgICAgYXNzZXJ0aW9uSGVscGVycy50b0NvbnRhaW5FbGVtZW50c0luQW55T3JkZXIoWzEsIDMsIDJdLCBbMiwgMSwgM10pO1xuXG4gICAgICAvLyBNYXRoZW1hdGljYWwgcHJvcGVydGllc1xuICAgICAgY29uc3QgaW5jcmVhc2luZ1ZhbHVlcyA9IFsxLCAyLCAzLCA0LCA1XTtcbiAgICAgIGFzc2VydGlvbkhlbHBlcnMudG9TYXRpc2Z5TWF0aGVtYXRpY2FsUHJvcGVydHkoaW5jcmVhc2luZ1ZhbHVlcywgJ21vbm90b25pYy1pbmNyZWFzaW5nJyk7XG5cbiAgICAgIHRlc3RMb2dnZXIubG9nQXNzZXJ0aW9uKCdDdXN0b20gYXNzZXJ0aW9ucycsIHRydWUsICdzcGVjaWFsaXplZCBjaGVja3MnLCAncGFzc2VkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhc3luYyBhc3NlcnRpb25zIHdpdGggdGltZW91dHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgY291bnRlciA9IDA7XG4gICAgICBjb25zdCBldmVudHVhbGx5VHJ1ZSA9ICgpID0+IHtcbiAgICAgICAgY291bnRlcisrO1xuICAgICAgICByZXR1cm4gY291bnRlciA+PSAzO1xuICAgICAgfTtcblxuICAgICAgLy8gVGhpcyBzaG91bGQgZXZlbnR1YWxseSBiZWNvbWUgdHJ1ZVxuICAgICAgYXdhaXQgYXNzZXJ0aW9uSGVscGVycy50b0V2ZW50dWFsbHlCZVRydWUoZXZlbnR1YWxseVRydWUsIHsgXG4gICAgICAgIHRpbWVvdXQ6IDEwMDAsIFxuICAgICAgICBpbnRlcnZhbDogNTAgXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNvdW50ZXIpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfwn5OdIFRlc3QgTG9nZ2VyIEV4YW1wbGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJvdmlkZSBzdHJ1Y3R1cmVkIGxvZ2dpbmcgZm9yIHRlc3QgYW5hbHlzaXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnRMb2dnZXIgPSB0ZXN0TG9nZ2VyLmNyZWF0ZUNoaWxkKCdVc2VyU2VydmljZScpO1xuXG4gICAgICAvLyBMb2cgZGlmZmVyZW50IHR5cGVzIG9mIGV2ZW50c1xuICAgICAgY29tcG9uZW50TG9nZ2VyLmluZm8oJ1N0YXJ0aW5nIHVzZXIgY3JlYXRpb24gcHJvY2VzcycpO1xuICAgICAgY29tcG9uZW50TG9nZ2VyLmxvZ0ludGVyYWN0aW9uKCdVc2VyU2VydmljZScsICd2YWxpZGF0ZUlucHV0JywgWyd1c2VyQGV4YW1wbGUuY29tJ10pO1xuICAgICAgY29tcG9uZW50TG9nZ2VyLmxvZ1N0YXRlQ2hhbmdlKCdVc2VyVmFsaWRhdG9yJywgXG4gICAgICAgIHsgaXNWYWxpZDogZmFsc2UgfSwgXG4gICAgICAgIHsgaXNWYWxpZDogdHJ1ZSB9LCBcbiAgICAgICAgJ2VtYWlsX3ZhbGlkYXRpb24nXG4gICAgICApO1xuICAgICAgY29tcG9uZW50TG9nZ2VyLmxvZ1BlcmZvcm1hbmNlKCdEYXRhYmFzZSBJbnNlcnQnLCAyNSk7XG4gICAgICBjb21wb25lbnRMb2dnZXIubG9nQXNzZXJ0aW9uKCdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgdHJ1ZSk7XG5cbiAgICAgIC8vIFZlcmlmeSBsb2dzIHdlcmUgY2FwdHVyZWRcbiAgICAgIGNvbnN0IGxvZ3MgPSBjb21wb25lbnRMb2dnZXIuZ2V0TG9ncygpO1xuICAgICAgZXhwZWN0KGxvZ3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgIGNvbnN0IHBlcmZvcm1hbmNlTG9ncyA9IGNvbXBvbmVudExvZ2dlci5nZXRMb2dzQnlDYXRlZ29yeSgncGVyZm9ybWFuY2UnKTtcbiAgICAgIGV4cGVjdChwZXJmb3JtYW5jZUxvZ3MpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChwZXJmb3JtYW5jZUxvZ3NbMF0ubWVzc2FnZSkudG9Db250YWluKCdEYXRhYmFzZSBJbnNlcnQnKTtcblxuICAgICAgY29uc3QgaW50ZXJhY3Rpb25Mb2dzID0gY29tcG9uZW50TG9nZ2VyLmdldExvZ3NCeUNhdGVnb3J5KCdpbnRlcmFjdGlvbicpO1xuICAgICAgZXhwZWN0KGludGVyYWN0aW9uTG9ncykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG4vKipcbiAqIEtleSBUYWtlYXdheXMgZnJvbSBFeGFtcGxlczpcbiAqIFxuICogMS4gTG9uZG9uIFNjaG9vbCBUREQ6XG4gKiAgICAtIEZvY3VzIG9uIGludGVyYWN0aW9uIHRlc3RpbmdcbiAqICAgIC0gSGVhdnkgdXNlIG9mIG1vY2tzIHRvIGlzb2xhdGUgdW5pdHNcbiAqICAgIC0gVmVyaWZ5IEhPVyBvYmplY3RzIGNvbGxhYm9yYXRlXG4gKiAgICAtIFRlc3QgYmVoYXZpb3IgdGhyb3VnaCBtb2NrIGV4cGVjdGF0aW9uc1xuICogXG4gKiAyLiBDbGFzc2ljYWwgU2Nob29sIFRERDpcbiAqICAgIC0gRm9jdXMgb24gc3RhdGUgYW5kIG91dHB1dCB0ZXN0aW5nXG4gKiAgICAtIE1pbmltYWwgbW9ja3MsIHByZWZlciByZWFsIG9iamVjdHNcbiAqICAgIC0gVmVyaWZ5IFdIQVQgdGhlIHN5c3RlbSBwcm9kdWNlc1xuICogICAgLSBUZXN0IG1hdGhlbWF0aWNhbCBhbmQgYWxnb3JpdGhtaWMgY29ycmVjdG5lc3NcbiAqIFxuICogMy4gUGVyZm9ybWFuY2UgVGVzdGluZzpcbiAqICAgIC0gTWVhc3VyZSBleGVjdXRpb24gdGltZSBhbmQgbWVtb3J5IHVzYWdlXG4gKiAgICAtIENvbXBhcmUgYWxnb3JpdGhtIGVmZmljaWVuY3lcbiAqICAgIC0gRGV0ZWN0IG1lbW9yeSBsZWFrcyBhbmQgcGVyZm9ybWFuY2UgcmVncmVzc2lvbnNcbiAqICAgIC0gU2V0IHBlcmZvcm1hbmNlIHRocmVzaG9sZHMgYW5kIGFzc2VydGlvbnNcbiAqIFxuICogNC4gSW50ZWdyYXRpb24gVGVzdGluZzpcbiAqICAgIC0gVGVzdCBjb21wbGV0ZSBzeXN0ZW0gaW50ZXJhY3Rpb25zXG4gKiAgICAtIFVzZSByZWFsaXN0aWMgZGF0YSBhbmQgZW52aXJvbm1lbnRzXG4gKiAgICAtIFZlcmlmeSBlbmQtdG8tZW5kIHdvcmtmbG93c1xuICogICAgLSBDbGVhbiB1cCByZXNvdXJjZXMgcHJvcGVybHlcbiAqIFxuICogNS4gVGVzdCBEYXRhIE1hbmFnZW1lbnQ6XG4gKiAgICAtIEdlbmVyYXRlIHJlcHJvZHVjaWJsZSB0ZXN0IGRhdGFcbiAqICAgIC0gQ3JlYXRlIHJlYWxpc3RpYyBkb21haW4gb2JqZWN0c1xuICogICAgLSBTdXBwb3J0IHZhcmlvdXMgZGF0YSBwYXR0ZXJucyBhbmQgZWRnZSBjYXNlc1xuICogICAgLSBNYWludGFpbiBkYXRhIGNvbnNpc3RlbmN5IGFjcm9zcyB0ZXN0c1xuICovIl0sInZlcnNpb24iOjN9