505817b7b4d1d49f2aa2555b728e0489
/**
 * Command Registry Tests - TDD London School
 *
 * Tests the behavior and interactions of the CommandRegistry class
 * using mocks for external dependencies and focusing on collaboration
 * between objects rather than state verification.
 */
import { jest } from '@jest/globals';
// Mock fs/promises
jest.mock('fs/promises', () => ({
    readdir: jest.fn(),
    stat: jest.fn()
}));
// Mock path
jest.mock('path', () => ({
    join: jest.fn((...args) => args.join('/')),
    extname: jest.fn((path) => {
        const parts = path.split('.');
        return parts.length > 1 ? `.${parts[parts.length - 1]}` : '';
    })
}));
import { CommandRegistry } from '../../../../cli/core/command-registry.js';
import { BaseCommand } from '../../../../cli/core/base-command.js';
// Mock BaseCommand for testing
class MockCommand extends BaseCommand {
    constructor(config) {
        super(config);
    }
    async run(context) {
        return {
            success: true,
            exitCode: 0,
            message: `Mock command ${this.config.name} executed`
        };
    }
    getHelp() {
        return `Help for ${this.config.name}`;
    }
}
describe('CommandRegistry - TDD London', () => {
    let registry;
    let mockEventHandler;
    beforeEach(() => {
        registry = new CommandRegistry();
        mockEventHandler = jest.fn();
        // Listen to all events for behavior verification
        registry.on('command-registered', mockEventHandler);
        registry.on('command-unregistered', mockEventHandler);
        registry.on('command-executing', mockEventHandler);
        registry.on('command-executed', mockEventHandler);
        registry.on('command-error', mockEventHandler);
    });
    afterEach(() => {
        registry.removeAllListeners();
    });
    describe('command registration behavior', () => {
        it('should emit registration event when registering a command', () => {
            // Arrange
            const metadata = {
                config: {
                    name: 'test-command',
                    description: 'Test command',
                    category: 'core'
                },
                handler: jest.fn(),
                registeredAt: new Date(),
                available: true
            };
            // Act
            registry.register(metadata);
            // Assert - verify behavior through event emissions
            expect(mockEventHandler).toHaveBeenCalledWith({
                name: 'test-command',
                metadata: expect.objectContaining({
                    config: expect.objectContaining({
                        name: 'test-command'
                    })
                })
            });
        });
        it('should register command aliases and make them discoverable', () => {
            // Arrange
            const metadata = {
                config: {
                    name: 'status',
                    description: 'Show status',
                    aliases: ['st', 'stat'],
                    category: 'core'
                },
                handler: jest.fn(),
                registeredAt: new Date(),
                available: true
            };
            // Act
            registry.register(metadata);
            // Assert - verify behavior through public interface
            expect(registry.has('status')).toBe(true);
            expect(registry.has('st')).toBe(true);
            expect(registry.has('stat')).toBe(true);
            expect(registry.get('st')).toBe(registry.get('status'));
        });
        it('should throw error when registering duplicate command names', () => {
            // Arrange
            const metadata1 = {
                config: { name: 'duplicate', description: 'First' },
                handler: jest.fn(),
                registeredAt: new Date(),
                available: true
            };
            const metadata2 = {
                config: { name: 'duplicate', description: 'Second' },
                handler: jest.fn(),
                registeredAt: new Date(),
                available: true
            };
            registry.register(metadata1);
            // Act & Assert - verify error behavior
            expect(() => registry.register(metadata2))
                .toThrow("Command 'duplicate' is already registered");
        });
        it('should throw error when registering duplicate aliases', () => {
            // Arrange
            const metadata1 = {
                config: { name: 'cmd1', description: 'First', aliases: ['c'] },
                handler: jest.fn(),
                registeredAt: new Date(),
                available: true
            };
            const metadata2 = {
                config: { name: 'cmd2', description: 'Second', aliases: ['c'] },
                handler: jest.fn(),
                registeredAt: new Date(),
                available: true
            };
            registry.register(metadata1);
            // Act & Assert - verify alias conflict behavior
            expect(() => registry.register(metadata2))
                .toThrow("Alias 'c' is already registered");
        });
    });
    describe('command discovery behavior', () => {
        beforeEach(() => {
            // Setup test commands
            const commands = [
                { name: 'status', description: 'Show status', category: 'core' },
                { name: 'init', description: 'Initialize project', category: 'core' },
                { name: 'deploy', description: 'Deploy application', category: 'utility' },
                { name: 'experimental-feature', description: 'Test feature', category: 'experimental' }
            ];
            commands.forEach(config => {
                registry.register({
                    config,
                    handler: jest.fn(),
                    registeredAt: new Date(),
                    available: true
                });
            });
        });
        it('should find commands by category', () => {
            // Act
            const coreCommands = registry.findByCategory('core');
            const utilityCommands = registry.findByCategory('utility');
            // Assert - verify filtering behavior
            expect(coreCommands).toHaveLength(2);
            expect(coreCommands.map(cmd => cmd.config.name)).toEqual(expect.arrayContaining(['status', 'init']));
            expect(utilityCommands).toHaveLength(1);
            expect(utilityCommands[0].config.name).toBe('deploy');
        });
        it('should search commands by name and description', () => {
            // Act
            const statusResults = registry.search('status');
            const initResults = registry.search('Initialize');
            const deployResults = registry.search('app');
            // Assert - verify search behavior
            expect(statusResults).toHaveLength(1);
            expect(statusResults[0].config.name).toBe('status');
            expect(initResults).toHaveLength(1);
            expect(initResults[0].config.name).toBe('init');
            expect(deployResults).toHaveLength(1);
            expect(deployResults[0].config.name).toBe('deploy');
        });
        it('should list all commands in alphabetical order', () => {
            // Act
            const allCommands = registry.list();
            // Assert - verify listing behavior
            expect(allCommands).toHaveLength(4);
            const names = allCommands.map(cmd => cmd.config.name);
            expect(names).toEqual(['deploy', 'experimental-feature', 'init', 'status']);
        });
    });
    describe('command execution behavior', () => {
        let mockHandler;
        let mockContext;
        beforeEach(() => {
            mockHandler = jest.fn().mockResolvedValue({
                success: true,
                exitCode: 0,
                message: 'Handler executed'
            });
            mockContext = {
                args: ['arg1'],
                flags: { verbose: true },
                input: ['test-cmd', 'arg1', '--verbose'],
                pkg: { name: 'test-cli', version: '1.0.0' },
                cwd: '/test/dir',
                env: {},
                debug: false,
                verbose: true
            };
            registry.register({
                config: { name: 'test-cmd', description: 'Test command' },
                handler: mockHandler,
                registeredAt: new Date(),
                available: true
            });
        });
        it('should emit executing event before running command', async () => {
            // Act
            await registry.execute('test-cmd', mockContext);
            // Assert - verify event emission behavior
            expect(mockEventHandler).toHaveBeenCalledWith({
                name: 'test-cmd',
                context: mockContext
            });
        });
        it('should call command handler with correct context', async () => {
            // Act
            await registry.execute('test-cmd', mockContext);
            // Assert - verify handler collaboration
            expect(mockHandler).toHaveBeenCalledWith(mockContext);
        });
        it('should emit executed event with result after successful execution', async () => {
            // Arrange
            const expectedResult = {
                success: true,
                exitCode: 0,
                message: 'Handler executed'
            };
            mockHandler.mockResolvedValue(expectedResult);
            // Act
            await registry.execute('test-cmd', mockContext);
            // Assert - verify success event behavior
            expect(mockEventHandler).toHaveBeenCalledWith({
                name: 'test-cmd',
                result: expectedResult
            });
        });
        it('should emit error event and return error result when handler throws', async () => {
            // Arrange
            const error = new Error('Handler failed');
            mockHandler.mockRejectedValue(error);
            // Act
            const result = await registry.execute('test-cmd', mockContext);
            // Assert - verify error handling behavior
            expect(mockEventHandler).toHaveBeenCalledWith({
                name: 'test-cmd',
                error
            });
            expect(result).toEqual({
                success: false,
                error: 'Handler failed',
                exitCode: 1,
                executionTime: 0
            });
        });
        it('should return command not found error for unknown commands', async () => {
            // Act
            const result = await registry.execute('unknown-cmd', mockContext);
            // Assert - verify not found behavior
            expect(result).toEqual({
                success: false,
                error: "Command 'unknown-cmd' not found",
                exitCode: 127,
                executionTime: 0
            });
        });
        it('should execute command through alias', async () => {
            // Arrange
            registry.register({
                config: {
                    name: 'long-command',
                    description: 'Long command name',
                    aliases: ['lc']
                },
                handler: mockHandler,
                registeredAt: new Date(),
                available: true
            });
            // Act
            await registry.execute('lc', mockContext);
            // Assert - verify alias resolution behavior
            expect(mockHandler).toHaveBeenCalledWith(mockContext);
            expect(mockEventHandler).toHaveBeenCalledWith({
                name: 'lc',
                context: mockContext
            });
        });
    });
    describe('BaseCommand integration behavior', () => {
        let mockCommand;
        beforeEach(() => {
            mockCommand = new MockCommand({
                name: 'mock-cmd',
                description: 'Mock command',
                category: 'core'
            });
            // Spy on command methods
            jest.spyOn(mockCommand, 'execute');
            jest.spyOn(mockCommand, 'dispose');
        });
        it('should register BaseCommand instance and use its execute method', async () => {
            // Arrange
            registry.registerCommand(mockCommand);
            const context = {
                args: [],
                flags: {},
                input: ['mock-cmd'],
                pkg: { name: 'test', version: '1.0.0' },
                cwd: '/test',
                env: {},
                debug: false,
                verbose: false
            };
            // Act
            await registry.execute('mock-cmd', context);
            // Assert - verify BaseCommand integration
            expect(mockCommand.execute).toHaveBeenCalledWith(context);
        });
        it('should dispose BaseCommand when unregistering', () => {
            // Arrange
            registry.registerCommand(mockCommand);
            // Act
            registry.unregister('mock-cmd');
            // Assert - verify disposal behavior
            expect(mockCommand.dispose).toHaveBeenCalled();
        });
        it('should retrieve BaseCommand instance via getCommand', () => {
            // Arrange
            registry.registerCommand(mockCommand);
            // Act
            const retrievedCommand = registry.getCommand('mock-cmd');
            // Assert - verify command retrieval
            expect(retrievedCommand).toBe(mockCommand);
        });
    });
    describe('usage statistics behavior', () => {
        let mockHandler;
        beforeEach(() => {
            mockHandler = jest.fn().mockResolvedValue({
                success: true,
                exitCode: 0
            });
            registry.register({
                config: { name: 'tracked-cmd', description: 'Tracked command' },
                handler: mockHandler,
                registeredAt: new Date(),
                available: true
            });
        });
        it('should track command usage statistics', async () => {
            // Arrange
            const context = {
                args: [],
                flags: {},
                input: ['tracked-cmd'],
                pkg: { name: 'test', version: '1.0.0' },
                cwd: '/test',
                env: {},
                debug: false,
                verbose: false
            };
            // Act
            await registry.execute('tracked-cmd', context);
            await registry.execute('tracked-cmd', context);
            // Assert - verify usage tracking behavior
            const stats = registry.getUsageStats();
            const cmdStats = stats.find(s => s.name === 'tracked-cmd');
            expect(cmdStats).toBeDefined();
            expect(cmdStats.usageCount).toBe(2);
            expect(cmdStats.lastUsed).toBeGreaterThan(0);
        });
    });
    describe('cleanup behavior', () => {
        let mockCommand;
        beforeEach(() => {
            mockCommand = new MockCommand({
                name: 'cleanup-test',
                description: 'Cleanup test command'
            });
            jest.spyOn(mockCommand, 'dispose');
            registry.registerCommand(mockCommand);
        });
        it('should dispose all commands and clear registry when cleared', async () => {
            // Act
            await registry.clear();
            // Assert - verify cleanup behavior
            expect(mockCommand.dispose).toHaveBeenCalled();
            expect(registry.list()).toHaveLength(0);
            expect(registry.has('cleanup-test')).toBe(false);
        });
        it('should emit cleared event after cleanup', async () => {
            // Arrange
            registry.on('cleared', mockEventHandler);
            // Act
            await registry.clear();
            // Assert - verify cleanup event emission
            expect(mockEventHandler).toHaveBeenCalled();
        });
        it('should provide status information', () => {
            // Act
            const status = registry.getStatus();
            // Assert - verify status reporting behavior
            expect(status).toEqual({
                initialized: false,
                commandCount: 1,
                pluginCount: 0,
                aliasCount: 0,
                loadingPaths: []
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvbWh1Z28vY29kZS9jbGF1ZGUtY29kZS1mbG93L3NyYy9fX3Rlc3RzX18vdW5pdC9sb25kb24vY2xpLWNvbW1hbmRzL2NvbW1hbmQtcmVnaXN0cnkudGVzdC50cyIsIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0dBTUc7QUFHSCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBNkJyQyxtQkFBbUI7QUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUM5QixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNsQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNoQixDQUFDLENBQUMsQ0FBQztBQUVKLFlBQVk7QUFDWixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFjLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDcEQsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFZLEVBQUUsRUFBRTtRQUNoQyxNQUFNLEtBQUssR0FBSSxJQUFlLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFDLE9BQU8sS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQy9ELENBQUMsQ0FBQztDQUNILENBQUMsQ0FBQyxDQUFDO0FBekNKLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUMzRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFRbkUsK0JBQStCO0FBQy9CLE1BQU0sV0FBWSxTQUFRLFdB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QUFDLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN2RCxVQUFVO1lBQ1YsUUFBUSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztZQUV6QyxNQUFNO1lBQ04sTUFBTSxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7WUFFdkIseUNBQXlDO1lBQ3pDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFO1lBQzNDLE1BQU07WUFDTixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsU0FBUyxFQUFFLENBQUM7WUFFcEMsNENBQTRDO1lBQzVDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUM7Z0JBQ3JCLFdBQVcsRUFBRSxLQUFLO2dCQUNsQixZQUFZLEVBQUUsQ0FBQztnQkFDZixXQUFXLEVBQUUsQ0FBQztnQkFDZCxVQUFVLEVBQUUsQ0FBQztnQkFDYixZQUFZLEVBQUUsRUFBRTthQUNqQixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvbWh1Z28vY29kZS9jbGF1ZGUtY29kZS1mbG93L3NyYy9fX3Rlc3RzX18vdW5pdC9sb25kb24vY2xpLWNvbW1hbmRzL2NvbW1hbmQtcmVnaXN0cnkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbW1hbmQgUmVnaXN0cnkgVGVzdHMgLSBUREQgTG9uZG9uIFNjaG9vbFxuICogXG4gKiBUZXN0cyB0aGUgYmVoYXZpb3IgYW5kIGludGVyYWN0aW9ucyBvZiB0aGUgQ29tbWFuZFJlZ2lzdHJ5IGNsYXNzXG4gKiB1c2luZyBtb2NrcyBmb3IgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzIGFuZCBmb2N1c2luZyBvbiBjb2xsYWJvcmF0aW9uXG4gKiBiZXR3ZWVuIG9iamVjdHMgcmF0aGVyIHRoYW4gc3RhdGUgdmVyaWZpY2F0aW9uLlxuICovXG5cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeyBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBDb21tYW5kUmVnaXN0cnkgfSBmcm9tICcuLi8uLi8uLi8uLi9jbGkvY29yZS9jb21tYW5kLXJlZ2lzdHJ5LmpzJztcbmltcG9ydCB7IEJhc2VDb21tYW5kIH0gZnJvbSAnLi4vLi4vLi4vLi4vY2xpL2NvcmUvYmFzZS1jb21tYW5kLmpzJztcbmltcG9ydCB0eXBlIHsgXG4gIENvbW1hbmRNZXRhZGF0YSwgXG4gIENvbW1hbmRDb250ZXh0LCBcbiAgQ29tbWFuZFJlc3VsdCxcbiAgQ29tbWFuZENvbmZpZyBcbn0gZnJvbSAnLi4vLi4vLi4vLi4vY2xpL3R5cGVzL2luZGV4LmpzJztcblxuLy8gTW9jayBCYXNlQ29tbWFuZCBmb3IgdGVzdGluZ1xuY2xhc3MgTW9ja0NvbW1hbmQgZXh0ZW5kcyBCYXNlQ29tbWFuZCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ29tbWFuZENvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgcnVuKGNvbnRleHQ6IENvbW1hbmRDb250ZXh0KTogUHJvbWlzZTxDb21tYW5kUmVzdWx0PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBleGl0Q29kZTogMCxcbiAgICAgIG1lc3NhZ2U6IGBNb2NrIGNvbW1hbmQgJHt0aGlzLmNvbmZpZy5uYW1lfSBleGVjdXRlZGBcbiAgICB9O1xuICB9XG5cbiAgZ2V0SGVscCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgSGVscCBmb3IgJHt0aGlzLmNvbmZpZy5uYW1lfWA7XG4gIH1cbn1cblxuLy8gTW9jayBmcy9wcm9taXNlc1xuamVzdC5tb2NrKCdmcy9wcm9taXNlcycsICgpID0+ICh7XG4gIHJlYWRkaXI6IGplc3QuZm4oKSxcbiAgc3RhdDogamVzdC5mbigpXG59KSk7XG5cbi8vIE1vY2sgcGF0aFxuamVzdC5tb2NrKCdwYXRoJywgKCkgPT4gKHtcbiAgam9pbjogamVzdC5mbigoLi4uYXJnczogc3RyaW5nW10pID0+IGFyZ3Muam9pbignLycpKSxcbiAgZXh0bmFtZTogamVzdC5mbigocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgcGFydHMgPSAocGF0aCBhcyBzdHJpbmcpLnNwbGl0KCcuJyk7XG4gICAgcmV0dXJuIHBhcnRzLmxlbmd0aCA+IDEgPyBgLiR7cGFydHNbcGFydHMubGVuZ3RoIC0gMV19YCA6ICcnO1xuICB9KVxufSkpO1xuXG5kZXNjcmliZSgnQ29tbWFuZFJlZ2lzdHJ5IC0gVEREIExvbmRvbicsICgpID0+IHtcbiAgbGV0IHJlZ2lzdHJ5OiBDb21tYW5kUmVnaXN0cnk7XG4gIGxldCBtb2NrRXZlbnRIYW5kbGVyOiBqZXN0Lk1vY2s7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgcmVnaXN0cnkgPSBuZXcgQ29tbWFuZFJlZ2lzdHJ5KCk7XG4gICAgbW9ja0V2ZW50SGFuZGxlciA9IGplc3QuZm4oKTtcbiAgICBcbiAgICAvLyBMaXN0ZW4gdG8gYWxsIGV2ZW50cyBmb3IgYmVoYXZpb3IgdmVyaWZpY2F0aW9uXG4gICAgcmVnaXN0cnkub24oJ2NvbW1hbmQtcmVnaXN0ZXJlZCcsIG1vY2tFdmVudEhhbmRsZXIpO1xuICAgIHJlZ2lzdHJ5Lm9uKCdjb21tYW5kLXVucmVnaXN0ZXJlZCcsIG1vY2tFdmVudEhhbmRsZXIpO1xuICAgIHJlZ2lzdHJ5Lm9uKCdjb21tYW5kLWV4ZWN1dGluZycsIG1vY2tFdmVudEhhbmRsZXIpO1xuICAgIHJlZ2lzdHJ5Lm9uKCdjb21tYW5kLWV4ZWN1dGVkJywgbW9ja0V2ZW50SGFuZGxlcik7XG4gICAgcmVnaXN0cnkub24oJ2NvbW1hbmQtZXJyb3InLCBtb2NrRXZlbnRIYW5kbGVyKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICByZWdpc3RyeS5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NvbW1hbmQgcmVnaXN0cmF0aW9uIGJlaGF2aW9yJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZW1pdCByZWdpc3RyYXRpb24gZXZlbnQgd2hlbiByZWdpc3RlcmluZyBhIGNvbW1hbmQnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtZXRhZGF0YTogQ29tbWFuZE1ldGFkYXRhID0ge1xuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICBuYW1lOiAndGVzdC1jb21tYW5kJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgY29tbWFuZCcsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdjb3JlJ1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVyOiBqZXN0LmZuKCkgYXMgYW55LFxuICAgICAgICByZWdpc3RlcmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGF2YWlsYWJsZTogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICByZWdpc3RyeS5yZWdpc3RlcihtZXRhZGF0YSk7XG5cbiAgICAgIC8vIEFzc2VydCAtIHZlcmlmeSBiZWhhdmlvciB0aHJvdWdoIGV2ZW50IGVtaXNzaW9uc1xuICAgICAgZXhwZWN0KG1vY2tFdmVudEhhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgbmFtZTogJ3Rlc3QtY29tbWFuZCcsXG4gICAgICAgIG1ldGFkYXRhOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgY29uZmlnOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBuYW1lOiAndGVzdC1jb21tYW5kJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgY29tbWFuZCBhbGlhc2VzIGFuZCBtYWtlIHRoZW0gZGlzY292ZXJhYmxlJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbWV0YWRhdGE6IENvbW1hbmRNZXRhZGF0YSA9IHtcbiAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgbmFtZTogJ3N0YXR1cycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdTaG93IHN0YXR1cycsXG4gICAgICAgICAgYWxpYXNlczogWydzdCcsICdzdGF0J10sXG4gICAgICAgICAgY2F0ZWdvcnk6ICdjb3JlJ1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVyOiBqZXN0LmZuKCkgYXMgYW55LFxuICAgICAgICByZWdpc3RlcmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGF2YWlsYWJsZTogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICByZWdpc3RyeS5yZWdpc3RlcihtZXRhZGF0YSk7XG5cbiAgICAgIC8vIEFzc2VydCAtIHZlcmlmeSBiZWhhdmlvciB0aHJvdWdoIHB1YmxpYyBpbnRlcmZhY2VcbiAgICAgIGV4cGVjdChyZWdpc3RyeS5oYXMoJ3N0YXR1cycpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlZ2lzdHJ5Lmhhcygnc3QnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZWdpc3RyeS5oYXMoJ3N0YXQnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZWdpc3RyeS5nZXQoJ3N0JykpLnRvQmUocmVnaXN0cnkuZ2V0KCdzdGF0dXMnKSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gcmVnaXN0ZXJpbmcgZHVwbGljYXRlIGNvbW1hbmQgbmFtZXMnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtZXRhZGF0YTE6IENvbW1hbmRNZXRhZGF0YSA9IHtcbiAgICAgICAgY29uZmlnOiB7IG5hbWU6ICdkdXBsaWNhdGUnLCBkZXNjcmlwdGlvbjogJ0ZpcnN0JyB9LFxuICAgICAgICBoYW5kbGVyOiBqZXN0LmZuKCkgYXMgYW55LFxuICAgICAgICByZWdpc3RlcmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGF2YWlsYWJsZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIGNvbnN0IG1ldGFkYXRhMjogQ29tbWFuZE1ldGFkYXRhID0ge1xuICAgICAgICBjb25maWc6IHsgbmFtZTogJ2R1cGxpY2F0ZScsIGRlc2NyaXB0aW9uOiAnU2Vjb25kJyB9LFxuICAgICAgICBoYW5kbGVyOiBqZXN0LmZuKCkgYXMgYW55LFxuICAgICAgICByZWdpc3RlcmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGF2YWlsYWJsZTogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgcmVnaXN0cnkucmVnaXN0ZXIobWV0YWRhdGExKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0IC0gdmVyaWZ5IGVycm9yIGJlaGF2aW9yXG4gICAgICBleHBlY3QoKCkgPT4gcmVnaXN0cnkucmVnaXN0ZXIobWV0YWRhdGEyKSlcbiAgICAgICAgLnRvVGhyb3coXCJDb21tYW5kICdkdXBsaWNhdGUnIGlzIGFscmVhZHkgcmVnaXN0ZXJlZFwiKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiByZWdpc3RlcmluZyBkdXBsaWNhdGUgYWxpYXNlcycsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1ldGFkYXRhMTogQ29tbWFuZE1ldGFkYXRhID0ge1xuICAgICAgICBjb25maWc6IHsgbmFtZTogJ2NtZDEnLCBkZXNjcmlwdGlvbjogJ0ZpcnN0JywgYWxpYXNlczogWydjJ10gfSxcbiAgICAgICAgaGFuZGxlcjogamVzdC5mbigpIGFzIGFueSxcbiAgICAgICAgcmVnaXN0ZXJlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBhdmFpbGFibGU6IHRydWVcbiAgICAgIH07XG4gICAgICBjb25zdCBtZXRhZGF0YTI6IENvbW1hbmRNZXRhZGF0YSA9IHtcbiAgICAgICAgY29uZmlnOiB7IG5hbWU6ICdjbWQyJywgZGVzY3JpcHRpb246ICdTZWNvbmQnLCBhbGlhc2VzOiBbJ2MnXSB9LFxuICAgICAgICBoYW5kbGVyOiBqZXN0LmZuKCkgYXMgYW55LFxuICAgICAgICByZWdpc3RlcmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGF2YWlsYWJsZTogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgcmVnaXN0cnkucmVnaXN0ZXIobWV0YWRhdGExKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0IC0gdmVyaWZ5IGFsaWFzIGNvbmZsaWN0IGJlaGF2aW9yXG4gICAgICBleHBlY3QoKCkgPT4gcmVnaXN0cnkucmVnaXN0ZXIobWV0YWRhdGEyKSlcbiAgICAgICAgLnRvVGhyb3coXCJBbGlhcyAnYycgaXMgYWxyZWFkeSByZWdpc3RlcmVkXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY29tbWFuZCBkaXNjb3ZlcnkgYmVoYXZpb3InLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAvLyBTZXR1cCB0ZXN0IGNvbW1hbmRzXG4gICAgICBjb25zdCBjb21tYW5kcyA9IFtcbiAgICAgICAgeyBuYW1lOiAnc3RhdHVzJywgZGVzY3JpcHRpb246ICdTaG93IHN0YXR1cycsIGNhdGVnb3J5OiAnY29yZScgYXMgY29uc3QgfSxcbiAgICAgICAgeyBuYW1lOiAnaW5pdCcsIGRlc2NyaXB0aW9uOiAnSW5pdGlhbGl6ZSBwcm9qZWN0JywgY2F0ZWdvcnk6ICdjb3JlJyBhcyBjb25zdCB9LFxuICAgICAgICB7IG5hbWU6ICdkZXBsb3knLCBkZXNjcmlwdGlvbjogJ0RlcGxveSBhcHBsaWNhdGlvbicsIGNhdGVnb3J5OiAndXRpbGl0eScgYXMgY29uc3QgfSxcbiAgICAgICAgeyBuYW1lOiAnZXhwZXJpbWVudGFsLWZlYXR1cmUnLCBkZXNjcmlwdGlvbjogJ1Rlc3QgZmVhdHVyZScsIGNhdGVnb3J5OiAnZXhwZXJpbWVudGFsJyBhcyBjb25zdCB9XG4gICAgICBdO1xuXG4gICAgICBjb21tYW5kcy5mb3JFYWNoKGNvbmZpZyA9PiB7XG4gICAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKHtcbiAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgaGFuZGxlcjogamVzdC5mbigpIGFzIGFueSxcbiAgICAgICAgICByZWdpc3RlcmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgYXZhaWxhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbmQgY29tbWFuZHMgYnkgY2F0ZWdvcnknLCAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IGNvcmVDb21tYW5kcyA9IHJlZ2lzdHJ5LmZpbmRCeUNhdGVnb3J5KCdjb3JlJyk7XG4gICAgICBjb25zdCB1dGlsaXR5Q29tbWFuZHMgPSByZWdpc3RyeS5maW5kQnlDYXRlZ29yeSgndXRpbGl0eScpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgZmlsdGVyaW5nIGJlaGF2aW9yXG4gICAgICBleHBlY3QoY29yZUNvbW1hbmRzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QoY29yZUNvbW1hbmRzLm1hcChjbWQgPT4gY21kLmNvbmZpZy5uYW1lKSkudG9FcXVhbChcbiAgICAgICAgZXhwZWN0LmFycmF5Q29udGFpbmluZyhbJ3N0YXR1cycsICdpbml0J10pXG4gICAgICApO1xuICAgICAgZXhwZWN0KHV0aWxpdHlDb21tYW5kcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHV0aWxpdHlDb21tYW5kc1swXS5jb25maWcubmFtZSkudG9CZSgnZGVwbG95Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNlYXJjaCBjb21tYW5kcyBieSBuYW1lIGFuZCBkZXNjcmlwdGlvbicsICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3Qgc3RhdHVzUmVzdWx0cyA9IHJlZ2lzdHJ5LnNlYXJjaCgnc3RhdHVzJyk7XG4gICAgICBjb25zdCBpbml0UmVzdWx0cyA9IHJlZ2lzdHJ5LnNlYXJjaCgnSW5pdGlhbGl6ZScpO1xuICAgICAgY29uc3QgZGVwbG95UmVzdWx0cyA9IHJlZ2lzdHJ5LnNlYXJjaCgnYXBwJyk7XG5cbiAgICAgIC8vIEFzc2VydCAtIHZlcmlmeSBzZWFyY2ggYmVoYXZpb3JcbiAgICAgIGV4cGVjdChzdGF0dXNSZXN1bHRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3Qoc3RhdHVzUmVzdWx0c1swXS5jb25maWcubmFtZSkudG9CZSgnc3RhdHVzJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChpbml0UmVzdWx0cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGluaXRSZXN1bHRzWzBdLmNvbmZpZy5uYW1lKS50b0JlKCdpbml0Jyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkZXBsb3lSZXN1bHRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoZGVwbG95UmVzdWx0c1swXS5jb25maWcubmFtZSkudG9CZSgnZGVwbG95Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxpc3QgYWxsIGNvbW1hbmRzIGluIGFscGhhYmV0aWNhbCBvcmRlcicsICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgYWxsQ29tbWFuZHMgPSByZWdpc3RyeS5saXN0KCk7XG5cbiAgICAgIC8vIEFzc2VydCAtIHZlcmlmeSBsaXN0aW5nIGJlaGF2aW9yXG4gICAgICBleHBlY3QoYWxsQ29tbWFuZHMpLnRvSGF2ZUxlbmd0aCg0KTtcbiAgICAgIGNvbnN0IG5hbWVzID0gYWxsQ29tbWFuZHMubWFwKGNtZCA9PiBjbWQuY29uZmlnLm5hbWUpO1xuICAgICAgZXhwZWN0KG5hbWVzKS50b0VxdWFsKFsnZGVwbG95JywgJ2V4cGVyaW1lbnRhbC1mZWF0dXJlJywgJ2luaXQnLCAnc3RhdHVzJ10pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY29tbWFuZCBleGVjdXRpb24gYmVoYXZpb3InLCAoKSA9PiB7XG4gICAgbGV0IG1vY2tIYW5kbGVyOiBqZXN0Lk1vY2s7XG4gICAgbGV0IG1vY2tDb250ZXh0OiBDb21tYW5kQ29udGV4dDtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja0hhbmRsZXIgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBleGl0Q29kZTogMCxcbiAgICAgICAgbWVzc2FnZTogJ0hhbmRsZXIgZXhlY3V0ZWQnXG4gICAgICB9KTtcblxuICAgICAgbW9ja0NvbnRleHQgPSB7XG4gICAgICAgIGFyZ3M6IFsnYXJnMSddLFxuICAgICAgICBmbGFnczogeyB2ZXJib3NlOiB0cnVlIH0sXG4gICAgICAgIGlucHV0OiBbJ3Rlc3QtY21kJywgJ2FyZzEnLCAnLS12ZXJib3NlJ10sXG4gICAgICAgIHBrZzogeyBuYW1lOiAndGVzdC1jbGknLCB2ZXJzaW9uOiAnMS4wLjAnIH0sXG4gICAgICAgIGN3ZDogJy90ZXN0L2RpcicsXG4gICAgICAgIGVudjoge30sXG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgdmVyYm9zZTogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoe1xuICAgICAgICBjb25maWc6IHsgbmFtZTogJ3Rlc3QtY21kJywgZGVzY3JpcHRpb246ICdUZXN0IGNvbW1hbmQnIH0sXG4gICAgICAgIGhhbmRsZXI6IG1vY2tIYW5kbGVyLFxuICAgICAgICByZWdpc3RlcmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGF2YWlsYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgZXhlY3V0aW5nIGV2ZW50IGJlZm9yZSBydW5uaW5nIGNvbW1hbmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHJlZ2lzdHJ5LmV4ZWN1dGUoJ3Rlc3QtY21kJywgbW9ja0NvbnRleHQpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgZXZlbnQgZW1pc3Npb24gYmVoYXZpb3JcbiAgICAgIGV4cGVjdChtb2NrRXZlbnRIYW5kbGVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIG5hbWU6ICd0ZXN0LWNtZCcsXG4gICAgICAgIGNvbnRleHQ6IG1vY2tDb250ZXh0XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsbCBjb21tYW5kIGhhbmRsZXIgd2l0aCBjb3JyZWN0IGNvbnRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHJlZ2lzdHJ5LmV4ZWN1dGUoJ3Rlc3QtY21kJywgbW9ja0NvbnRleHQpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgaGFuZGxlciBjb2xsYWJvcmF0aW9uXG4gICAgICBleHBlY3QobW9ja0hhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tDb250ZXh0KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW1pdCBleGVjdXRlZCBldmVudCB3aXRoIHJlc3VsdCBhZnRlciBzdWNjZXNzZnVsIGV4ZWN1dGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBleGl0Q29kZTogMCxcbiAgICAgICAgbWVzc2FnZTogJ0hhbmRsZXIgZXhlY3V0ZWQnXG4gICAgICB9O1xuICAgICAgbW9ja0hhbmRsZXIubW9ja1Jlc29sdmVkVmFsdWUoZXhwZWN0ZWRSZXN1bHQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHJlZ2lzdHJ5LmV4ZWN1dGUoJ3Rlc3QtY21kJywgbW9ja0NvbnRleHQpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgc3VjY2VzcyBldmVudCBiZWhhdmlvclxuICAgICAgZXhwZWN0KG1vY2tFdmVudEhhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgbmFtZTogJ3Rlc3QtY21kJyxcbiAgICAgICAgcmVzdWx0OiBleHBlY3RlZFJlc3VsdFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgZXJyb3IgZXZlbnQgYW5kIHJldHVybiBlcnJvciByZXN1bHQgd2hlbiBoYW5kbGVyIHRocm93cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdIYW5kbGVyIGZhaWxlZCcpO1xuICAgICAgbW9ja0hhbmRsZXIubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlZ2lzdHJ5LmV4ZWN1dGUoJ3Rlc3QtY21kJywgbW9ja0NvbnRleHQpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgZXJyb3IgaGFuZGxpbmcgYmVoYXZpb3JcbiAgICAgIGV4cGVjdChtb2NrRXZlbnRIYW5kbGVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIG5hbWU6ICd0ZXN0LWNtZCcsXG4gICAgICAgIGVycm9yXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0hhbmRsZXIgZmFpbGVkJyxcbiAgICAgICAgZXhpdENvZGU6IDEsXG4gICAgICAgIGV4ZWN1dGlvblRpbWU6IDBcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29tbWFuZCBub3QgZm91bmQgZXJyb3IgZm9yIHVua25vd24gY29tbWFuZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlZ2lzdHJ5LmV4ZWN1dGUoJ3Vua25vd24tY21kJywgbW9ja0NvbnRleHQpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgbm90IGZvdW5kIGJlaGF2aW9yXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBcIkNvbW1hbmQgJ3Vua25vd24tY21kJyBub3QgZm91bmRcIixcbiAgICAgICAgZXhpdENvZGU6IDEyNyxcbiAgICAgICAgZXhlY3V0aW9uVGltZTogMFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgY29tbWFuZCB0aHJvdWdoIGFsaWFzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoe1xuICAgICAgICBjb25maWc6IHsgXG4gICAgICAgICAgbmFtZTogJ2xvbmctY29tbWFuZCcsIFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTG9uZyBjb21tYW5kIG5hbWUnLFxuICAgICAgICAgIGFsaWFzZXM6IFsnbGMnXVxuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVyOiBtb2NrSGFuZGxlcixcbiAgICAgICAgcmVnaXN0ZXJlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBhdmFpbGFibGU6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHJlZ2lzdHJ5LmV4ZWN1dGUoJ2xjJywgbW9ja0NvbnRleHQpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgYWxpYXMgcmVzb2x1dGlvbiBiZWhhdmlvclxuICAgICAgZXhwZWN0KG1vY2tIYW5kbGVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrQ29udGV4dCk7XG4gICAgICBleHBlY3QobW9ja0V2ZW50SGFuZGxlcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBuYW1lOiAnbGMnLFxuICAgICAgICBjb250ZXh0OiBtb2NrQ29udGV4dFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCYXNlQ29tbWFuZCBpbnRlZ3JhdGlvbiBiZWhhdmlvcicsICgpID0+IHtcbiAgICBsZXQgbW9ja0NvbW1hbmQ6IE1vY2tDb21tYW5kO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrQ29tbWFuZCA9IG5ldyBNb2NrQ29tbWFuZCh7XG4gICAgICAgIG5hbWU6ICdtb2NrLWNtZCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTW9jayBjb21tYW5kJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdjb3JlJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNweSBvbiBjb21tYW5kIG1ldGhvZHNcbiAgICAgIGplc3Quc3B5T24obW9ja0NvbW1hbmQsICdleGVjdXRlJyk7XG4gICAgICBqZXN0LnNweU9uKG1vY2tDb21tYW5kLCAnZGlzcG9zZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBCYXNlQ29tbWFuZCBpbnN0YW5jZSBhbmQgdXNlIGl0cyBleGVjdXRlIG1ldGhvZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyQ29tbWFuZChtb2NrQ29tbWFuZCk7XG4gICAgICBjb25zdCBjb250ZXh0OiBDb21tYW5kQ29udGV4dCA9IHtcbiAgICAgICAgYXJnczogW10sXG4gICAgICAgIGZsYWdzOiB7fSxcbiAgICAgICAgaW5wdXQ6IFsnbW9jay1jbWQnXSxcbiAgICAgICAgcGtnOiB7IG5hbWU6ICd0ZXN0JywgdmVyc2lvbjogJzEuMC4wJyB9LFxuICAgICAgICBjd2Q6ICcvdGVzdCcsXG4gICAgICAgIGVudjoge30sXG4gICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgdmVyYm9zZTogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcmVnaXN0cnkuZXhlY3V0ZSgnbW9jay1jbWQnLCBjb250ZXh0KTtcblxuICAgICAgLy8gQXNzZXJ0IC0gdmVyaWZ5IEJhc2VDb21tYW5kIGludGVncmF0aW9uXG4gICAgICBleHBlY3QobW9ja0NvbW1hbmQuZXhlY3V0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29udGV4dCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3Bvc2UgQmFzZUNvbW1hbmQgd2hlbiB1bnJlZ2lzdGVyaW5nJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgcmVnaXN0cnkucmVnaXN0ZXJDb21tYW5kKG1vY2tDb21tYW5kKTtcblxuICAgICAgLy8gQWN0XG4gICAgICByZWdpc3RyeS51bnJlZ2lzdGVyKCdtb2NrLWNtZCcpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgZGlzcG9zYWwgYmVoYXZpb3JcbiAgICAgIGV4cGVjdChtb2NrQ29tbWFuZC5kaXNwb3NlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIEJhc2VDb21tYW5kIGluc3RhbmNlIHZpYSBnZXRDb21tYW5kJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgcmVnaXN0cnkucmVnaXN0ZXJDb21tYW5kKG1vY2tDb21tYW5kKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXRyaWV2ZWRDb21tYW5kID0gcmVnaXN0cnkuZ2V0Q29tbWFuZCgnbW9jay1jbWQnKTtcblxuICAgICAgLy8gQXNzZXJ0IC0gdmVyaWZ5IGNvbW1hbmQgcmV0cmlldmFsXG4gICAgICBleHBlY3QocmV0cmlldmVkQ29tbWFuZCkudG9CZShtb2NrQ29tbWFuZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd1c2FnZSBzdGF0aXN0aWNzIGJlaGF2aW9yJywgKCkgPT4ge1xuICAgIGxldCBtb2NrSGFuZGxlcjogamVzdC5Nb2NrO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrSGFuZGxlciA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGV4aXRDb2RlOiAwXG4gICAgICB9KTtcblxuICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoe1xuICAgICAgICBjb25maWc6IHsgbmFtZTogJ3RyYWNrZWQtY21kJywgZGVzY3JpcHRpb246ICdUcmFja2VkIGNvbW1hbmQnIH0sXG4gICAgICAgIGhhbmRsZXI6IG1vY2tIYW5kbGVyLFxuICAgICAgICByZWdpc3RlcmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGF2YWlsYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRyYWNrIGNvbW1hbmQgdXNhZ2Ugc3RhdGlzdGljcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGNvbnRleHQ6IENvbW1hbmRDb250ZXh0ID0ge1xuICAgICAgICBhcmdzOiBbXSxcbiAgICAgICAgZmxhZ3M6IHt9LFxuICAgICAgICBpbnB1dDogWyd0cmFja2VkLWNtZCddLFxuICAgICAgICBwa2c6IHsgbmFtZTogJ3Rlc3QnLCB2ZXJzaW9uOiAnMS4wLjAnIH0sXG4gICAgICAgIGN3ZDogJy90ZXN0JyxcbiAgICAgICAgZW52OiB7fSxcbiAgICAgICAgZGVidWc6IGZhbHNlLFxuICAgICAgICB2ZXJib3NlOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCByZWdpc3RyeS5leGVjdXRlKCd0cmFja2VkLWNtZCcsIGNvbnRleHQpO1xuICAgICAgYXdhaXQgcmVnaXN0cnkuZXhlY3V0ZSgndHJhY2tlZC1jbWQnLCBjb250ZXh0KTtcblxuICAgICAgLy8gQXNzZXJ0IC0gdmVyaWZ5IHVzYWdlIHRyYWNraW5nIGJlaGF2aW9yXG4gICAgICBjb25zdCBzdGF0cyA9IHJlZ2lzdHJ5LmdldFVzYWdlU3RhdHMoKTtcbiAgICAgIGNvbnN0IGNtZFN0YXRzID0gc3RhdHMuZmluZChzID0+IHMubmFtZSA9PT0gJ3RyYWNrZWQtY21kJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjbWRTdGF0cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjbWRTdGF0cyEudXNhZ2VDb3VudCkudG9CZSgyKTtcbiAgICAgIGV4cGVjdChjbWRTdGF0cyEubGFzdFVzZWQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NsZWFudXAgYmVoYXZpb3InLCAoKSA9PiB7XG4gICAgbGV0IG1vY2tDb21tYW5kOiBNb2NrQ29tbWFuZDtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja0NvbW1hbmQgPSBuZXcgTW9ja0NvbW1hbmQoe1xuICAgICAgICBuYW1lOiAnY2xlYW51cC10ZXN0JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDbGVhbnVwIHRlc3QgY29tbWFuZCdcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKG1vY2tDb21tYW5kLCAnZGlzcG9zZScpO1xuICAgICAgcmVnaXN0cnkucmVnaXN0ZXJDb21tYW5kKG1vY2tDb21tYW5kKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcG9zZSBhbGwgY29tbWFuZHMgYW5kIGNsZWFyIHJlZ2lzdHJ5IHdoZW4gY2xlYXJlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcmVnaXN0cnkuY2xlYXIoKTtcblxuICAgICAgLy8gQXNzZXJ0IC0gdmVyaWZ5IGNsZWFudXAgYmVoYXZpb3JcbiAgICAgIGV4cGVjdChtb2NrQ29tbWFuZC5kaXNwb3NlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QocmVnaXN0cnkubGlzdCgpKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBleHBlY3QocmVnaXN0cnkuaGFzKCdjbGVhbnVwLXRlc3QnKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgY2xlYXJlZCBldmVudCBhZnRlciBjbGVhbnVwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgcmVnaXN0cnkub24oJ2NsZWFyZWQnLCBtb2NrRXZlbnRIYW5kbGVyKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCByZWdpc3RyeS5jbGVhcigpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgY2xlYW51cCBldmVudCBlbWlzc2lvblxuICAgICAgZXhwZWN0KG1vY2tFdmVudEhhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJvdmlkZSBzdGF0dXMgaW5mb3JtYXRpb24nLCAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHJlZ2lzdHJ5LmdldFN0YXR1cygpO1xuXG4gICAgICAvLyBBc3NlcnQgLSB2ZXJpZnkgc3RhdHVzIHJlcG9ydGluZyBiZWhhdmlvclxuICAgICAgZXhwZWN0KHN0YXR1cykudG9FcXVhbCh7XG4gICAgICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgICAgY29tbWFuZENvdW50OiAxLFxuICAgICAgICBwbHVnaW5Db3VudDogMCxcbiAgICAgICAgYWxpYXNDb3VudDogMCxcbiAgICAgICAgbG9hZGluZ1BhdGhzOiBbXVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9