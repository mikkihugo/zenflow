{"version":3,"names":["cov_1n34bbk4t1","actualCoverage","HiveMindPlannerService","hiveMind","logger","agentManager","agentRegistry","constructor","f","s","generateTaskPlan","request","featureName","designContent","requirements","timeoutMs","b","info","agentManagerResult","tryAgentManagerPlanning","success","plannerAgent","findBestHiveMindAgent","warn","error","plannerType","taskOptions","description","priority","strategy","assignedAgent","id","requiredCapabilities","getRequiredCapabilities","type","metadata","task","submitTask","result","waitForPlanningCompletion","taskMarkdown","agentUsed","Error","message","String","taskPlannerAgents","queryAgents","status","healthThreshold","length","agentId","createAgent","name","capabilities","maxConcurrentTasks","startAgent","planningResult","executePlanningWithAgentManager","stopAgent","agent","planningPrompt","createPlanningPrompt","Date","now","input","prompt","executeTask","output","formatAgentManagerResult","createFallbackTaskPlan","includes","tasks","createStructuredTaskMarkdown","agents","getAgents","availableAgents","filter","architects","specialists","hasRelevantCapabilities","anySpecialists","hasDatabase","test","hasAPI","hasAuth","agentType","taskId","Promise","resolve","startTime","checkInterval","setInterval","clearInterval","getTask","JSON","parse","formatPlanningResult","parseError","createTaskMarkdown","createBasicTaskMarkdown","markdown","Array","isArray","forEach","index","title","acceptance","criteria","dependencies","basicTasks","analysis","recommendations","getStatus","taskPlanners","agentManagerAvailable","agentRegistryAvailable","idleAgents","availableTaskPlanners","availableArchitects","a","availableSpecialists","totalAgents","createWithAgentManager"],"sources":["/home/mhugo/code/claude-code-flow/src/maestro/services/HiveMindPlannerService.ts"],"sourcesContent":["/**\n * Hive Mind Planner Service - Integrated with AgentManager System\n * \n * Leverages existing AgentManager task-planner template and AgentRegistry\n * for intelligent task planning. Follows KISS and SOLID principles.\n * \n * Key Features:\n * - Uses AgentManager task-planner template (lines 501-552 in agent-manager.ts)\n * - Integrates with AgentRegistry for agent selection and coordination\n * - Falls back to hive mind agents when AgentManager agents unavailable\n * - Simple, focused interface following Single Responsibility\n */\n\nimport { HiveMind } from '../../hive-mind/core/HiveMind.js';\nimport { Agent } from '../../hive-mind/core/Agent.js';\nimport { TaskSubmitOptions, AgentCapability } from '../../hive-mind/types.js';\nimport { ILogger } from '../../core/logger.js';\nimport { AgentManager } from '../../agents/agent-manager.js';\nimport { AgentRegistry } from '../../agents/agent-registry.js';\nimport { AgentState } from '../../swarm/types.js';\n\nexport interface PlannerRequest {\n  featureName: string;\n  designContent: string;\n  requirements?: string;\n  timeoutMs?: number;\n}\n\nexport interface PlannerResponse {\n  success: boolean;\n  taskMarkdown?: string;\n  error?: string;\n  agentUsed?: string;\n  plannerType?: 'task-planner' | 'architect' | 'specialist' | 'fallback';\n}\n\n/**\n * Service that coordinates task planning using AgentManager and hive mind agents\n * Follows Single Responsibility Principle - only handles planning coordination\n */\nexport class HiveMindPlannerService {\n\n  constructor(\n    private hiveMind: HiveMind,\n    private logger: ILogger,\n    private agentManager?: AgentManager,\n    private agentRegistry?: AgentRegistry\n  ) {}\n\n  /**\n   * Generate task plan using AgentManager task-planner template or hive mind agents\n   */\n  async generateTaskPlan(request: PlannerRequest): Promise<PlannerResponse> {\n    const { featureName, designContent, requirements, timeoutMs = 90000 } = request;\n\n    this.logger.info(`Generating task plan for ${featureName} using integrated agent systems`);\n\n    try {\n      // First try AgentManager task-planner template\n      if (this.agentManager && this.agentRegistry) {\n        const agentManagerResult = await this.tryAgentManagerPlanning(request);\n        if (agentManagerResult.success) {\n          return agentManagerResult;\n        }\n        this.logger.info('AgentManager planning unavailable, falling back to hive mind agents');\n      }\n\n      // Fallback to hive mind agents\n      const plannerAgent = await this.findBestHiveMindAgent(designContent);\n      \n      if (!plannerAgent) {\n        this.logger.warn('No suitable agents available in either system');\n        return {\n          success: false,\n          error: 'No suitable planner agents available',\n          plannerType: 'fallback'\n        };\n      }\n\n      // Submit planning task to the selected hive mind agent\n      const taskOptions: TaskSubmitOptions = {\n        description: `Generate implementation task breakdown for ${featureName}`,\n        priority: 'medium',\n        strategy: 'sequential',\n        assignedAgent: plannerAgent.id,\n        requiredCapabilities: this.getRequiredCapabilities(plannerAgent.type),\n        metadata: {\n          type: 'task_planning',\n          featureName,\n          designContent,\n          requirements: requirements || '',\n          plannerType: plannerAgent.type\n        }\n      };\n\n      this.logger.info(`Submitting task planning to ${plannerAgent.type} agent: ${plannerAgent.id}`);\n      const task = await this.hiveMind.submitTask(taskOptions);\n\n      // Wait for completion\n      const result = await this.waitForPlanningCompletion(task.id, timeoutMs);\n\n      if (result.success && result.taskMarkdown) {\n        this.logger.info(`Task plan generated successfully for ${featureName} using ${plannerAgent.type}`);\n        return {\n          success: true,\n          taskMarkdown: result.taskMarkdown,\n          agentUsed: plannerAgent.id,\n          plannerType: plannerAgent.type as 'architect' | 'specialist'\n        };\n      }\n\n      return {\n        success: false,\n        error: result.error || 'Planning task failed',\n        agentUsed: plannerAgent.id,\n        plannerType: plannerAgent.type as 'architect' | 'specialist'\n      };\n\n    } catch (error) {\n      this.logger.error(`Hive mind task planning failed for ${featureName}: ${error instanceof Error ? error.message : String(error)}`);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n        plannerType: 'fallback'\n      };\n    }\n  }\n\n  /**\n   * Try using AgentManager task-planner template for planning\n   */\n  private async tryAgentManagerPlanning(request: PlannerRequest): Promise<PlannerResponse> {\n    try {\n      // Query for task-planner agents in registry\n      const taskPlannerAgents = await this.agentRegistry!.queryAgents({\n        type: 'task-planner' as any,\n        status: 'idle',\n        healthThreshold: 0.7\n      });\n\n      if (taskPlannerAgents.length === 0) {\n        // Create new task-planner agent using AgentManager template\n        this.logger.info('Creating new task-planner agent using AgentManager template');\n        const agentId = await this.agentManager!.createAgent('task-planner', {\n          name: `Task Planner for ${request.featureName}`,\n          type: 'task-planner',\n          capabilities: ['project-management', 'task-breakdown', 'agile-planning'],\n          maxConcurrentTasks: 1,\n          priority: 90\n        });\n\n        await this.agentManager!.startAgent(agentId);\n        \n        // Execute planning task\n        const planningResult = await this.executePlanningWithAgentManager(agentId, request);\n        \n        // Cleanup agent after use\n        await this.agentManager!.stopAgent(agentId);\n        \n        return {\n          success: true,\n          taskMarkdown: planningResult,\n          agentUsed: agentId,\n          plannerType: 'task-planner'\n        };\n      } else {\n        // Use existing task-planner agent\n        const agent = taskPlannerAgents[0];\n        this.logger.info(`Using existing task-planner agent: ${agent.id.id}`);\n        \n        const planningResult = await this.executePlanningWithAgentManager(agent.id.id, request);\n        \n        return {\n          success: true,\n          taskMarkdown: planningResult,\n          agentUsed: agent.id.id,\n          plannerType: 'task-planner'\n        };\n      }\n    } catch (error) {\n      this.logger.warn(`AgentManager planning failed: ${error instanceof Error ? error.message : String(error)}`);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n        plannerType: 'fallback'\n      };\n    }\n  }\n\n  /**\n   * Execute planning task using AgentManager infrastructure\n   */\n  private async executePlanningWithAgentManager(agentId: string, request: PlannerRequest): Promise<string> {\n    const planningPrompt = this.createPlanningPrompt(request);\n    \n    // Use AgentManager's task execution capabilities\n    const task = {\n      id: `planning-${request.featureName}-${Date.now()}`,\n      type: 'task-planning',\n      description: `Generate implementation tasks for ${request.featureName}`,\n      input: {\n        featureName: request.featureName,\n        designContent: request.designContent,\n        requirements: request.requirements || '',\n        prompt: planningPrompt\n      },\n      priority: 90,\n      metadata: {\n        type: 'maestro_task_planning',\n        featureName: request.featureName\n      }\n    };\n\n    // Execute through AgentManager\n    const result = await this.agentManager!.executeTask(agentId, task);\n    \n    if (result && result.output) {\n      return this.formatAgentManagerResult(result.output, request.featureName);\n    }\n    \n    return this.createFallbackTaskPlan(request.featureName);\n  }\n\n  /**\n   * Create structured planning prompt for AgentManager agents\n   */\n  private createPlanningPrompt(request: PlannerRequest): string {\n    return `\n# Task Planning Request\n\n## Feature: ${request.featureName}\n\n## Design Content:\n${request.designContent}\n\n${request.requirements ? `## Requirements:\\n${request.requirements}\\n` : ''}\n## Instructions:\nGenerate a comprehensive implementation task breakdown following these guidelines:\n\n1. Create 5-10 specific, actionable tasks\n2. Order tasks by dependency and logical sequence\n3. Include acceptance criteria for each task\n4. Focus on implementation details from the design\n5. Consider testing, documentation, and deployment\n\n## Output Format:\nProvide structured markdown with:\n- Task titles and descriptions\n- Acceptance criteria as checkboxes\n- Implementation notes and dependencies\n\nGenerate the task breakdown now:\n`;\n  }\n\n  /**\n   * Format AgentManager result into consistent markdown\n   */\n  private formatAgentManagerResult(output: any, featureName: string): string {\n    if (typeof output === 'string' && output.includes('# Implementation Tasks')) {\n      return output;\n    }\n\n    // Extract structured content if available\n    if (output && output.tasks) {\n      return this.createStructuredTaskMarkdown(featureName, output.tasks, 'AgentManager task-planner');\n    }\n\n    return this.createFallbackTaskPlan(featureName);\n  }\n\n  /**\n   * Find the best available hive mind agent for task planning (fallback)\n   * Prioritizes: architect > specialist > any available\n   */\n  private async findBestHiveMindAgent(designContent: string): Promise<Agent | null> {\n    const agents = await this.hiveMind.getAgents();\n    const availableAgents = agents.filter(agent => agent.status === 'idle');\n\n    if (availableAgents.length === 0) {\n      this.logger.warn('No idle agents available for task planning');\n      return null;\n    }\n\n    // Priority 1: Look for architect agents (best for system design planning)\n    const architects = availableAgents.filter(agent => agent.type === 'architect');\n    if (architects.length > 0) {\n      this.logger.info(`Found ${architects.length} available architect agent(s) for planning`);\n      return architects[0]; // Return first available architect\n    }\n\n    // Priority 2: Look for specialist agents with relevant capabilities\n    const specialists = availableAgents.filter(agent => \n      agent.type === 'specialist' && \n      this.hasRelevantCapabilities(agent, designContent)\n    );\n    if (specialists.length > 0) {\n      this.logger.info(`Found ${specialists.length} relevant specialist agent(s) for planning`);\n      return specialists[0];\n    }\n\n    // Priority 3: Use any available specialist\n    const anySpecialists = availableAgents.filter(agent => agent.type === 'specialist');\n    if (anySpecialists.length > 0) {\n      this.logger.info(`Using available specialist agent for planning`);\n      return anySpecialists[0];\n    }\n\n    // Priority 4: Use any available agent as fallback\n    this.logger.info(`Using fallback agent for planning: ${availableAgents[0].type}`);\n    return availableAgents[0];\n  }\n\n  /**\n   * Check if agent has capabilities relevant to the design content\n   */\n  private hasRelevantCapabilities(agent: Agent, designContent: string): boolean {\n    const capabilities = agent.capabilities || [];\n    \n    // Check for system design capabilities\n    if (capabilities.includes('system_design' as AgentCapability) || \n        capabilities.includes('architecture_patterns' as AgentCapability)) {\n      return true;\n    }\n\n    // Check for task management capabilities\n    if (capabilities.includes('task_management' as AgentCapability)) {\n      return true;\n    }\n\n    // Check for domain expertise based on design content\n    const hasDatabase = /database|sql|storage/i.test(designContent);\n    const hasAPI = /api|endpoint|rest/i.test(designContent);\n    const hasAuth = /auth|security|permission/i.test(designContent);\n\n    if (hasDatabase && capabilities.includes('data_analysis' as AgentCapability)) {\n      return true;\n    }\n\n    if (hasAPI && capabilities.includes('integration_planning' as AgentCapability)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Get required capabilities based on agent type\n   */\n  private getRequiredCapabilities(agentType: string): AgentCapability[] {\n    switch (agentType) {\n      case 'architect':\n        return ['system_design', 'architecture_patterns', 'integration_planning'];\n      case 'specialist':\n        return ['domain_expertise', 'problem_solving', 'task_management'];\n      default:\n        return ['task_management', 'information_gathering'];\n    }\n  }\n\n  /**\n   * Wait for planning task completion with timeout\n   */\n  private async waitForPlanningCompletion(taskId: string, timeoutMs: number): Promise<{\n    success: boolean;\n    taskMarkdown?: string;\n    error?: string;\n  }> {\n    return new Promise((resolve) => {\n      const startTime = Date.now();\n      \n      const checkInterval = setInterval(async () => {\n        try {\n          // Check timeout\n          if (Date.now() - startTime > timeoutMs) {\n            clearInterval(checkInterval);\n            resolve({ success: false, error: 'Planning task timeout' });\n            return;\n          }\n\n          // Check task status\n          const task = await this.hiveMind.getTask(taskId);\n          \n          if (task.status === 'completed') {\n            clearInterval(checkInterval);\n            \n            try {\n              const result = task.result ? JSON.parse(task.result) : null;\n              const taskMarkdown = this.formatPlanningResult(result, task.metadata);\n              resolve({ success: true, taskMarkdown });\n            } catch (parseError) {\n              resolve({ success: false, error: 'Failed to parse planning result' });\n            }\n            \n          } else if (task.status === 'failed') {\n            clearInterval(checkInterval);\n            resolve({ success: false, error: task.error || 'Planning task failed' });\n          }\n          \n        } catch (error) {\n          clearInterval(checkInterval);\n          resolve({ success: false, error: error instanceof Error ? error.message : String(error) });\n        }\n      }, 3000); // Check every 3 seconds\n    });\n  }\n\n  /**\n   * Format planning result into structured markdown\n   */\n  private formatPlanningResult(result: any, metadata: any): string {\n    const featureName = metadata?.featureName || 'Feature';\n    const plannerType = metadata?.plannerType || 'agent';\n\n    // If the result already contains structured markdown, use it\n    if (result && typeof result === 'string' && result.includes('# Implementation Tasks')) {\n      return result;\n    }\n\n    // If result contains task breakdown, format it\n    if (result && result.tasks) {\n      return this.createTaskMarkdown(featureName, result.tasks, plannerType);\n    }\n\n    // Create basic task structure from agent analysis\n    return this.createBasicTaskMarkdown(featureName, result, plannerType);\n  }\n\n  /**\n   * Create structured task markdown from AgentManager or hive mind results\n   */\n  private createStructuredTaskMarkdown(featureName: string, tasks: any[], plannerType: string): string {\n    let markdown = `# Implementation Tasks for ${featureName}\\n\\n`;\n    markdown += `*Generated by ${plannerType} agent*\\n\\n`;\n\n    if (Array.isArray(tasks)) {\n      tasks.forEach((task, index) => {\n        markdown += `## Task ${index + 1}: ${task.title || task.name || `Task ${index + 1}`}\\n\\n`;\n        if (task.description) {\n          markdown += `${task.description}\\n\\n`;\n        }\n        if (task.acceptance && Array.isArray(task.acceptance)) {\n          markdown += `**Acceptance Criteria:**\\n`;\n          task.acceptance.forEach(criteria => {\n            markdown += `- [ ] ${criteria}\\n`;\n          });\n          markdown += '\\n';\n        }\n        if (task.dependencies) {\n          markdown += `**Dependencies:** ${task.dependencies}\\n\\n`;\n        }\n      });\n    }\n\n    return markdown;\n  }\n\n  /**\n   * Create structured task breakdown from detailed result (legacy method)\n   */\n  private createTaskMarkdown(featureName: string, tasks: any[], plannerType: string): string {\n    let markdown = `# Implementation Tasks for ${featureName}\\n\\n`;\n    markdown += `*Generated by hive mind ${plannerType} agent*\\n\\n`;\n\n    if (Array.isArray(tasks)) {\n      tasks.forEach((task, index) => {\n        markdown += `## Task ${index + 1}: ${task.title || `Task ${index + 1}`}\\n\\n`;\n        if (task.description) {\n          markdown += `${task.description}\\n\\n`;\n        }\n        if (task.acceptance && Array.isArray(task.acceptance)) {\n          markdown += `**Acceptance Criteria:**\\n`;\n          task.acceptance.forEach(criteria => {\n            markdown += `- [ ] ${criteria}\\n`;\n          });\n          markdown += '\\n';\n        }\n      });\n    }\n\n    return markdown;\n  }\n\n  /**\n   * Create fallback task plan when agents unavailable\n   */\n  private createFallbackTaskPlan(featureName: string): string {\n    const basicTasks = [\n      'Set up project structure and dependencies',\n      'Implement core data models and interfaces', \n      'Create API endpoints and routing',\n      'Implement business logic and validation',\n      'Add comprehensive testing suite',\n      'Create documentation and examples',\n      'Integration testing and deployment preparation'\n    ];\n\n    let markdown = `# Implementation Tasks for ${featureName}\\n\\n`;\n    markdown += `*Generated by fallback task generation*\\n\\n`;\n    markdown += `## Task Breakdown\\n\\n`;\n    \n    basicTasks.forEach((task, index) => {\n      markdown += `### ${index + 1}. ${task}\\n\\n`;\n      markdown += `**Status**: Pending\\n\\n`;\n      markdown += `**Acceptance Criteria:**\\n`;\n      markdown += `- [ ] Task completed successfully\\n`;\n      markdown += `- [ ] Code reviewed and tested\\n\\n`;\n    });\n\n    return markdown;\n  }\n\n  /**\n   * Create basic task markdown from simple result (legacy method)\n   */\n  private createBasicTaskMarkdown(featureName: string, result: any, plannerType: string): string {\n    const basicTasks = [\n      'Set up project structure and dependencies',\n      'Implement core data models and interfaces', \n      'Create API endpoints and routing',\n      'Implement business logic and validation',\n      'Add comprehensive testing suite',\n      'Create documentation and examples',\n      'Integration testing and deployment preparation'\n    ];\n\n    let markdown = `# Implementation Tasks for ${featureName}\\n\\n`;\n    markdown += `*Generated by hive mind ${plannerType} agent*\\n\\n`;\n\n    if (result && result.analysis) {\n      markdown += `## Analysis\\n\\n${result.analysis}\\n\\n`;\n    }\n\n    markdown += `## Task Breakdown\\n\\n`;\n    basicTasks.forEach((task, index) => {\n      markdown += `### ${index + 1}. ${task}\\n\\n`;\n      markdown += `**Status**: Pending\\n\\n`;\n    });\n\n    if (result && result.recommendations) {\n      markdown += `## Recommendations\\n\\n${result.recommendations}\\n\\n`;\n    }\n\n    return markdown;\n  }\n\n  /**\n   * Get status of integrated planning service\n   */\n  async getStatus(): Promise<{\n    availableTaskPlanners: number;\n    availableArchitects: number;\n    availableSpecialists: number;\n    totalAgents: number;\n    agentManagerAvailable: boolean;\n    agentRegistryAvailable: boolean;\n  }> {\n    try {\n      let taskPlanners = 0;\n      let agentManagerAvailable = false;\n      let agentRegistryAvailable = false;\n\n      // Check AgentManager system\n      if (this.agentManager && this.agentRegistry) {\n        try {\n          const taskPlannerAgents = await this.agentRegistry.queryAgents({\n            type: 'task-planner' as any,\n            status: 'idle'\n          });\n          taskPlanners = taskPlannerAgents.length;\n          agentManagerAvailable = true;\n          agentRegistryAvailable = true;\n        } catch (error) {\n          this.logger.warn(`AgentRegistry query failed: ${error instanceof Error ? error.message : String(error)}`);\n        }\n      }\n\n      // Check hive mind agents\n      const agents = await this.hiveMind.getAgents();\n      const idleAgents = agents.filter(agent => agent.status === 'idle');\n      \n      return {\n        availableTaskPlanners: taskPlanners,\n        availableArchitects: idleAgents.filter(a => a.type === 'architect').length,\n        availableSpecialists: idleAgents.filter(a => a.type === 'specialist').length,\n        totalAgents: agents.length + taskPlanners,\n        agentManagerAvailable,\n        agentRegistryAvailable\n      };\n    } catch (error) {\n      this.logger.error(`Failed to get planner service status: ${error instanceof Error ? error.message : String(error)}`);\n      return { \n        availableTaskPlanners: 0,\n        availableArchitects: 0, \n        availableSpecialists: 0, \n        totalAgents: 0,\n        agentManagerAvailable: false,\n        agentRegistryAvailable: false\n      };\n    }\n  }\n\n  /**\n   * Factory method to create service with AgentManager integration\n   */\n  static createWithAgentManager(\n    hiveMind: HiveMind,\n    logger: ILogger,\n    agentManager: AgentManager,\n    agentRegistry: AgentRegistry\n  ): HiveMindPlannerService {\n    return new HiveMindPlannerService(hiveMind, logger, agentManager, agentRegistry);\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}