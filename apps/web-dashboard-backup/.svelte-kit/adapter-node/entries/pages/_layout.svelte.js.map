{"version":3,"file":"_layout.svelte.js","sources":["../../../../../src/lib/stores/websocket.ts","../../../../../src/lib/components/CommandPalette.svelte","../../../../../src/routes/+layout.svelte"],"sourcesContent":["/**\n * @file WebSocket store for real-time communication\n * \n * Provides reactive WebSocket connection management for the web dashboard\n */\n\nimport { writable } from 'svelte/store';\nimport { browser } from '$app/environment';\n\ninterface WebSocketState {\n  connected: boolean;\n  socket: WebSocket | null;\n  error: string | null;\n}\n\nconst initialState: WebSocketState = {\n  connected: false,\n  socket: null,\n  error: null\n};\n\nfunction createWebSocketStore() {\n  const { subscribe, set, update } = writable<WebSocketState>(initialState);\n\n  let reconnectTimer: NodeJS.Timeout | null = null;\n  const RECONNECT_DELAY = 3000;\n\n  function connect(url?: string) {\n    if (!browser) return;\n\n    const wsUrl = url || `ws://localhost:3000/ws`;\n    \n    try {\n      const socket = new WebSocket(wsUrl);\n      \n      socket.onopen = () => {\n        update(state => ({\n          ...state,\n          connected: true,\n          socket,\n          error: null\n        }));\n        \n        if (reconnectTimer) {\n          clearTimeout(reconnectTimer);\n          reconnectTimer = null;\n        }\n      };\n\n      socket.onclose = () => {\n        update(state => ({\n          ...state,\n          connected: false,\n          socket: null\n        }));\n        \n        // Auto-reconnect\n        if (!reconnectTimer) {\n          reconnectTimer = setTimeout(() => {\n            connect(url);\n          }, RECONNECT_DELAY);\n        }\n      };\n\n      socket.onerror = (error) => {\n        update(state => ({\n          ...state,\n          error: `WebSocket error: ${error}`,\n          connected: false\n        }));\n      };\n\n      socket.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          // Handle incoming messages\n          console.log('WebSocket message:', data);\n        } catch (error) {\n          console.error('Failed to parse WebSocket message:', error);\n        }\n      };\n\n    } catch (error) {\n      update(state => ({\n        ...state,\n        error: `Failed to connect: ${error}`,\n        connected: false\n      }));\n    }\n  }\n\n  function disconnect() {\n    update(state => {\n      if (state.socket) {\n        state.socket.close();\n      }\n      return {\n        ...state,\n        connected: false,\n        socket: null\n      };\n    });\n    \n    if (reconnectTimer) {\n      clearTimeout(reconnectTimer);\n      reconnectTimer = null;\n    }\n  }\n\n  function send(data: any) {\n    update(state => {\n      if (state.socket && state.connected) {\n        state.socket.send(JSON.stringify(data));\n      }\n      return state;\n    });\n  }\n\n  return {\n    subscribe,\n    connect,\n    disconnect,\n    send\n  };\n}\n\nexport const websocketStore = createWebSocketStore();","<script lang=\"ts\">\n  import { createEventDispatcher, onMount } from 'svelte';\n  import { websocketStore } from '$stores/websocket';\n  \n  const dispatch = createEventDispatcher();\n  \n  export let isOpen = false;\n  \n  let searchQuery = '';\n  let selectedIndex = 0;\n  let commandInput: HTMLInputElement;\n  \n  // Command categories and actions\n  const commands = [\n    // File Operations\n    { id: 'file.new', title: 'New File', description: 'Create a new file', category: 'File', icon: '📄', shortcut: 'Ctrl+N' },\n    { id: 'file.open', title: 'Open File', description: 'Open an existing file', category: 'File', icon: '📂', shortcut: 'Ctrl+O' },\n    { id: 'file.save', title: 'Save File', description: 'Save current file', category: 'File', icon: '💾', shortcut: 'Ctrl+S' },\n    { id: 'file.saveAll', title: 'Save All', description: 'Save all open files', category: 'File', icon: '💾', shortcut: 'Ctrl+Shift+S' },\n    \n    // Project Operations\n    { id: 'project.build', title: 'Build Project', description: 'Build the entire project', category: 'Project', icon: '🔨', shortcut: 'Ctrl+Shift+B' },\n    { id: 'project.test', title: 'Run Tests', description: 'Execute test suite', category: 'Project', icon: '🧪', shortcut: 'Ctrl+Shift+T' },\n    { id: 'project.lint', title: 'Lint Code', description: 'Run code linting', category: 'Project', icon: '🔍', shortcut: 'Ctrl+Shift+L' },\n    { id: 'project.format', title: 'Format Code', description: 'Format all code files', category: 'Project', icon: '✨', shortcut: 'Ctrl+Shift+F' },\n    \n    // Swarm Operations\n    { id: 'swarm.init', title: 'Initialize Swarm', description: 'Create a new AI swarm', category: 'Swarm', icon: '🐝', shortcut: 'Ctrl+Shift+I' },\n    { id: 'swarm.spawn', title: 'Spawn Agent', description: 'Add a new agent to swarm', category: 'Swarm', icon: '🤖', shortcut: 'Ctrl+Shift+A' },\n    { id: 'swarm.status', title: 'Swarm Status', description: 'View swarm coordination status', category: 'Swarm', icon: '📊', shortcut: 'Ctrl+Shift+M' },\n    { id: 'swarm.monitor', title: 'Monitor Swarm', description: 'Real-time swarm monitoring', category: 'Swarm', icon: '👀', shortcut: 'Ctrl+Shift+W' },\n    \n    // Development Operations  \n    { id: 'dev.server', title: 'Start Dev Server', description: 'Start development server', category: 'Dev', icon: '🚀', shortcut: 'F5' },\n    { id: 'dev.stop', title: 'Stop Dev Server', description: 'Stop development server', category: 'Dev', icon: '🛑', shortcut: 'Shift+F5' },\n    { id: 'dev.restart', title: 'Restart Server', description: 'Restart development server', category: 'Dev', icon: '🔄', shortcut: 'Ctrl+F5' },\n    { id: 'dev.logs', title: 'View Logs', description: 'Open development logs', category: 'Dev', icon: '📝', shortcut: 'Ctrl+Shift+U' },\n    \n    // Navigation\n    { id: 'nav.explorer', title: 'File Explorer', description: 'Open file explorer', category: 'Navigation', icon: '🗂️', shortcut: 'Ctrl+Shift+E' },\n    { id: 'nav.terminal', title: 'Terminal', description: 'Open integrated terminal', category: 'Navigation', icon: '💻', shortcut: 'Ctrl+`' },\n    { id: 'nav.search', title: 'Search Files', description: 'Search across project files', category: 'Navigation', icon: '🔍', shortcut: 'Ctrl+Shift+F' },\n    { id: 'nav.go-to-file', title: 'Go to File', description: 'Quick file navigation', category: 'Navigation', icon: '📄', shortcut: 'Ctrl+P' },\n    \n    // Settings\n    { id: 'settings.preferences', title: 'Preferences', description: 'Open user preferences', category: 'Settings', icon: '⚙️', shortcut: 'Ctrl+,' },\n    { id: 'settings.workspace', title: 'Workspace Settings', description: 'Configure workspace', category: 'Settings', icon: '🏗️', shortcut: 'Ctrl+Shift+,' },\n    { id: 'settings.theme', title: 'Change Theme', description: 'Switch color theme', category: 'Settings', icon: '🎨', shortcut: 'Ctrl+K Ctrl+T' },\n    \n    // Advanced\n    { id: 'advanced.neural', title: 'Neural Training', description: 'Start neural pattern training', category: 'Advanced', icon: '🧠', shortcut: 'Ctrl+Shift+N' },\n    { id: 'advanced.benchmark', title: 'Run Benchmarks', description: 'Performance benchmarking', category: 'Advanced', icon: '⚡', shortcut: 'Ctrl+Shift+B' },\n    { id: 'advanced.export', title: 'Export Project', description: 'Export project data', category: 'Advanced', icon: '📦', shortcut: 'Ctrl+Shift+E' },\n  ];\n  \n  // Filter commands based on search query\n  $: filteredCommands = searchQuery \n    ? commands.filter(cmd => \n        cmd.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        cmd.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        cmd.category.toLowerCase().includes(searchQuery.toLowerCase())\n      )\n    : commands;\n    \n  // Group commands by category\n  $: groupedCommands = filteredCommands.reduce((groups, cmd) => {\n    if (!groups[cmd.category]) {\n      groups[cmd.category] = [];\n    }\n    groups[cmd.category].push(cmd);\n    return groups;\n  }, {} as Record<string, typeof commands>);\n  \n  // Handle keyboard navigation\n  function handleKeydown(event: KeyboardEvent) {\n    if (!isOpen) return;\n    \n    const totalCommands = filteredCommands.length;\n    \n    switch (event.key) {\n      case 'Escape':\n        event.preventDefault();\n        close();\n        break;\n        \n      case 'ArrowDown':\n        event.preventDefault();\n        selectedIndex = (selectedIndex + 1) % totalCommands;\n        break;\n        \n      case 'ArrowUp':\n        event.preventDefault();\n        selectedIndex = selectedIndex === 0 ? totalCommands - 1 : selectedIndex - 1;\n        break;\n        \n      case 'Enter':\n        event.preventDefault();\n        if (filteredCommands[selectedIndex]) {\n          executeCommand(filteredCommands[selectedIndex]);\n        }\n        break;\n        \n      case 'Tab':\n        event.preventDefault();\n        // Auto-complete with first result\n        if (filteredCommands[0]) {\n          searchQuery = filteredCommands[0].title;\n        }\n        break;\n    }\n  }\n  \n  // Execute selected command\n  async function executeCommand(command: typeof commands[0]) {\n    console.log(`🎯 Executing command: ${command.id}`);\n    \n    try {\n      // Send command to backend via WebSocket\n      if ($websocketStore.socket) {\n        $websocketStore.socket.emit('command', {\n          id: command.id,\n          title: command.title,\n          timestamp: Date.now()\n        });\n      }\n      \n      // Handle specific commands using real workspace API\n      switch (command.id) {\n        case 'file.new':\n          await createNewFile();\n          break;\n          \n        case 'file.open':\n          await openFileDialog();\n          break;\n          \n        case 'project.build':\n          await executeProjectCommand('npm', ['run', 'build']);\n          break;\n          \n        case 'project.test':\n          await executeProjectCommand('npm', ['test']);\n          break;\n          \n        case 'project.lint':\n          await executeProjectCommand('npm', ['run', 'lint']);\n          break;\n          \n        case 'project.format':\n          await executeProjectCommand('npm', ['run', 'format']);\n          break;\n          \n        case 'swarm.init':\n          await initializeSwarm();\n          break;\n          \n        case 'swarm.spawn':\n          await spawnAgent();\n          break;\n          \n        case 'swarm.status':\n          await showSwarmStatus();\n          break;\n          \n        case 'dev.server':\n          await executeProjectCommand('npm', ['run', 'dev']);\n          break;\n          \n        case 'dev.restart':\n          await executeProjectCommand('npm', ['run', 'dev:watch']);\n          break;\n          \n        case 'nav.explorer':\n          await showFileExplorer();\n          break;\n          \n        case 'nav.go-to-file':\n          await showGoToFile();\n          break;\n          \n        case 'nav.search':\n          await showFileSearch();\n          break;\n          \n        case 'nav.terminal':\n          await openTerminal();\n          break;\n          \n        case 'settings.preferences':\n          await openSettings();\n          break;\n          \n        case 'advanced.neural':\n          await startNeuralTraining();\n          break;\n          \n        case 'advanced.benchmark':\n          await runBenchmarks();\n          break;\n          \n        default:\n          console.log(`Command ${command.id} not implemented yet`);\n          showToast(`Command ${command.title} is not yet implemented`, 'info');\n      }\n      \n      // Close palette after execution\n      close();\n      \n    } catch (error) {\n      console.error('Command execution failed:', error);\n      showToast(`Command failed: ${error.message}`, 'error');\n    }\n  }\n\n  // Command implementations using workspace API\n  async function createNewFile() {\n    const fileName = prompt('Enter file name:', 'new-file.ts');\n    if (fileName) {\n      const template = getFileTemplate(fileName);\n      const response = await fetch('/api/workspace/files', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ \n          path: fileName, \n          template: template,\n          content: '' \n        })\n      });\n      \n      if (response.ok) {\n        showToast(`File created: ${fileName}`, 'success');\n        dispatch('file-created', { fileName });\n      } else {\n        throw new Error('Failed to create file');\n      }\n    }\n  }\n\n  async function openFileDialog() {\n    // Get recent files to show in dialog\n    const response = await fetch('/api/workspace/recent');\n    const data = await response.json();\n    \n    if (data.files.length > 0) {\n      const fileList = data.files.map(f => f.name).join('\\n');\n      const fileName = prompt(`Select file to open:\\n${fileList}\\n\\nOr enter file path:`);\n      \n      if (fileName) {\n        dispatch('file-open', { fileName });\n        showToast(`Opening: ${fileName}`, 'info');\n      }\n    } else {\n      const fileName = prompt('Enter file path to open:');\n      if (fileName) {\n        dispatch('file-open', { fileName });\n      }\n    }\n  }\n\n  async function executeProjectCommand(command: string, args: string[] = []) {\n    showToast(`Executing: ${command} ${args.join(' ')}`, 'info');\n    \n    const response = await fetch('/api/workspace/project/commands', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ command, args })\n    });\n    \n    const result = await response.json();\n    \n    if (result.success) {\n      showToast(`Command completed successfully`, 'success');\n      console.log('Command output:', result.stdout);\n    } else {\n      showToast(`Command failed (exit code: ${result.exitCode})`, 'error');\n      console.error('Command error:', result.stderr);\n    }\n  }\n\n  async function initializeSwarm() {\n    const response = await fetch('/api/swarms', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        name: `Swarm-${Date.now()}`,\n        topology: 'hierarchical',\n        maxAgents: 6\n      })\n    });\n    \n    if (response.ok) {\n      showToast('Swarm initialized successfully', 'success');\n      dispatch('swarm-initialized');\n    } else {\n      throw new Error('Failed to initialize swarm');\n    }\n  }\n\n  async function spawnAgent() {\n    const agentType = prompt('Enter agent type (researcher, coder, analyst, tester, coordinator):');\n    if (agentType) {\n      showToast(`Spawning ${agentType} agent...`, 'info');\n      // Implementation would go here\n    }\n  }\n\n  async function showSwarmStatus() {\n    dispatch('show-swarm-status');\n    showToast('Opening swarm status panel', 'info');\n  }\n\n  async function showFileExplorer() {\n    const response = await fetch('/api/workspace/files');\n    const data = await response.json();\n    \n    dispatch('show-file-explorer', { files: data.files });\n    showToast('Opening file explorer', 'info');\n  }\n\n  async function showGoToFile() {\n    const response = await fetch('/api/workspace/search/files?q=&limit=20');\n    const data = await response.json();\n    \n    dispatch('show-go-to-file', { files: data.results });\n    showToast('Opening Go to File dialog', 'info');\n  }\n\n  async function showFileSearch() {\n    const query = prompt('Search for files:');\n    if (query) {\n      const response = await fetch(`/api/workspace/search/files?q=${encodeURIComponent(query)}`);\n      const data = await response.json();\n      \n      dispatch('show-search-results', { query, results: data.results });\n      showToast(`Found ${data.count} files matching \"${query}\"`, 'info');\n    }\n  }\n\n  async function openTerminal() {\n    showToast('Opening integrated terminal...', 'info');\n    dispatch('open-terminal');\n  }\n\n  async function openSettings() {\n    dispatch('open-settings');\n    showToast('Opening preferences', 'info');\n  }\n\n  async function startNeuralTraining() {\n    showToast('Starting neural pattern training...', 'info');\n    dispatch('start-neural-training');\n  }\n\n  async function runBenchmarks() {\n    await executeProjectCommand('npm', ['run', 'benchmark']);\n  }\n\n  // Utility functions\n  function getFileTemplate(fileName: string): string | undefined {\n    const ext = fileName.split('.').pop()?.toLowerCase();\n    \n    switch (ext) {\n      case 'ts': return 'typescript';\n      case 'tsx': return 'react';\n      case 'svelte': return 'svelte';\n      case 'md': return 'markdown';\n      default: return undefined;\n    }\n  }\n\n  function showToast(message: string, type: 'info' | 'success' | 'error' = 'info') {\n    // Simple toast notification - could be enhanced with a proper toast system\n    console.log(`[${type.toUpperCase()}] ${message}`);\n    \n    // Dispatch event for toast notifications\n    dispatch('toast', { message, type });\n  }\n  \n  function close() {\n    isOpen = false;\n    searchQuery = '';\n    selectedIndex = 0;\n    dispatch('close');\n  }\n  \n  // Focus input when opened\n  $: if (isOpen && commandInput) {\n    commandInput.focus();\n  }\n  \n  // Global keyboard listener\n  onMount(() => {\n    function handleGlobalKeydown(event: KeyboardEvent) {\n      // Ctrl+Shift+P to open command palette\n      if (event.ctrlKey && event.shiftKey && event.key === 'P') {\n        event.preventDefault();\n        isOpen = !isOpen;\n      }\n    }\n    \n    window.addEventListener('keydown', handleGlobalKeydown);\n    return () => window.removeEventListener('keydown', handleGlobalKeydown);\n  });\n</script>\n\n<svelte:window on:keydown={handleKeydown} />\n\n{#if isOpen}\n  <!-- Backdrop -->\n  <!-- svelte-ignore a11y-click-events-have-key-events -->\n  <!-- svelte-ignore a11y-no-static-element-interactions -->\n  <div class=\"command-palette-backdrop\" on:click={close}>\n    <!-- Command Palette Modal -->\n    <!-- svelte-ignore a11y-click-events-have-key-events -->\n    <!-- svelte-ignore a11y-no-static-element-interactions -->\n    <div class=\"command-palette\" on:click|stopPropagation>\n      <!-- Search Input -->\n      <div class=\"search-container\">\n        <div class=\"search-icon\">🔍</div>\n        <input\n          bind:this={commandInput}\n          bind:value={searchQuery}\n          placeholder=\"Type a command or search...\"\n          class=\"search-input\"\n          autocomplete=\"off\"\n          spellcheck=\"false\"\n        />\n        <div class=\"search-shortcut\">Ctrl+Shift+P</div>\n      </div>\n      \n      <!-- Commands List -->\n      <div class=\"commands-container\">\n        {#if filteredCommands.length === 0}\n          <div class=\"no-results\">\n            <div class=\"no-results-icon\">🔍</div>\n            <div class=\"no-results-text\">No commands found</div>\n            <div class=\"no-results-hint\">Try searching for something else</div>\n          </div>\n        {:else}\n          {#each Object.entries(groupedCommands) as [category, categoryCommands], categoryIndex}\n            <div class=\"command-category\">\n              <div class=\"category-header\">{category}</div>\n              {#each categoryCommands as command, commandIndex}\n                {@const globalIndex = filteredCommands.indexOf(command)}\n                <!-- svelte-ignore a11y-click-events-have-key-events -->\n                <!-- svelte-ignore a11y-no-static-element-interactions -->\n                <div \n                  class=\"command-item\"\n                  class:selected={globalIndex === selectedIndex}\n                  on:click={() => executeCommand(command)}\n                  on:mouseenter={() => selectedIndex = globalIndex}\n                >\n                  <div class=\"command-main\">\n                    <div class=\"command-icon\">{command.icon}</div>\n                    <div class=\"command-info\">\n                      <div class=\"command-title\">{command.title}</div>\n                      <div class=\"command-description\">{command.description}</div>\n                    </div>\n                  </div>\n                  <div class=\"command-shortcut\">{command.shortcut}</div>\n                </div>\n              {/each}\n            </div>\n          {/each}\n        {/if}\n      </div>\n      \n      <!-- Footer -->\n      <div class=\"command-footer\">\n        <div class=\"footer-shortcuts\">\n          <span><kbd>↑↓</kbd> Navigate</span>\n          <span><kbd>Enter</kbd> Execute</span>\n          <span><kbd>Tab</kbd> Complete</span>\n          <span><kbd>Esc</kbd> Close</span>\n        </div>\n        <div class=\"footer-info\">\n          {filteredCommands.length} commands available\n        </div>\n      </div>\n    </div>\n  </div>\n{/if}\n\n<style>\n  .command-palette-backdrop {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.6);\n    backdrop-filter: blur(4px);\n    z-index: 10000;\n    display: flex;\n    align-items: flex-start;\n    justify-content: center;\n    padding-top: 15vh;\n    animation: fadeIn 0.2s ease;\n  }\n  \n  .command-palette {\n    background: var(--bg-secondary);\n    border: 1px solid var(--border-primary);\n    border-radius: 12px;\n    width: 100%;\n    max-width: 600px;\n    max-height: 70vh;\n    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n    animation: slideUp 0.3s ease;\n    overflow: hidden;\n  }\n  \n  .search-container {\n    display: flex;\n    align-items: center;\n    padding: 16px 20px;\n    border-bottom: 1px solid var(--border-primary);\n    gap: 12px;\n  }\n  \n  .search-icon {\n    font-size: 18px;\n    opacity: 0.7;\n  }\n  \n  .search-input {\n    flex: 1;\n    background: transparent;\n    border: none;\n    outline: none;\n    font-size: 16px;\n    color: var(--text-primary);\n    font-family: inherit;\n  }\n  \n  .search-input::placeholder {\n    color: var(--text-muted);\n  }\n  \n  .search-shortcut {\n    font-size: 12px;\n    color: var(--text-muted);\n    background: var(--bg-tertiary);\n    padding: 4px 8px;\n    border-radius: 4px;\n    font-family: 'SF Mono', Consolas, monospace;\n  }\n  \n  .commands-container {\n    max-height: 400px;\n    overflow-y: auto;\n    padding: 8px 0;\n  }\n  \n  .command-category {\n    margin-bottom: 16px;\n  }\n  \n  .category-header {\n    padding: 8px 20px 4px 20px;\n    font-size: 12px;\n    font-weight: 600;\n    color: var(--text-muted);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n  }\n  \n  .command-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px 20px;\n    margin: 0 8px;\n    border-radius: 6px;\n    cursor: pointer;\n    transition: all 0.15s ease;\n  }\n  \n  .command-item:hover,\n  .command-item.selected {\n    background: var(--bg-tertiary);\n    transform: translateX(2px);\n  }\n  \n  .command-item.selected {\n    background: var(--accent-primary);\n    color: white;\n  }\n  \n  .command-main {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    flex: 1;\n  }\n  \n  .command-icon {\n    font-size: 16px;\n    width: 20px;\n    text-align: center;\n  }\n  \n  .command-info {\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n  }\n  \n  .command-title {\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 1.2;\n  }\n  \n  .command-description {\n    font-size: 12px;\n    opacity: 0.8;\n    line-height: 1.3;\n  }\n  \n  .command-item.selected .command-description {\n    opacity: 0.9;\n  }\n  \n  .command-shortcut {\n    font-size: 11px;\n    color: var(--text-muted);\n    background: var(--bg-primary);\n    padding: 2px 6px;\n    border-radius: 3px;\n    font-family: 'SF Mono', Consolas, monospace;\n    font-weight: 500;\n    white-space: nowrap;\n  }\n  \n  .command-item.selected .command-shortcut {\n    background: rgba(255, 255, 255, 0.2);\n    color: white;\n  }\n  \n  .no-results {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 40px 20px;\n    text-align: center;\n  }\n  \n  .no-results-icon {\n    font-size: 48px;\n    opacity: 0.3;\n    margin-bottom: 16px;\n  }\n  \n  .no-results-text {\n    font-size: 16px;\n    font-weight: 500;\n    margin-bottom: 4px;\n    color: var(--text-primary);\n  }\n  \n  .no-results-hint {\n    font-size: 14px;\n    color: var(--text-muted);\n  }\n  \n  .command-footer {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 12px 20px;\n    border-top: 1px solid var(--border-primary);\n    background: var(--bg-primary);\n  }\n  \n  .footer-shortcuts {\n    display: flex;\n    gap: 16px;\n    font-size: 12px;\n    color: var(--text-muted);\n  }\n  \n  .footer-shortcuts kbd {\n    background: var(--bg-secondary);\n    border: 1px solid var(--border-primary);\n    border-radius: 3px;\n    padding: 2px 4px;\n    font-size: 10px;\n    font-family: 'SF Mono', Consolas, monospace;\n  }\n  \n  .footer-info {\n    font-size: 12px;\n    color: var(--text-muted);\n  }\n  \n  /* Animations */\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n  \n  @keyframes slideUp {\n    from { \n      opacity: 0; \n      transform: translateY(20px) scale(0.95); \n    }\n    to { \n      opacity: 1; \n      transform: translateY(0) scale(1); \n    }\n  }\n  \n  /* Responsive */\n  @media (max-width: 768px) {\n    .command-palette-backdrop {\n      padding: 10px;\n      padding-top: 10vh;\n    }\n    \n    .command-palette {\n      max-height: 80vh;\n    }\n    \n    .footer-shortcuts {\n      display: none;\n    }\n  }\n</style>","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { page } from '$app/stores';\n  import '$lib/styles/app.css';\n  import CommandPalette from '$components/CommandPalette.svelte';\n  \n  let commandPaletteOpen = false;\n  \n  // Initialize WebSocket connection on app load\n  onMount(() => {\n    // Connect to existing WebSocket system\n    console.log('🚀 Svelte dashboard initialized');\n  });\n  \n  // Handle command palette events\n  function handleCommandPaletteClose() {\n    commandPaletteOpen = false;\n  }\n  \n  function handleFileNew() {\n    console.log('🆕 Creating new file...');\n    // Implement file creation logic\n  }\n</script>\n\n<div class=\"app\">\n  <header class=\"header\">\n    <div class=\"header-content\">\n      <h1>🧠 claude-code-zen</h1>\n      <p>AI-Powered Development Toolkit</p>\n      <div class=\"status-indicator\">\n        <span class=\"status-dot active\"></span>\n        Real-time Dashboard\n      </div>\n    </div>\n  </header>\n\n  <nav class=\"nav\">\n    <a href=\"/\" class:active={$page.url.pathname === '/'}>\n      <span class=\"icon\">🏠</span>\n      Dashboard\n    </a>\n    <a href=\"/workspace\" class:active={$page.url.pathname === '/workspace'}>\n      <span class=\"icon\">🗂️</span>\n      Workspace\n    </a>\n    <a href=\"/status\" class:active={$page.url.pathname === '/status'}>\n      <span class=\"icon\">⚡</span>\n      System Status\n    </a>\n    <a href=\"/swarm\" class:active={$page.url.pathname === '/swarm'}>\n      <span class=\"icon\">🐝</span>\n      Swarm Management\n    </a>\n    <a href=\"/performance\" class:active={$page.url.pathname === '/performance'}>\n      <span class=\"icon\">📊</span>\n      Performance\n    </a>\n    <a href=\"/logs\" class:active={$page.url.pathname === '/logs'}>\n      <span class=\"icon\">📝</span>\n      Live Logs\n    </a>\n    <a href=\"/dev-communication\" class:active={$page.url.pathname === '/dev-communication'}>\n      <span class=\"icon\">💬</span>\n      Dev Communication\n    </a>\n    <a href=\"/agu\" class:active={$page.url.pathname === '/agu' || $page.url.pathname.startsWith('/agu/')}>\n      <span class=\"icon\">🛡️</span>\n      AGU\n    </a>\n    <a href=\"/matron\" class:active={$page.url.pathname === '/matron' || $page.url.pathname.startsWith('/matron/')}>\n      <span class=\"icon\">🧙‍♀️</span>\n      Matron Advisory\n    </a>\n    <a href=\"/roadmap\" class:active={$page.url.pathname === '/roadmap' || $page.url.pathname.startsWith('/roadmap/')}>\n      <span class=\"icon\">🗺️</span>\n      Visionary Roadmap\n    </a>\n    <a href=\"/settings\" class:active={$page.url.pathname === '/settings'}>\n      <span class=\"icon\">⚙️</span>\n      Settings\n    </a>\n  </nav>\n\n  <main class=\"main\">\n    <slot />\n  </main>\n\n  <footer class=\"footer\">\n    <p>claude-code-zen v2.0.0 | Svelte Dashboard | Press <kbd>Ctrl+Shift+P</kbd> for Command Palette</p>\n  </footer>\n</div>\n\n<!-- Command Palette Component -->\n<CommandPalette \n  bind:isOpen={commandPaletteOpen}\n  on:close={handleCommandPaletteClose}\n  on:file-new={handleFileNew}\n/>\n\n<style>\n  .app {\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background: var(--bg-primary);\n    color: var(--text-primary);\n  }\n\n  .header {\n    background: var(--bg-secondary);\n    border-bottom: 1px solid var(--border-primary);\n    padding: 1rem 2rem;\n  }\n\n  .header-content {\n    max-width: 1200px;\n    margin: 0 auto;\n    text-align: center;\n  }\n\n  .header h1 {\n    font-size: 2.5rem;\n    color: var(--accent-primary);\n    margin: 0 0 0.5rem 0;\n    font-weight: 600;\n  }\n\n  .header p {\n    color: var(--text-secondary);\n    margin: 0 0 1rem 0;\n    font-size: 1.1rem;\n  }\n\n  .status-indicator {\n    display: inline-flex;\n    align-items: center;\n    gap: 0.5rem;\n    padding: 0.5rem 1rem;\n    background: var(--bg-tertiary);\n    border-radius: 20px;\n    font-size: 0.875rem;\n    font-weight: 500;\n  }\n\n  .status-dot {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background: var(--accent-success);\n    animation: pulse 2s infinite;\n  }\n\n  @keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.6; }\n  }\n\n  .nav {\n    background: var(--bg-secondary);\n    border-bottom: 1px solid var(--border-primary);\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n    gap: 0.25rem;\n    padding: 0 2rem;\n  }\n\n  .nav a {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    padding: 0.75rem 1.25rem;\n    text-decoration: none;\n    color: var(--text-secondary);\n    border-radius: 8px 8px 0 0;\n    border: 1px solid transparent;\n    border-bottom: none;\n    transition: all 0.2s ease;\n    position: relative;\n    top: 1px;\n  }\n\n  .nav a:hover {\n    background: var(--bg-tertiary);\n    color: var(--text-primary);\n  }\n\n  .nav a.active {\n    background: var(--bg-primary);\n    color: var(--accent-primary);\n    border-color: var(--border-primary);\n    border-bottom: 1px solid var(--bg-primary);\n  }\n\n  .icon {\n    font-size: 1rem;\n  }\n\n  .main {\n    flex: 1;\n    padding: 2rem;\n    max-width: 1200px;\n    margin: 0 auto;\n    width: 100%;\n  }\n\n  .footer {\n    background: var(--bg-secondary);\n    border-top: 1px solid var(--border-primary);\n    padding: 1rem 2rem;\n    text-align: center;\n    color: var(--text-muted);\n    font-size: 0.875rem;\n  }\n\n  @media (max-width: 768px) {\n    .header {\n      padding: 1rem;\n    }\n    \n    .header h1 {\n      font-size: 1.8rem;\n    }\n    \n    .nav {\n      padding: 0 1rem;\n      justify-content: flex-start;\n      overflow-x: auto;\n    }\n    \n    .main {\n      padding: 1rem;\n    }\n  }\n</style>"],"names":["$.attr_class","$.escape","$.store_get"],"mappings":"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"}