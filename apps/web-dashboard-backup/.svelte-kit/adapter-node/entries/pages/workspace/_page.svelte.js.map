{"version":3,"file":"_page.svelte.js","sources":["../../../../../../src/routes/workspace/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import { browser } from '$app/environment';\n  \n  // Workspace state\n  let files: any[] = [];\n  let currentPath = '';\n  let loading = false;\n  let error = '';\n  let showCommandPalette = false;\n  let selectedFile: any = null;\n  let fileContent = '';\n  let searchQuery = '';\n\n  // File explorer state\n  let explorerExpanded = true;\n  \n  // Command palette commands\n  const commands = [\n    {\n      category: 'File Operations',\n      items: [\n        { id: 'new-file', title: 'New File', description: 'Create a new file', icon: 'üìÑ', shortcut: 'Ctrl+N' },\n        { id: 'new-folder', title: 'New Folder', description: 'Create a new folder', icon: 'üìÅ', shortcut: 'Ctrl+Shift+N' },\n        { id: 'open-file', title: 'Open File', description: 'Open an existing file', icon: 'üìÇ', shortcut: 'Ctrl+O' },\n        { id: 'save-file', title: 'Save File', description: 'Save current file', icon: 'üíæ', shortcut: 'Ctrl+S' },\n      ]\n    },\n    {\n      category: 'Navigation',\n      items: [\n        { id: 'go-to-file', title: 'Go to File', description: 'Quick file navigation', icon: 'üîç', shortcut: 'Ctrl+P' },\n        { id: 'go-to-line', title: 'Go to Line', description: 'Jump to specific line', icon: 'üìç', shortcut: 'Ctrl+G' },\n        { id: 'find-in-files', title: 'Find in Files', description: 'Search across all files', icon: 'üîé', shortcut: 'Ctrl+Shift+F' },\n      ]\n    },\n    {\n      category: 'Project',\n      items: [\n        { id: 'run-command', title: 'Run Command', description: 'Execute project command', icon: '‚ö°', shortcut: 'Ctrl+`' },\n        { id: 'git-status', title: 'Git Status', description: 'View git repository status', icon: 'üåø', shortcut: 'Ctrl+Shift+G' },\n        { id: 'project-info', title: 'Project Info', description: 'View project information', icon: '‚ÑπÔ∏è', shortcut: '' },\n      ]\n    }\n  ];\n\n  let filteredCommands = commands;\n  let selectedCommandIndex = 0;\n\n  // API functions\n  async function loadFiles(path = '') {\n    if (!browser) return;\n    \n    loading = true;\n    error = '';\n    \n    try {\n      const response = await fetch(`/api/workspace/files?path=${encodeURIComponent(path)}`);\n      if (!response.ok) {\n        throw new Error('Failed to load files');\n      }\n      \n      const data = await response.json();\n      files = data.files || [];\n      currentPath = data.currentPath || path;\n    } catch (err) {\n      error = err.message || 'Failed to load files';\n      console.error('Error loading files:', err);\n    } finally {\n      loading = false;\n    }\n  }\n\n  async function loadFileContent(filePath: string) {\n    if (!browser) return;\n    \n    loading = true;\n    \n    try {\n      const response = await fetch(`/api/workspace/files/content?path=${encodeURIComponent(filePath)}`);\n      if (!response.ok) {\n        throw new Error('Failed to load file content');\n      }\n      \n      const data = await response.json();\n      fileContent = data.content || '';\n    } catch (err) {\n      error = err.message || 'Failed to load file content';\n      console.error('Error loading file content:', err);\n    } finally {\n      loading = false;\n    }\n  }\n\n  // Event handlers\n  function handleFileClick(file: any) {\n    if (file.type === 'directory') {\n      const newPath = currentPath ? `${currentPath}/${file.name}` : file.name;\n      loadFiles(newPath);\n    } else {\n      selectedFile = file;\n      loadFileContent(file.path);\n    }\n  }\n\n  function handleBackClick() {\n    const pathParts = currentPath.split('/');\n    pathParts.pop();\n    const newPath = pathParts.join('/');\n    loadFiles(newPath);\n  }\n\n  function toggleCommandPalette() {\n    showCommandPalette = !showCommandPalette;\n    if (showCommandPalette) {\n      searchQuery = '';\n      filterCommands();\n      selectedCommandIndex = 0;\n    }\n  }\n\n  function filterCommands() {\n    if (!searchQuery.trim()) {\n      filteredCommands = commands;\n    } else {\n      filteredCommands = commands.map(category => ({\n        ...category,\n        items: category.items.filter(item => \n          item.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          item.description.toLowerCase().includes(searchQuery.toLowerCase())\n        )\n      })).filter(category => category.items.length > 0);\n    }\n    selectedCommandIndex = 0;\n  }\n\n  function executeCommand(commandId: string) {\n    console.log('Executing command:', commandId);\n    showCommandPalette = false;\n    \n    // Implement command execution logic here\n    switch (commandId) {\n      case 'new-file':\n        // TODO: Implement new file creation\n        break;\n      case 'new-folder':\n        // TODO: Implement new folder creation\n        break;\n      case 'git-status':\n        // TODO: Show git status\n        break;\n      default:\n        console.log('Command not implemented:', commandId);\n    }\n  }\n\n  // Keyboard shortcuts\n  function handleKeydown(event: KeyboardEvent) {\n    if (event.ctrlKey && event.shiftKey && event.key === 'P') {\n      event.preventDefault();\n      toggleCommandPalette();\n    } else if (showCommandPalette) {\n      if (event.key === 'Escape') {\n        showCommandPalette = false;\n      } else if (event.key === 'ArrowDown') {\n        event.preventDefault();\n        const totalCommands = filteredCommands.reduce((sum, cat) => sum + cat.items.length, 0);\n        selectedCommandIndex = (selectedCommandIndex + 1) % totalCommands;\n      } else if (event.key === 'ArrowUp') {\n        event.preventDefault();\n        const totalCommands = filteredCommands.reduce((sum, cat) => sum + cat.items.length, 0);\n        selectedCommandIndex = selectedCommandIndex === 0 ? totalCommands - 1 : selectedCommandIndex - 1;\n      } else if (event.key === 'Enter') {\n        event.preventDefault();\n        let commandIndex = 0;\n        for (const category of filteredCommands) {\n          for (const item of category.items) {\n            if (commandIndex === selectedCommandIndex) {\n              executeCommand(item.id);\n              return;\n            }\n            commandIndex++;\n          }\n        }\n      }\n    }\n  }\n\n  // Initialize\n  onMount(() => {\n    loadFiles();\n    \n    // Add global keyboard listener\n    window.addEventListener('keydown', handleKeydown);\n    \n    return () => {\n      window.removeEventListener('keydown', handleKeydown);\n    };\n  });\n  \n  // Watch search query changes\n  $: if (showCommandPalette) filterCommands();\n</script>\n\n<svelte:head>\n  <title>Workspace - Claude Code Zen</title>\n</svelte:head>\n\n<div class=\"workspace\">\n  <div class=\"workspace-header\">\n    <h1>üóÇÔ∏è Workspace</h1>\n    <div class=\"workspace-actions\">\n      <button class=\"btn primary\" on:click={toggleCommandPalette}>\n        <span>üéØ</span> Command Palette\n        <kbd>Ctrl+Shift+P</kbd>\n      </button>\n    </div>\n  </div>\n\n  <div class=\"workspace-layout\">\n    <!-- File Explorer -->\n    <div class=\"file-explorer\" class:collapsed={!explorerExpanded}>\n      <div class=\"explorer-header\">\n        <button class=\"collapse-btn\" on:click={() => explorerExpanded = !explorerExpanded}>\n          {explorerExpanded ? 'üìÅ' : 'üìÇ'}\n        </button>\n        <h3>Files</h3>\n        <button class=\"btn-icon\" title=\"Refresh\">üîÑ</button>\n      </div>\n      \n      {#if explorerExpanded}\n        <div class=\"explorer-content\">\n          <!-- Breadcrumb -->\n          {#if currentPath}\n            <div class=\"breadcrumb\">\n              <button class=\"breadcrumb-btn\" on:click={handleBackClick}>‚¨ÖÔ∏è</button>\n              <span class=\"path\">/{currentPath}</span>\n            </div>\n          {/if}\n\n          <!-- Files list -->\n          {#if loading}\n            <div class=\"loading\">üìÅ Loading files...</div>\n          {:else if error}\n            <div class=\"error\">‚ùå {error}</div>\n          {:else if files.length === 0}\n            <div class=\"empty\">üìÑ No files found</div>\n          {:else}\n            <div class=\"files-list\">\n              {#each files as file}\n                <button \n                  class=\"file-item\"\n                  class:selected={selectedFile?.path === file.path}\n                  on:click={() => handleFileClick(file)}\n                >\n                  <span class=\"file-icon\">\n                    {file.type === 'directory' ? 'üìÅ' : 'üìÑ'}\n                  </span>\n                  <span class=\"file-name\">{file.name}</span>\n                  {#if file.type === 'file' && file.size}\n                    <span class=\"file-size\">{Math.round(file.size / 1024)}KB</span>\n                  {/if}\n                </button>\n              {/each}\n            </div>\n          {/if}\n        </div>\n      {/if}\n    </div>\n\n    <!-- Main Content -->\n    <div class=\"main-content\">\n      {#if selectedFile}\n        <div class=\"file-viewer\">\n          <div class=\"file-header\">\n            <h3>üìÑ {selectedFile.name}</h3>\n            <div class=\"file-meta\">\n              <span>Size: {Math.round(selectedFile.size / 1024)}KB</span>\n              <span>Modified: {new Date(selectedFile.modified).toLocaleDateString()}</span>\n            </div>\n          </div>\n          \n          <div class=\"file-content\">\n            {#if loading}\n              <div class=\"loading\">üìÑ Loading file content...</div>\n            {:else if fileContent}\n              <pre><code>{fileContent}</code></pre>\n            {:else}\n              <div class=\"empty\">üìÑ File is empty</div>\n            {/if}\n          </div>\n        </div>\n      {:else}\n        <div class=\"welcome\">\n          <h2>üéØ Welcome to Workspace</h2>\n          <p>Select a file from the explorer to view its content, or use the command palette to perform actions.</p>\n          \n          <div class=\"quick-actions\">\n            <button class=\"btn primary\" on:click={toggleCommandPalette}>\n              üéØ Open Command Palette\n            </button>\n            <button class=\"btn\" on:click={() => loadFiles()}>\n              üîÑ Refresh Files\n            </button>\n          </div>\n        </div>\n      {/if}\n    </div>\n  </div>\n</div>\n\n<!-- Command Palette Modal -->\n{#if showCommandPalette}\n  <div class=\"command-palette-backdrop\" on:click={() => showCommandPalette = false}>\n    <div class=\"command-palette\" on:click|stopPropagation>\n      <div class=\"search-container\">\n        <span class=\"search-icon\">üîç</span>\n        <input \n          class=\"search-input\" \n          bind:value={searchQuery}\n          placeholder=\"Type a command...\"\n          autofocus\n        />\n        <span class=\"search-shortcut\">ESC</span>\n      </div>\n      \n      <div class=\"commands-container\">\n        {#if filteredCommands.length === 0}\n          <div class=\"no-results\">\n            <div class=\"no-results-icon\">ü§∑</div>\n            <div class=\"no-results-text\">No commands found</div>\n            <div class=\"no-results-hint\">Try a different search term</div>\n          </div>\n        {:else}\n          {#each filteredCommands as category}\n            <div class=\"command-category\">\n              <div class=\"category-header\">{category.category}</div>\n              {#each category.items as command, index}\n                {@const globalIndex = filteredCommands.slice(0, filteredCommands.indexOf(category)).reduce((sum, cat) => sum + cat.items.length, 0) + index}\n                <div \n                  class=\"command-item\"\n                  class:selected={globalIndex === selectedCommandIndex}\n                  on:click={() => executeCommand(command.id)}\n                >\n                  <div class=\"command-main\">\n                    <span class=\"command-icon\">{command.icon}</span>\n                    <div class=\"command-info\">\n                      <div class=\"command-title\">{command.title}</div>\n                      <div class=\"command-description\">{command.description}</div>\n                    </div>\n                  </div>\n                  {#if command.shortcut}\n                    <span class=\"command-shortcut\">{command.shortcut}</span>\n                  {/if}\n                </div>\n              {/each}\n            </div>\n          {/each}\n        {/if}\n      </div>\n      \n      <div class=\"command-footer\">\n        <div class=\"footer-shortcuts\">\n          <span><kbd>‚Üë</kbd><kbd>‚Üì</kbd> Navigate</span>\n          <span><kbd>Enter</kbd> Execute</span>\n        </div>\n        <div class=\"footer-info\">\n          {filteredCommands.reduce((sum, cat) => sum + cat.items.length, 0)} commands\n        </div>\n      </div>\n    </div>\n  </div>\n{/if}\n\n<style>\n  .workspace {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .workspace-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 1rem 0;\n    border-bottom: 1px solid var(--border-primary);\n    margin-bottom: 1rem;\n  }\n\n  .workspace-header h1 {\n    margin: 0;\n    color: var(--accent-primary);\n  }\n\n  .workspace-actions {\n    display: flex;\n    gap: 0.5rem;\n    align-items: center;\n  }\n\n  .workspace-actions kbd {\n    background: var(--bg-tertiary);\n    padding: 2px 6px;\n    border-radius: 3px;\n    font-size: 0.75rem;\n    margin-left: 0.5rem;\n  }\n\n  .workspace-layout {\n    display: flex;\n    flex: 1;\n    gap: 1rem;\n    min-height: 0;\n  }\n\n  /* File Explorer */\n  .file-explorer {\n    width: 300px;\n    background: var(--bg-secondary);\n    border: 1px solid var(--border-primary);\n    border-radius: 8px;\n    display: flex;\n    flex-direction: column;\n    transition: width 0.3s ease;\n  }\n\n  .file-explorer.collapsed {\n    width: 50px;\n  }\n\n  .explorer-header {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    padding: 0.75rem;\n    border-bottom: 1px solid var(--border-primary);\n  }\n\n  .collapse-btn, .btn-icon {\n    background: none;\n    border: none;\n    color: var(--text-primary);\n    cursor: pointer;\n    padding: 0.25rem;\n    border-radius: 4px;\n    transition: background 0.2s ease;\n  }\n\n  .collapse-btn:hover, .btn-icon:hover {\n    background: var(--bg-tertiary);\n  }\n\n  .explorer-header h3 {\n    margin: 0;\n    flex: 1;\n    font-size: 0.875rem;\n    font-weight: 600;\n  }\n\n  .explorer-content {\n    flex: 1;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .breadcrumb {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    padding: 0.5rem 0.75rem;\n    background: var(--bg-tertiary);\n    border-bottom: 1px solid var(--border-primary);\n    font-size: 0.875rem;\n  }\n\n  .breadcrumb-btn {\n    background: none;\n    border: none;\n    color: var(--text-primary);\n    cursor: pointer;\n    padding: 0.25rem;\n    border-radius: 4px;\n    transition: background 0.2s ease;\n  }\n\n  .breadcrumb-btn:hover {\n    background: var(--bg-primary);\n  }\n\n  .path {\n    color: var(--text-muted);\n    font-family: 'SF Mono', Consolas, monospace;\n    font-size: 0.75rem;\n  }\n\n  .files-list {\n    flex: 1;\n    overflow-y: auto;\n    padding: 0.5rem;\n  }\n\n  .file-item {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    padding: 0.5rem;\n    width: 100%;\n    background: none;\n    border: none;\n    color: var(--text-primary);\n    cursor: pointer;\n    border-radius: 4px;\n    transition: background 0.2s ease;\n    font-size: 0.875rem;\n  }\n\n  .file-item:hover {\n    background: var(--bg-tertiary);\n  }\n\n  .file-item.selected {\n    background: var(--accent-primary);\n    color: white;\n  }\n\n  .file-name {\n    flex: 1;\n    text-align: left;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n  }\n\n  .file-size {\n    font-size: 0.75rem;\n    color: var(--text-muted);\n    font-family: 'SF Mono', Consolas, monospace;\n  }\n\n  .file-item.selected .file-size {\n    color: rgba(255, 255, 255, 0.8);\n  }\n\n  /* Main Content */\n  .main-content {\n    flex: 1;\n    background: var(--bg-secondary);\n    border: 1px solid var(--border-primary);\n    border-radius: 8px;\n    display: flex;\n    flex-direction: column;\n    min-height: 0;\n  }\n\n  .file-viewer {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n  }\n\n  .file-header {\n    padding: 1rem;\n    border-bottom: 1px solid var(--border-primary);\n  }\n\n  .file-header h3 {\n    margin: 0 0 0.5rem 0;\n    color: var(--accent-primary);\n  }\n\n  .file-meta {\n    display: flex;\n    gap: 1rem;\n    font-size: 0.875rem;\n    color: var(--text-muted);\n  }\n\n  .file-content {\n    flex: 1;\n    overflow: auto;\n    padding: 1rem;\n  }\n\n  .file-content pre {\n    margin: 0;\n    font-family: 'SF Mono', Consolas, 'Liberation Mono', monospace;\n    font-size: 0.875rem;\n    line-height: 1.5;\n    color: var(--text-primary);\n    background: var(--bg-primary);\n    padding: 1rem;\n    border-radius: 6px;\n    border: 1px solid var(--border-primary);\n    overflow: auto;\n  }\n\n  .welcome {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    text-align: center;\n    padding: 2rem;\n  }\n\n  .welcome h2 {\n    margin-bottom: 1rem;\n    color: var(--accent-primary);\n  }\n\n  .welcome p {\n    color: var(--text-secondary);\n    margin-bottom: 2rem;\n    max-width: 400px;\n    line-height: 1.6;\n  }\n\n  .quick-actions {\n    display: flex;\n    gap: 1rem;\n    flex-wrap: wrap;\n  }\n\n  .loading, .error, .empty {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 2rem;\n    color: var(--text-muted);\n    font-style: italic;\n  }\n\n  .error {\n    color: var(--accent-error);\n  }\n\n  /* Responsive */\n  @media (max-width: 768px) {\n    .workspace-layout {\n      flex-direction: column;\n    }\n\n    .file-explorer {\n      width: 100%;\n      height: 200px;\n    }\n\n    .file-explorer.collapsed {\n      height: 50px;\n      width: 100%;\n    }\n  }\n</style>"],"names":["$.attr_class","$.escape"],"mappings":";mCAAA;;MAKM,QAAY,CAAA;AAKZ,MAAA,eAAoB;;;;AAmNuB,YAAA,IAAA,KAAA,mWAAAA,WAAA,gCAAA,QAAA,EAAA,aAAA,MAAgB,CAAA,CAAA,4FAAAC,YAGnC,IAAW,CAAA,4HAAA;AAMd;;;;;;;;;;;YAeP,MAAM,WAAW,GAAC;;;;;+CAIjB,KAAK;;;gBAAI,OAAI,WAAA,OAAA;AAGA,sBAAA,IAAA,KAAA,UAAAD,WAAA,4BAAA,QAAA,EAAA,YAAA,cAAc,SAAS,KAAK,KAAI,0CAI7C,KAAK,SAAS,cAAc,OAAO,IAAI,CAAA,kDAAAC,YAEjB,KAAK,IAAI,CAAA,UAAA;AAC7B,gBAAA,KAAK,SAAS,UAAU,KAAK,MAAI;;AACX,wBAAA,IAAA,KAAA,0CAAAA,YAAA,KAAK,MAAM,KAAK,OAAO,IAAI,CAAA,CAAA,WAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;AA1DxE;"}