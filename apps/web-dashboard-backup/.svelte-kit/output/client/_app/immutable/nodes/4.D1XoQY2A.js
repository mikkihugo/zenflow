import"../chunks/DsnmJJEf.js";import{i as Pt}from"../chunks/Dpmr5Dgf.js";import{a1 as Ft,a2 as Ht,a3 as u,a4 as Rt,a6 as c,a7 as Lt,a5 as g,ac as Ut,aa as a,ad as e,ag as Et,ah as Na,a9 as t,a8 as i,g as x,ae as L,ai as It,af as G,aj as Bt,u as D}from"../chunks/B7z1MOZy.js";import{i as A}from"../chunks/CEHbExR_.js";import{e as S,i as M,s as Oe}from"../chunks/BhSolc2x.js";import{r as j,s as Oa}from"../chunks/CXr2Pg0T.js";import{s as Nt}from"../chunks/C6hVz37X.js";import{b as K,a as qe}from"../chunks/DUWeUQ_z.js";import{b as Ot}from"../chunks/BJC_WCc9.js";import{a as T,s as qt,b as y,d as Je}from"../chunks/CXII8-yk.js";import{p as Jt}from"../chunks/BGvw21tE.js";import{w as P}from"../chunks/B2TdpOED.js";var Qt=u('<div class="flex items-center justify-center min-h-screen"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-400 mx-auto mb-4"></div> <p class="text-gray-300">Loading task details...</p></div></div>'),Wt=u('<div class="mb-4"><div class="text-sm text-gray-400 mb-2">Code Context</div> <pre class="bg-gray-900 rounded-lg p-4 text-sm font-mono overflow-x-auto border border-gray-600"><code> </code></pre></div>'),zt=u('<span class="bg-blue-600 text-blue-100 px-2 py-1 rounded text-xs"> </span>'),Gt=u('<div class="flex items-start gap-2"><span class="text-green-400 mt-1">•</span> <span class="text-gray-300"> </span></div>'),Kt=u('<span class="bg-purple-600 text-purple-100 px-2 py-1 rounded text-xs"> </span>'),Vt=u('<div class="text-sm text-gray-300"> </div>'),Zt=u('<div class="mb-4"><div class="text-sm text-gray-400 mb-2">Dependencies</div> <!></div>'),Xt=u('<div class="text-sm text-gray-300"> </div>'),Yt=u('<div><div class="text-sm text-gray-400 mb-2">Risk Factors</div> <!></div>'),es=u('<div class="space-y-3"><div><label class="block text-sm text-gray-400 mb-1">New Title</label> <input type="text" placeholder="Leave empty to keep current title" class="w-full bg-gray-600 border border-gray-500 rounded px-2 py-1 text-sm"/></div> <div><label class="block text-sm text-gray-400 mb-1">Priority</label> <select class="w-full bg-gray-600 border border-gray-500 rounded px-2 py-1 text-sm"><option>Keep current priority</option><option>Low</option><option>Medium</option><option>High</option><option>Critical</option></select></div> <div><label class="block text-sm text-gray-400 mb-1">Estimated Hours</label> <input type="number" class="w-full bg-gray-600 border border-gray-500 rounded px-2 py-1 text-sm"/></div></div>'),as=u('<div class="mb-4 p-4 bg-gray-700 rounded-lg"><div class="flex justify-between items-center mb-3"><h4 class="font-medium">Task Modifications</h4> <button class="text-blue-400 hover:text-blue-300 text-sm"> </button></div> <!></div>'),ts=u('<div class="bg-gray-700 rounded px-3 py-2 text-sm"> </div>'),ss=u('<div class="bg-gray-800 border-b border-gray-700 p-6"><div class="max-w-7xl mx-auto"><div class="flex items-center gap-4 mb-4"><a href="/agu" class="text-purple-400 hover:text-purple-300">← Back to AGU</a> <div class="h-6 w-px bg-gray-600"></div> <h1 class="text-2xl font-bold text-purple-400">📋 Task Approval Review</h1></div> <div class="flex justify-between items-start"><div><h2 class="text-xl font-semibold mb-2"> </h2> <div class="flex items-center gap-4 text-sm text-gray-300"><span> </span> <span class="text-blue-400"> </span> <span> </span> <span> </span></div></div> <div class="text-right text-sm text-gray-400"><div> </div> <div> </div></div></div></div></div> <div class="max-w-7xl mx-auto p-6 grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2 space-y-6"><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><h3 class="text-lg font-semibold mb-3">📝 Task Description</h3> <p class="text-gray-300 leading-relaxed"> </p></div> <div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><h3 class="text-lg font-semibold mb-3">🔍 Source Analysis</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div><div class="text-sm text-gray-400">File Path</div> <div class="font-mono text-green-400"> </div></div> <div><div class="text-sm text-gray-400">Line Number</div> <div class="text-blue-400"> </div></div> <div><div class="text-sm text-gray-400">Analysis Type</div> <div class="text-purple-400"> </div></div> <div><div class="text-sm text-gray-400">Severity</div> <div> </div></div></div> <!> <div class="mb-4"><div class="text-sm text-gray-400 mb-2">Analysis Tags</div> <div class="flex flex-wrap gap-2"></div></div> <div class="flex justify-between text-sm"><span class="text-gray-400"> </span> <span class="text-gray-400"> </span></div></div> <div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><h3 class="text-lg font-semibold mb-3">✅ Acceptance Criteria</h3> <div class="space-y-2"></div></div> <div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><h3 class="text-lg font-semibold mb-3">🏢 Business Context</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div><div class="text-sm text-gray-400">Business Impact</div> <div class="text-orange-400 font-semibold"> </div></div> <div><div class="text-sm text-gray-400">Deadline</div> <div class="text-yellow-400"> </div></div></div> <div class="mb-4"><div class="text-sm text-gray-400 mb-2">Stakeholders</div> <div class="flex flex-wrap gap-2"></div></div> <!> <!></div> <div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><h3 class="text-lg font-semibold mb-4">🎯 Make Decision</h3> <div class="mb-4"><label class="block text-sm font-medium mb-2">Decision</label> <div class="grid grid-cols-2 md:grid-cols-4 gap-2"><label class="flex items-center"><input type="radio" class="mr-2"/> <span class="text-green-400">✅ Approve</span></label> <label class="flex items-center"><input type="radio" class="mr-2"/> <span class="text-yellow-400">📝 Modify</span></label> <label class="flex items-center"><input type="radio" class="mr-2"/> <span class="text-red-400">❌ Reject</span></label> <label class="flex items-center"><input type="radio" class="mr-2"/> <span class="text-gray-400">⏸️ Defer</span></label></div></div> <div class="mb-4"><label for="rationale" class="block text-sm font-medium mb-2"> </label> <textarea id="rationale" placeholder="Provide reasoning for your decision..." class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 h-24 resize-none"></textarea></div> <!> <button class="w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed px-6 py-3 rounded-lg font-medium transition-colors">Submit Decision</button></div></div> <div class="space-y-6"><div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><h3 class="text-lg font-semibold mb-4">📊 Task Summary</h3> <div class="space-y-3 text-sm"><div class="flex justify-between"><span class="text-gray-400">Type</span> <span class="text-blue-400"> </span></div> <div class="flex justify-between"><span class="text-gray-400">Priority</span> <span> </span></div> <div class="flex justify-between"><span class="text-gray-400">Estimated Hours</span> <span> </span></div> <div class="flex justify-between"><span class="text-gray-400">Suggested Swarm</span> <span class="text-purple-400"> </span></div></div></div> <div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><h3 class="text-lg font-semibold mb-4">👥 Required Agents</h3> <div class="space-y-2"></div></div> <div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><h3 class="text-lg font-semibold mb-4">⚡ Quick Actions</h3> <div class="space-y-2"><button class="w-full text-left bg-green-600 hover:bg-green-700 p-2 rounded text-sm transition-colors">✅ Quick Approve</button> <button class="w-full text-left bg-yellow-600 hover:bg-yellow-700 p-2 rounded text-sm transition-colors">⏸️ Defer for Review</button> <a class="w-full text-left bg-blue-600 hover:bg-blue-700 p-2 rounded text-sm transition-colors block">📄 Export Details</a></div></div> <div class="bg-gray-800 rounded-lg p-6 border border-gray-700"><h3 class="text-lg font-semibold mb-4">🎯 Analysis Confidence</h3> <div class="space-y-3"><div><div class="flex justify-between mb-1"><span class="text-gray-400">Scanner Confidence</span> <span class="text-blue-400"> </span></div> <div class="w-full bg-gray-700 rounded-full h-2"><div class="bg-blue-400 h-2 rounded-full"></div></div></div> <div class="text-xs text-gray-500">High confidence indicates reliable automated analysis</div></div></div></div></div>',1),rs=u('<div class="flex items-center justify-center min-h-screen"><div class="text-center"><h1 class="text-2xl font-bold text-red-400 mb-4">Task Not Found</h1> <p class="text-gray-300 mb-4">The requested task could not be found.</p> <a href="/agu" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded transition-colors">Return to AGU Dashboard</a></div></div>'),is=u('<div class="min-h-screen bg-gray-900 text-white"><!></div>');function ys(qa,Ja){Ft(Ja,!1);const[f,Qa]=qt(),Wa=()=>T(Jt,"$page",f),v=()=>T(h,"$decision",f),V=()=>T(I,"$rationale",f),m=()=>T(B,"$modifications",f),s=()=>T(E,"$task",f),za=()=>T(We,"$isLoading",f),Qe=()=>T(ze,"$showModificationForm",f),U=[],Z=Wa().params.id,E=P(null),We=P(!0),h=P(""),I=P(""),B=P({}),ze=P(!1),Ge={id:Z,title:"Refactor Authentication Module",description:"Modernize auth system to use JWT tokens and improve security. This task was generated from automated code analysis that detected outdated authentication patterns and potential security vulnerabilities.",type:"refactoring",priority:"high",estimatedHours:8,requiredAgentTypes:["Security Expert","Backend Developer","QA Engineer"],suggestedSwarmType:"security-focused",sourceAnalysis:{filePath:"src/auth/auth-service.ts",lineNumber:45,type:"security",severity:"medium",codeSnippet:`// Vulnerable session handling
function authenticateUser(username, password) {
  // TODO: Add JWT token generation
  const user = findUser(username);
  if (user && user.password === password) {
    return { authenticated: true, user };
  }
  return { authenticated: false };
}`,tags:["authentication","security","jwt","session-management"],confidence:.92},acceptanceCriteria:["All tests pass with new JWT implementation","Security scan shows no critical vulnerabilities","Performance benchmarks maintained or improved","Existing API compatibility preserved","Documentation updated with new auth flow"],businessContext:{impact:"high",stakeholders:["Security Team","Backend Team","Product Manager"],deadline:new Date(Date.now()+1e3*60*60*24*2),dependencies:[{reference:"user-management-service",type:"service",criticality:"high"},{reference:"api-gateway",type:"infrastructure",criticality:"medium"}],riskFactors:[{description:"Potential API breaking changes",severity:"medium",probability:.3},{description:"User session interruption during deployment",severity:"low",probability:.8}]},created:new Date(Date.now()-1e3*60*45),scannedBy:"Enhanced Document Scanner v2.0",correlationId:"scan-2024-001-auth-analysis"};Ht(async()=>{await Ga()});async function Ga(){try{const n=await fetch(`/api/agu/tasks/${Z}`);if(n.ok){const _=await n.json();E.set(_)}else E.set(Ge)}catch(n){console.error("Failed to load task details:",n),E.set(Ge)}finally{We.set(!1)}}async function Ka(){if(!v()){alert("Please select a decision");return}if((v()==="reject"||v()==="modify")&&!V().trim()){alert("Please provide a rationale for your decision");return}try{const n={taskId:Z,decision:v(),approved:v()==="approve"||v()==="modify",rationale:V(),modifications:v()==="modify"?m():void 0,decisionMaker:"web-user",timestamp:new Date().toISOString()};(await fetch("/api/agu/task-approval",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(alert(`Task ${v()}ed successfully!`),window.location.href="/agu"):alert("Failed to submit decision")}catch(n){console.error("Decision submission error:",n),alert("Error submitting decision")}}function Va(){ze.update(n=>!n)}function Ke(n){switch(n){case"critical":return"text-red-400 bg-red-900/20";case"high":return"text-orange-400 bg-orange-900/20";case"medium":return"text-yellow-400 bg-yellow-900/20";case"low":return"text-blue-400 bg-blue-900/20";default:return"text-gray-400 bg-gray-900/20"}}function Za(n){switch(n){case"critical":return"text-red-400";case"high":return"text-orange-400";case"medium":return"text-yellow-400";case"low":return"text-blue-400";default:return"text-gray-400"}}function Xa(n){const Y=new Date().getTime()-n.getTime(),w=Math.floor(Y/(1e3*60));return w<60?`${w}m ago`:w<1440?`${Math.floor(w/60)}h ago`:`${Math.floor(w/1440)}d ago`}Pt();var X=is();Rt(n=>{g(()=>Ut.title=`Task Approval - ${s()?.title||"Loading..."} - Claude Code Zen`)});var Ya=a(X);{var et=n=>{var _=Qt();c(n,_)},at=n=>{var _=Et(),Y=Na(_);{var w=C=>{var N=ss(),ee=Na(N),Ve=a(ee),Ze=t(a(Ve),2),ae=a(Ze),te=a(ae),st=a(te,!0);e(te);var Xe=t(te,2),O=a(Xe),rt=a(O,!0);e(O);var se=t(O,2),it=a(se,!0);e(se);var re=t(se,2),ot=a(re);e(re);var Ye=t(re,2),dt=a(Ye);e(Ye),e(Xe),e(ae);var ea=t(ae,2),ie=a(ea),nt=a(ie);e(ie);var aa=t(ie,2),lt=a(aa);e(aa),e(ea),e(Ze),e(Ve),e(ee);var ta=t(ee,2),oe=a(ta),de=a(oe),sa=t(a(de),2),vt=a(sa,!0);e(sa),e(de);var ne=t(de,2),le=t(a(ne),2),ve=a(le),ra=t(a(ve),2),ct=a(ra,!0);e(ra),e(ve);var ce=t(ve,2),ia=t(a(ce),2),pt=a(ia,!0);e(ia),e(ce);var pe=t(ce,2),oa=t(a(pe),2),ut=a(oa,!0);e(oa),e(pe);var da=t(pe,2),ue=t(a(da),2),gt=a(ue,!0);e(ue),e(da),e(le);var na=t(le,2);{var mt=r=>{var d=Wt(),o=t(a(d),2),l=a(o),p=a(l,!0);e(l),e(o),e(d),g(()=>i(p,s().sourceAnalysis.codeSnippet)),c(r,d)};A(na,r=>{s().sourceAnalysis.codeSnippet&&r(mt)})}var ge=t(na,2),la=t(a(ge),2);S(la,5,()=>s().sourceAnalysis.tags,M,(r,d)=>{var o=zt(),l=a(o,!0);e(o),g(()=>i(l,x(d))),c(r,o)}),e(la),e(ge);var va=t(ge,2),me=a(va),bt=a(me);e(me);var ca=t(me,2),xt=a(ca);e(ca),e(va),e(ne);var be=t(ne,2),pa=t(a(be),2);S(pa,5,()=>s().acceptanceCriteria,M,(r,d)=>{var o=Gt(),l=t(a(o),2),p=a(l,!0);e(l),e(o),g(()=>i(p,x(d))),c(r,o)}),e(pa),e(be);var xe=t(be,2),ye=t(a(xe),2),_e=a(ye),ua=t(a(_e),2),yt=a(ua,!0);e(ua),e(_e);var ga=t(_e,2),ma=t(a(ga),2),_t=a(ma,!0);e(ma),e(ga),e(ye);var fe=t(ye,2),ba=t(a(fe),2);S(ba,5,()=>s().businessContext.stakeholders,M,(r,d)=>{var o=Kt(),l=a(o,!0);e(o),g(()=>i(l,x(d))),c(r,o)}),e(ba),e(fe);var xa=t(fe,2);{var ft=r=>{var d=Zt(),o=t(a(d),2);S(o,1,()=>s().businessContext.dependencies,M,(l,p)=>{var b=Vt(),k=a(b);e(b),g(()=>i(k,`• ${x(p).reference??""} (${x(p).type??""}, ${x(p).criticality??""} criticality)`)),c(l,b)}),e(d),c(r,d)};A(xa,r=>{s().businessContext.dependencies.length>0&&r(ft)})}var ht=t(xa,2);{var wt=r=>{var d=Yt(),o=t(a(d),2);S(o,1,()=>s().businessContext.riskFactors,M,(l,p)=>{var b=Xt(),k=a(b);e(b),g($=>i(k,`• ${x(p).description??""} (${x(p).severity??""}, ${$??""}% probability)`),[()=>Math.round(x(p).probability*100)]),c(l,b)}),e(d),c(r,d)};A(ht,r=>{s().businessContext.riskFactors.length>0&&r(wt)})}e(xe);var ya=t(xe,2),he=t(a(ya),2),_a=t(a(he),2),we=a(_a),q=a(we);j(q),q.value=q.__value="approve",L(2),e(we);var ke=t(we,2),J=a(ke);j(J),J.value=J.__value="modify",L(2),e(ke);var $e=t(ke,2),Q=a($e);j(Q),Q.value=Q.__value="reject",L(2),e($e);var fa=t($e,2),W=a(fa);j(W),W.value=W.__value="defer",L(2),e(fa),e(_a),e(he);var Ae=t(he,2),Te=a(Ae),kt=a(Te);e(Te);var ha=t(Te,2);It(ha),e(Ae);var wa=t(Ae,2);{var $t=r=>{var d=as(),o=a(d),l=t(a(o),2),p=a(l);e(l),e(o);var b=t(o,2);{var k=$=>{var F=es(),H=a(F),z=t(a(H),2);j(z),e(H);var Re=t(H,2),Le=t(a(Re),2);g(()=>{m(),Bt(()=>{})});var Ue=a(Le);Ue.value=Ue.__value="";var Ee=t(Ue);Ee.value=Ee.__value="low";var Ie=t(Ee);Ie.value=Ie.__value="medium";var Be=t(Ie);Be.value=Be.__value="high";var Ia=t(Be);Ia.value=Ia.__value="critical",e(Le),e(Re);var Ba=t(Re,2),Ne=t(a(Ba),2);j(Ne),e(Ba),e(F),g(()=>Oa(Ne,"placeholder",`Current: ${s().estimatedHours??""}`)),qe(z,()=>m().title,R=>Je(B,D(m).title=R,D(m))),Ot(Le,()=>m().priority,R=>Je(B,D(m).priority=R,D(m))),qe(Ne,()=>m().estimatedHours,R=>Je(B,D(m).estimatedHours=R,D(m))),c($,F)};A(b,$=>{Qe()&&$(k)})}e(d),g(()=>i(p,`${Qe()?"Hide":"Show"} Options`)),G("click",l,Va),c(r,d)};A(wa,r=>{v()==="modify"&&r($t)})}var ka=t(wa,2);e(ya),e(oe);var $a=t(oe,2),Ce=a($a),Aa=t(a(Ce),2),De=a(Aa),Ta=t(a(De),2),At=a(Ta,!0);e(Ta),e(De);var Se=t(De,2),Me=t(a(Se),2),Tt=a(Me,!0);e(Me),e(Se);var je=t(Se,2),Ca=t(a(je),2),Ct=a(Ca);e(Ca),e(je);var Da=t(je,2),Sa=t(a(Da),2),Dt=a(Sa,!0);e(Sa),e(Da),e(Aa),e(Ce);var Pe=t(Ce,2),Ma=t(a(Pe),2);S(Ma,5,()=>s().requiredAgentTypes,M,(r,d)=>{var o=ts(),l=a(o,!0);e(o),g(()=>i(l,x(d))),c(r,o)}),e(Ma),e(Pe);var Fe=t(Pe,2),ja=t(a(Fe),2),Pa=a(ja),Fa=t(Pa,2),St=t(Fa,2);e(ja),e(Fe);var Ha=t(Fe,2),Ra=t(a(Ha),2),La=a(Ra),He=a(La),Ua=t(a(He),2),Mt=a(Ua);e(Ua),e(He);var Ea=t(He,2),jt=a(Ea);e(Ea),e(La),L(2),e(Ra),e(Ha),e($a),e(ta),g((r,d,o,l,p,b,k,$,F,H,z)=>{i(st,s().title),Oe(O,1,`px-2 py-1 rounded ${r??""}`),i(rt,d),i(it,s().type),i(ot,`${s().estimatedHours??""}h estimated`),i(dt,`Created ${o??""}`),i(nt,`Task ID: ${s().id??""}`),i(lt,`Correlation: ${s().correlationId??""}`),i(vt,s().description),i(ct,s().sourceAnalysis.filePath),i(pt,s().sourceAnalysis.lineNumber||"N/A"),i(ut,s().sourceAnalysis.type),Oe(ue,1,l),i(gt,p),i(bt,`Scanner: ${s().scannedBy??""}`),i(xt,`Confidence: ${b??""}%`),i(yt,k),i(_t,$),i(kt,`Rationale ${v()==="reject"||v()==="modify"?"(Required)":"(Optional)"}`),ka.disabled=!v(),i(At,s().type),Oe(Me,1,F),i(Tt,H),i(Ct,`${s().estimatedHours??""}h`),i(Dt,s().suggestedSwarmType),Oa(St,"href",`/agu/task/${s().id??""}/export`),i(Mt,`${z??""}%`),Nt(jt,`width: ${s().sourceAnalysis.confidence*100}%`)},[()=>Ke(s().priority),()=>s().priority.toUpperCase(),()=>Xa(s().created),()=>Za(s().sourceAnalysis.severity),()=>s().sourceAnalysis.severity.toUpperCase(),()=>Math.round(s().sourceAnalysis.confidence*100),()=>s().businessContext.impact.toUpperCase(),()=>s().businessContext.deadline.toLocaleDateString(),()=>Ke(s().priority).split(" ")[0],()=>s().priority.toUpperCase(),()=>Math.round(s().sourceAnalysis.confidence*100)]),K(U,[],q,v,r=>y(h,r)),K(U,[],J,v,r=>y(h,r)),K(U,[],Q,v,r=>y(h,r)),K(U,[],W,v,r=>y(h,r)),qe(ha,V,r=>y(I,r)),G("click",ka,Ka),G("click",Pa,()=>{y(h,"approve"),y(I,"Quick approval - task appears straightforward and low risk")}),G("click",Fa,()=>{y(h,"defer"),y(I,"Requires additional review and stakeholder input")}),c(C,N)},tt=C=>{var N=rs();c(C,N)};A(Y,C=>{s()?C(w):C(tt,!1)},!0)}c(n,_)};A(Ya,n=>{za()?n(et):n(at,!1)})}e(X),c(qa,X),Lt(),Qa()}export{ys as component};
//# sourceMappingURL=4.D1XoQY2A.js.map
