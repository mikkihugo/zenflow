---
applies_to: '**/*'
---

# Claude-Code-Zen Development Instructions

## Project Overview

Claude-Code-Zen is an advanced AI development platform featuring sophisticated agent coordination, neural networks, MCP protocol integration, and domain-driven architecture. This is a production-grade system with enterprise capabilities.

## Quick Start for Development

```bash
npm ci                    # Install dependencies
npm run build            # Build TypeScript
npm test                 # Run hybrid test suite
npm run lint             # Check code quality
npm run mcp:start        # Start MCP servers
```

## Core Technologies & Architecture

- **TypeScript** with strict mode enforcement (no `any` types)
- **Node.js 20+** runtime environment
- **MCP (Model Context Protocol)** - HTTP (port 3000) + Stdio servers
- **Domain-driven architecture** with clear boundaries
- **WASM integration** for performance-critical computations
- **Hybrid TDD approach** - London (70%) + Classical (30%)
- **147+ specialized agent types** for fine-grained coordination

## Project Structure

```
src/
├── coordination/    # Agent coordination, swarm management, load balancing
├── neural/         # Neural networks, WASM bindings, AI computations
├── interfaces/     # CLI, API, MCP servers, terminal, web interfaces
├── memory/         # Multi-backend memory management (SQLite, LanceDB, JSON)
├── database/       # Persistence, vector databases, connection pooling
├── core/          # System utilities, error handling, shared types
├── intelligence/  # Adaptive learning, pattern recognition
├── workflows/     # Task orchestration, automation workflows
└── types/         # Comprehensive TypeScript definitions
```

## Development Principles

### 1. Use Existing Systems First

- **Check existing agent types** in `src/types/agent-types.ts` (147+ available)
- **Use established abstractions** before creating new ones
- **Follow domain patterns** already established in each area
- **Leverage existing MCP tools** in coordination systems

### 2. Architecture Boundaries

- **Respect domain separation** - don't mix coordination with neural code
- **Use proper imports** from domain-specific indices
- **Follow established interfaces** defined in `src/types/`
- **Maintain performance requirements** (use WASM for heavy computation)

### 3. Testing Strategy

- **London TDD (70%)** for interactions, protocols, MCP tools, coordination
  - Use `tests/setup-london.ts`
  - Mock boundaries, verify interactions
  - Focus on component communication
- **Classical TDD (30%)** for algorithms, computations, neural networks
  - Use `tests/setup-classical.ts`
  - Test actual results and performance
  - Validate mathematical accuracy

### 4. Code Quality Standards

- **TypeScript strict mode** - comprehensive typing required
- **ESLint compliance** - follow established rules
- **Performance benchmarks** - maintain existing performance levels
- **Security standards** - follow established hardening practices
- **Documentation** - update relevant docs for user-facing changes

## Common Development Patterns

### Adding New Features

1. **Identify domain** - which `src/` directory is appropriate
2. **Check existing capabilities** - what's already available
3. **Use established types** - extend existing interfaces when possible
4. **Add comprehensive tests** - follow hybrid TDD approach
5. **Update documentation** - maintain current standards

### Working with Agent System

- **Use AgentType union** from `src/types/agent-types.ts`
- **Check agent capabilities** in `src/coordination/agents/`
- **Follow coordination patterns** established in swarm systems
- **Leverage existing orchestration** rather than creating new systems

### MCP Integration

- **HTTP MCP** (port 3000) for external tool integration
- **Stdio MCP** for swarm coordination and internal tools
- **Follow tool patterns** in `src/coordination/mcp/tools/`
- **Add proper schema validation** for new tools
- **Test both protocols** when adding functionality

### Performance Optimization

- **Use WASM** for computational tasks in `src/neural/`
- **Leverage pooled resources** (database connections, memory)
- **Follow async patterns** for coordination operations
- **Benchmark new code** against existing performance standards

## Build and Deployment

- **Environment**: Node.js 20+ with strict TypeScript
- **Dependencies**: Managed via npm with lock file
- **Testing**: Vitest with custom hybrid TDD configurations
- **Security**: Comprehensive scanning and dependency auditing
- **Performance**: Monitoring and alerting for key metrics

## Quality Gates

Before submitting any changes:

- [ ] All tests pass (both London and Classical)
- [ ] TypeScript compilation without errors
- [ ] ESLint validation passes
- [ ] No breaking changes to existing APIs
- [ ] Performance benchmarks maintained
- [ ] Documentation updated appropriately
- [ ] Security standards maintained

## Emergency Patterns

- **MCP server issues**: Check port 3000 availability, restart if needed
- **WASM compilation**: Ensure Rust toolchain available, check bindings
- **Agent coordination**: Verify agent registry, check swarm status
- **Memory issues**: Check backend availability, validate connections
- **Performance degradation**: Run benchmarks, check resource utilization

This is a sophisticated, production-grade AI platform. Maintain the high standards established and leverage the comprehensive systems already in place.
